{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"d3\"","webpack://[name]/./src/fornac.css","webpack://[name]/./node_modules/slugid/index.js","webpack://[name]/./src/naview/connection.js","webpack://[name]/./src/naview/loop.js","webpack://[name]/./src/naview/region.js","webpack://[name]/(webpack)/buildin/global.js","webpack://[name]/./src/img/play.svg","webpack://[name]/./node_modules/slugid/slugid.js","webpack://[name]/./node_modules/buffer/index.js","webpack://[name]/./node_modules/base64-js/index.js","webpack://[name]/./node_modules/ieee754/index.js","webpack://[name]/./node_modules/isarray/index.js","webpack://[name]/./node_modules/uuid/uuid.js","webpack://[name]/./node_modules/uuid/rng-browser.js","webpack://[name]/./src/d3-context-menu.js","webpack://[name]/./src/rnautils.js","webpack://[name]/./src/rnagraph.js","webpack://[name]/./src/simplernaplot.js","webpack://[name]/./src/naview/radloop.js","webpack://[name]/./src/naview/base.js","webpack://[name]/./src/naview/naview.js","webpack://[name]/./src/fornac.js","webpack://[name]/./src/rnaplot.js","webpack://[name]/./src/rnatreemap.js","webpack://[name]/./src/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","fornacPlot","node","label","outlineNode","protein","hiddenOutline","link","rnaName","transparent","dragLine","dragLineHidden","nodeLabel","selected","brush","noselect","__webpack_exports__","Connection","_loop_js__WEBPACK_IMPORTED_MODULE_0__","_region_js__WEBPACK_IMPORTED_MODULE_1__","this","loop","Loop","region","Region","start","end","xrad","yrad","angle","extruded","broken","_isNull","isNull","setNull","getLoop","setLoop","getRegion","setRegion","getStart","setStart","getEnd","setEnd","getXrad","setXrad","getYrad","setYrad","getAngle","setAngle","isExtruded","setExtruded","isBroken","setBroken","_connection_js__WEBPACK_IMPORTED_MODULE_0__","nconnection","connections","_connections","number","depth","mark","x","y","radius","getNconnection","setNconnection","setConnection","getConnection","addConnection","push","getNumber","setNumber","getDepth","setDepth","isMark","setMark","getX","setX","getY","setY","getRadius","setRadius","_start1","_end1","_start2","_end2","getStart1","setStart1","start1","getEnd1","setEnd1","end1","getStart2","setStart2","start2","getEnd2","setEnd2","end2","g","Function","e","Buffer","uuid","encode","uuid_","bytes","parse","toString","replace","substring","decode","slug","base64","unparse","v4","nice","global","ieee754","isArray","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","length","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","Error","allocUnsafe","from","TypeError","ArrayBuffer","array","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","len","checked","copy","buffer","val","type","data","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","swap","b","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64Slice","fromByteArray","utf8Slice","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","a","concat","list","pos","swap16","swap32","swap64","arguments","hexSlice","asciiSlice","latin1Slice","utf16leSlice","equals","inspect","max","match","join","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","Array","_arr","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","stringtrim","base64clean","src","dst","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","log","LN2","_rng","_byteToHex","_hexToByte","bth","_seedBytes","_nodeId","_clockseq","_lastMSecs","_lastNSecs","options","rnds","random","rng","ii","v1","clockseq","msecs","Date","getTime","nsecs","dt","tl","tmh","oct","crypto","msCrypto","getRandomValues","_rnds8","_rnds","contextMenu","menu","opts","openCallback","closeCallback","previouslyMouseUp","uid","slugid","rootElement","orientation","initialPos","parentStart","onOpen","onClose","d3","selectAll","enter","append","classed","select","on","console","style","index","pMouseUp","clickAwayFunc","elm","mousePos","currentThis","mouse","openChildMenuUid","html","event","preventDefault","stopPropagation","attr","divider","disabled","action","title","error","children","childUid","boundingRect","getBoundingClientRect","childrenContextMenu","left","pageXOffset","top","pageYOffset","width","ArrowIcon","contextMenuSelection","pageX","pageY","innerWidth","numberSort","rnaUtilities","self","bracketLeft","split","bracketRight","inverseBrackets","bracket","maximumMatching","pt","mm","maximum","backtrackMaximumMatching","oldPt","map","mmBt","q","dotbracketToPairtable","dotbracket","valueOf","stack","inverseBracketLeft","inverseBracketRight","ni","pop","insertIntoStack","k","deleteFromStack","pairtableToDotbracket","seen","findUnmatched","to","toRemove","unmatched","origFrom","origTo","removePseudoknotsFromPairtable","newPt","removed","ptToElements","level","dotBracketBreaks","elements","u5","u3","sort","external","right","ColorScheme","colorsText","parseRange","rangeText","nums","parts1","parseColorText","colorText","lines","currMolecule","counter","colorsJson","colorValues","","range","domainValues","words","search","partsRight","domain","color","normalizeColors","moleculeName","minNum","MAX_VALUE","maxNum","MIN_VALUE","resnum","RNAGraph","seq","structName","startNumber","circularizeExternal","circular","pseudoknotPairs","nucsToNodes","addUids","uids","nucleotideNodes","nodes","filter","nodeType","computePairtable","pairtable","removeBreaks","targetString","breaks","breakIndex","seqBreaks","rnaLength","arraysEqual","addPositions","positions","labelNodes","breakNodesToFakeNodes","_loop","elemType","getPositions","getUids","reinforceStems","relevantElements","allNucs","nucs","addFakeNode","reinforceLoops","filterNucs","newNode1","rna","px","py","newNode2","updateLinkUids","links","source","tan","fakeNodeUid","newNode","newX","newY","coordsCounted","cos","linkType","ia","fromNode","connectFakeNodes","fakeNodes","linked","thisNode","thisNuc","JSON","stringify","distance","addExtraLinks","extraLinks","newLink","getNodeFromNucleotides","extraLinkType","elementsToJson","elemTypes","nodeName","prevNode","nextNode","addLabels","labelInterval","prevVec","nextVec","combinedVec","vecLength","sqrt","normedVec","offsetVec","recalculateElements","removePseudoknots","externalLoop","eloop","prev","hloop","numGreater","reassignLinkUids","addPseudoknots","addName","simpleXyCoordinates","pair_table","alpha","loop_size","stack_size","lp","stk","PIHALF","PI","i_old","partner","start_k","start_l","ladder","begin","v","diff","polygon","count","bubble","remember","poss","sin","Radloop","loopnumber","next","getLoopnumber","setLoopnumber","getNext","setNext","getPrev","setPrev","Base","mate","extracted","getMate","setMate","isExtracted","setExtracted","NAView","ANUM","MAXITER","bases","nbase","nregion","loop_count","loops","regions","rlphead","lencut","RADIUS_REDUCTION_FACTOR","angleinc","_h","HELIX_FACTOR","BACKBONE_DISTANCE","FornaContainer","element","passedOptions","editable","displayAllLinks","applyForce","chargeDistance","friction","middleCharge","otherCharge","linkDistanceMultiplier","initialSize","layout","allowPanningAndZooming","transitionDuration","maxNodeRadius","resizeSvgOnResize","option","svgW","svgH","backgroundMenu","canvasMousePos","xScale","invert","yScale","addRNA","sequence","centerPos","nodeMenu","deleteNode","changeNode","insertNodeBeforeOrAfter","nodeContextMenu","backgroundContextMenu","scale","category20","mousedownNode","mouseupNode","linkContextMenuShown","linear","graph","magnitude","positionAnyNode","endPoint","startPoint","u","arrowTip","path","realLinkFilter","changeColors","moleculeColors","parseFloat","linkStrengths","pseudoknot","proteinChain","chainChain","intermolecule","other","displayParameters","displayBackground","displayNumbering","displayNodeOutline","displayNodeLabel","displayLinks","displayPseudoknotLinks","displayProteinLinks","colorScheme","customColors","animation","deaf","rnas","createInitialLayout","structure","avoidOthers","rg","rnaJson","naViewPositions","naview_xy_coordinates","newLinks","addExternalLinks","addRNAJSON","centerView","referenceNode","newNodeNum","newDotbracket","newSequence","splice","newPositions","positionOffset","newUids","pair","externalLinks","rnaGraph","_ref","maxX","minX","_ref$avoidOthers","_ref$centerPos","_ref$centerView","totalX","totalY","nodeCount","forEach","recalculateGraph","update","transitionRNA","newStructure","nextFunction","duration","newRNAJson","gnodes","visNodes","nodeKey","transition","visLinks","linkKey","newNodes","createNewNodes","exit","remove","each","updateStyle","createNewLinks","callback","setTimeout","uidsToNodes","fakeLinks","linkIndex","addNodes","json","entry","maxY","addCustomColors","addCustomColorsText","customColorsText","cs","changeColorScheme","clearNodes","fromJSON","jsonString","err","ProteinGraph","setSize","offsetHeight","offsetWidth","zoomer","brusher","svg","setOutlineColor","newColorScheme","fstyle","ordinal","category10","interpolate","interpolateLab","addEventListener","behavior","zoom","scaleExtent","previouslySelected","vis","translate","keydown","keyup","focus","svgGraph","mpos","resetMouseVars","datum","ctrlKeydown","extent","clear","getBoundingBoxTransform","minY","maxRadius","molWidth","molHeight","widthRatio","heightRatio","minRatio","newMolWidth","newMolHeight","bbTransform","force","charge","linkDistance","linkStrength","gravity","shiftKeydown","selectedNodes","mouseDownNode","collide","nx1","nx2","ny1","ny2","quad","x1","y1","x2","y2","point","resumeForce","resume","drag","sourceEvent","d1","fixed","dx","dy","keyCode","getStructuresDotBracket","updateRnaGraph","nucleotidePositions","labelPositions","removeLink","sequence1","sequence2","rnaDotBracket","dotBracket1","dotBracket2","positions1","positions2","uids1","uids2","rna1","rna2","removeBackBoneLink","extraLinkIndex","linkClick","fake","fake_fake","label_link","currIdx","nodeIdxs","idx1","idx2","addBackBoneLink","dotbracket1","dotbracket2","seq1","seq2","newSeq","toAddExternal","toDelete","newRna","addLink","nodeMouseclick","defaultPrevented","nodeMouseup","basepairPossible","linkMenu","linkContextMenu","nodeMousedown","startAnimation","stopAnimation","stop","setFriction","setCharge","setGravity","setPseudoknotStrength","linksEnter","linkLines","text","gnodesEnter","ease","labelAndProteinNodes","allLinks","xlink","realNodes","displayFakeLinks","geom","quadtree","visit","rnaPlot","height","nucleotideRadius","rnaEdgePadding","showNucleotideLabels","startNucleotideNumber","bundleExternalLinks","rnaLayout","namePosition","assign","chart","selection","plot","fillViewportTransform","xValues","yValues","xExtent","yExtent","xRange","yRange","createOtherScale","firstScale","newDomain","newRange","scaleFactor","newWidth","newMargin","createTransformToFillViewport","createLinks","gs","struct_name","createNucleotides","createLabels","nameLabel","xyPos","xy","textBBox","getBBox","textSize","plotSize","createName","nodesDict","linksList","results","ForceEdgeBundling","edges","compatibility_threshold","step_size","fbundling","d3line","line","edge_subpoint_data","makeExternalLinksBundle","_","rnaTreemap","rnaTreemapNode","treemap","sticky","read_in_bases","find_regions","construct_loop","find_central_loop","traverse_loop","npairs","nb1","ibase","retloop","cp","rp","rlp","maxconn","maxdepth","determine_depths","anchor_connection","xs","ys","xe","xn","yn","xc","yc","xo","yo","astart","aend","cpnext","acp","cpprev","ic","da","maxang","icstart","icend","icmiddle","icroot","done","done_all_connections","rooted","sign","midx","midy","nrx","nry","mx","my","vx","vy","dotmv","nmidx","nmidy","icstart1","icup","icdown","icnext","direction","dan","rr","cpx","cpy","cpnextx","cpnexty","cnx","rcn","rc","lnx","lny","rl","ac","acn","sx","sy","dcp","imaxloop","indice","atan2","set_radius","determine_radius","connected_connection","find_ic_middle","asin","construct_extruded_segment","generate_region","mindit","ci","sumn","sumd","dit","imindit","aend1","aend2","aave","a1","a2","dac","nstart","nend","collision","construct_circle_segment","minf2","maxf2","find_center_for_arc","h","hhi","hlow","disc","theta","iter","acos","noIterationFailureYet"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,OACA,mBAAAC,eAAAC,IACAD,OAAA,OAAAJ,GACA,iBAAAC,QACAA,QAAA,OAAAD,EAAAG,QAAA,OAEAJ,EAAA,OAAAC,EAAAD,EAAA,IARA,CASCO,OAAA,SAAAC,GACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAT,QAGA,IAAAC,EAAAM,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAX,QAAA,IAUA,OANAY,EAAAH,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAU,GAAA,EAGAV,EAAAD,QA0DA,OArDAQ,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAhB,EAAAiB,EAAAC,GACAV,EAAAW,EAAAnB,EAAAiB,IACAG,OAAAC,eAAArB,EAAAiB,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAxB,GACA,oBAAAyB,eAAAC,aACAN,OAAAC,eAAArB,EAAAyB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAArB,EAAA,cAAiD2B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAlC,GACA,IAAAiB,EAAAjB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAO,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,oBClFAxC,EAAAD,QAAAM,mBCCAL,EAAAD,QAAA,CAAkB0C,WAAA,oBAAAC,KAAA,cAAAC,MAAA,eAAAC,YAAA,qBAAAC,QAAA,iBAAAC,cAAA,uBAAAC,KAAA,cAAAC,QAAA,iBAAAC,YAAA,qBAAAC,SAAA,kBAAAC,eAAA,wBAAAC,UAAA,mBAAAC,SAAA,kBAAAC,MAAA,eAAAC,SAAA,oCCqBlBvD,EAAAD,QAAiBQ,EAAQ,iCCtBzBA,EAAAgB,EAAAiC,GAAAjD,EAAAQ,EAAAyC,EAAA,+BAAAC,IAAA,IAAAC,EAAAnD,EAAA,GAAAoD,EAAApD,EAAA,GAGO,SAASkD,IACfG,KAAKC,KAAO,IAAIC,IAChBF,KAAKG,OAAS,IAAIC,IAElBJ,KAAKK,MAAQ,KACVL,KAAKM,IAAM,KACdN,KAAKO,KAAO,KACTP,KAAKQ,KAAO,KACZR,KAAKS,MAAQ,KAGhBT,KAAKU,SAAW,KAEhBV,KAAKW,OAAS,KAEdX,KAAKY,SAAU,EAGhBf,EAAWpB,UAAUoC,OAAS,WAC7B,OAAOb,KAAKY,SAGbf,EAAWpB,UAAUqC,QAAU,SAASD,GACvCb,KAAKY,QAAUC,GAGhBhB,EAAWpB,UAAUsC,QAAU,WAC9B,OAAOf,KAAKC,MAGbJ,EAAWpB,UAAUuC,QAAU,SAASf,GACvCD,KAAKC,KAAOA,GAGbJ,EAAWpB,UAAUwC,UAAY,WAChC,OAAOjB,KAAKG,QAGbN,EAAWpB,UAAUyC,UAAY,SAASf,GACzCH,KAAKG,OAASA,GAGfN,EAAWpB,UAAU0C,SAAW,WAC/B,OAAOnB,KAAKK,OAGbR,EAAWpB,UAAU2C,SAAW,SAASf,GACxCL,KAAKK,MAAQA,GAGdR,EAAWpB,UAAU4C,OAAS,WAC7B,OAAOrB,KAAKM,KAGbT,EAAWpB,UAAU6C,OAAS,SAAShB,GACtCN,KAAKM,IAAMA,GAGZT,EAAWpB,UAAU8C,QAAU,WAC9B,OAAOvB,KAAKO,MAGbV,EAAWpB,UAAU+C,QAAU,SAASjB,GACvCP,KAAKO,KAAOA,GAGbV,EAAWpB,UAAUgD,QAAU,WAC9B,OAAOzB,KAAKQ,MAGbX,EAAWpB,UAAUiD,QAAU,SAASlB,GACvCR,KAAKQ,KAAOA,GAGbX,EAAWpB,UAAUkD,SAAW,WAC/B,OAAO3B,KAAKS,OAGbZ,EAAWpB,UAAUmD,SAAW,SAASnB,GACxCT,KAAKS,MAAQA,GAGdZ,EAAWpB,UAAUoD,WAAa,WACjC,OAAO7B,KAAKU,UAGbb,EAAWpB,UAAUqD,YAAc,SAASpB,GAC3CV,KAAKU,SAAWA,GAGjBb,EAAWpB,UAAUsD,SAAW,WAC/B,OAAO/B,KAAKW,QAGbd,EAAWpB,UAAUuD,UAAY,SAASrB,GACzCX,KAAKW,OAASA,iCClGfhE,EAAAQ,EAAAyC,EAAA,sBAAAM,IAAA,IAAA+B,EAAAtF,EAAA,GAEO,SAASuD,IACfF,KAAKkC,YAAc,KACnBlC,KAAKmC,YAAc,GACnBnC,KAAKoC,aAAe,GACpBpC,KAAKqC,OAAS,KACdrC,KAAKsC,MAAQ,KACbtC,KAAKuC,KAAO,KACZvC,KAAKwC,EAAI,KACNxC,KAAKyC,EAAI,KACTzC,KAAK0C,OAAS,KAGlBxC,EAAKzB,UAAUkE,eAAiB,WAC/B,OAAO3C,KAAKkC,aAGbhC,EAAKzB,UAAUmE,eAAiB,SAASV,GACxClC,KAAKkC,YAAcA,GAGpBhC,EAAKzB,UAAUoE,cAAgB,SAAShG,EAAGK,GACjC,MAALA,EACH8C,KAAKoC,aAAavF,GAAKK,GAGlB8C,KAAKoC,aAAavF,KACtBmD,KAAKoC,aAAavF,GAAK,IAAIgD,cAE5BG,KAAKoC,aAAavF,GAAGiE,SAAQ,KAI/BZ,EAAKzB,UAAUqE,cAAgB,SAASjG,GACvC,IAAIgD,EAAaxD,EAAQ,GACpB2D,KAAKoC,aAAavF,KAChBmD,KAAKoC,aAAavF,GAAK,IAAIgD,GAElC,IAAI3C,EAAI8C,KAAKoC,aAAavF,GAC1B,OAAIK,EAAE2D,SACE,KAGA3D,GAITgD,EAAKzB,UAAUsE,cAAgB,SAASlG,EAAGK,GAC1C8C,KAAKoC,aAAaY,KAAK9F,IAGxBgD,EAAKzB,UAAUwE,UAAY,WAC1B,OAAOjD,KAAKqC,QAGbnC,EAAKzB,UAAUyE,UAAY,SAASb,GACnCrC,KAAKqC,OAASA,GAGfnC,EAAKzB,UAAU0E,SAAW,WACzB,OAAOnD,KAAKsC,OAGbpC,EAAKzB,UAAU2E,SAAW,SAASd,GAClCtC,KAAKsC,MAAQA,GAGdpC,EAAKzB,UAAU4E,OAAS,WACvB,OAAOrD,KAAKuC,MAGbrC,EAAKzB,UAAU6E,QAAU,SAASf,GACjCvC,KAAKuC,KAAOA,GAGbrC,EAAKzB,UAAU8E,KAAO,WACrB,OAAOvD,KAAKwC,GAGbtC,EAAKzB,UAAU+E,KAAO,SAAShB,GAC9BxC,KAAKwC,EAAIA,GAGVtC,EAAKzB,UAAUgF,KAAO,WACrB,OAAOzD,KAAKyC,GAGbvC,EAAKzB,UAAUiF,KAAO,SAASjB,GAC9BzC,KAAKyC,EAAIA,GAGVvC,EAAKzB,UAAUkF,UAAY,WAC1B,OAAO3D,KAAK0C,QAGbxC,EAAKzB,UAAUmF,UAAY,SAASlB,GACnC1C,KAAK0C,OAASA,iCCjGR,SAAStC,IACfJ,KAAK6D,QAAU,KACZ7D,KAAK8D,MAAQ,KACb9D,KAAK+D,QAAU,KACf/D,KAAKgE,MAAQ,KAJjBrH,EAAAQ,EAAAyC,EAAA,sBAAAQ,IAOAA,EAAO3B,UAAUwF,UAAY,WAC5B,OAAOjE,KAAK6D,SAGbzD,EAAO3B,UAAUyF,UAAY,SAASC,GACrCnE,KAAK6D,QAAUM,GAGhB/D,EAAO3B,UAAU2F,QAAU,WAC1B,OAAOpE,KAAK8D,OAGb1D,EAAO3B,UAAU4F,QAAU,SAASC,GACnCtE,KAAK8D,MAAQQ,GAGdlE,EAAO3B,UAAU8F,UAAY,WAC5B,OAAOvE,KAAK+D,SAGb3D,EAAO3B,UAAU+F,UAAY,SAASC,GACrCzE,KAAK+D,QAAUU,GAGhBrE,EAAO3B,UAAUiG,QAAU,WAC1B,OAAO1E,KAAKgE,OAGb5D,EAAO3B,UAAUkG,QAAU,SAASC,GACnC5E,KAAKgE,MAAQY,kBCpCd,IAAAC,EAGAA,EAAA,WACA,OAAA7E,KADA,GAIA,IAEA6E,KAAA,IAAAC,SAAA,iBACC,MAAAC,GAED,iBAAAvI,SAAAqI,EAAArI,QAOAJ,EAAAD,QAAA0I,mBCnBAzI,EAAAD,QAAiBQ,EAAAgC,EAAuB,yDCAxC,SAAAqG,GAsBA,IAAAC,EAAWtI,EAAQ,IAMnBR,EAAA+I,OAAA,SAAAC,GACA,IAAAC,EAAAH,EAAAI,MAAAF,GAMA,OALA,IAAAH,EAAAI,GAAAE,SAAA,UAEAC,QAAA,WACAA,QAAA,WACAC,UAAA,OAOArJ,EAAAsJ,OAAA,SAAAC,GACA,IAAAC,EAAAD,EACAH,QAAA,UACAA,QAAA,UACA,KACA,OAAAN,EAAAW,QAAA,IAAAZ,EAAAW,EAAA,YAMAxJ,EAAA0J,GAAA,WAOA,OANAZ,EAAAY,GAAA,SAAAb,EAAA,KACAM,SAAA,UAEAC,QAAA,WACAA,QAAA,WACAC,UAAA,OAeArJ,EAAA2J,KAAA,WACA,IAAAV,EAAAH,EAAAY,GAAA,SAAAb,EAAA,KAOA,OANAI,EAAA,OAAAA,EAAA,GACAA,EAAAE,SAAA,UAEAC,QAAA,WACAA,QAAA,WACAC,UAAA,+DChFA,SAAAO;;;;;;;AAUA,IAAAJ,EAAahJ,EAAQ,IACrBqJ,EAAcrJ,EAAQ,IACtBsJ,EAActJ,EAAQ,IAmDtB,SAAAuJ,IACA,OAAAlB,EAAAmB,oBACA,WACA,WAGA,SAAAC,EAAAC,EAAAC,GACA,GAAAJ,IAAAI,EACA,UAAAC,WAAA,8BAcA,OAZAvB,EAAAmB,qBAEAE,EAAA,IAAAG,WAAAF,IACAG,UAAAzB,EAAAvG,WAGA,OAAA4H,IACAA,EAAA,IAAArB,EAAAsB,IAEAD,EAAAC,UAGAD,EAaA,SAAArB,EAAA0B,EAAAC,EAAAL,GACA,KAAAtB,EAAAmB,qBAAAnG,gBAAAgF,GACA,WAAAA,EAAA0B,EAAAC,EAAAL,GAIA,oBAAAI,EAAA,CACA,oBAAAC,EACA,UAAAC,MACA,qEAGA,OAAAC,EAAA7G,KAAA0G,GAEA,OAAAI,EAAA9G,KAAA0G,EAAAC,EAAAL,GAWA,SAAAQ,EAAAT,EAAAvI,EAAA6I,EAAAL,GACA,oBAAAxI,EACA,UAAAiJ,UAAA,yCAGA,0BAAAC,aAAAlJ,aAAAkJ,YA6HA,SAAAX,EAAAY,EAAAC,EAAAZ,GAGA,GAFAW,EAAAE,WAEAD,EAAA,GAAAD,EAAAE,WAAAD,EACA,UAAAX,WAAA,6BAGA,GAAAU,EAAAE,WAAAD,GAAAZ,GAAA,GACA,UAAAC,WAAA,6BAIAU,OADAG,IAAAF,QAAAE,IAAAd,EACA,IAAAE,WAAAS,QACGG,IAAAd,EACH,IAAAE,WAAAS,EAAAC,GAEA,IAAAV,WAAAS,EAAAC,EAAAZ,GAGAtB,EAAAmB,qBAEAE,EAAAY,GACAR,UAAAzB,EAAAvG,UAGA4H,EAAAgB,EAAAhB,EAAAY,GAEA,OAAAZ,EAvJAiB,CAAAjB,EAAAvI,EAAA6I,EAAAL,GAGA,iBAAAxI,EAwFA,SAAAuI,EAAAkB,EAAAC,GACA,iBAAAA,GAAA,KAAAA,IACAA,EAAA,QAGA,IAAAxC,EAAAyC,WAAAD,GACA,UAAAT,UAAA,8CAGA,IAAAT,EAAA,EAAAa,EAAAI,EAAAC,GAGAE,GAFArB,EAAAD,EAAAC,EAAAC,IAEAqB,MAAAJ,EAAAC,GAEAE,IAAApB,IAIAD,IAAAuB,MAAA,EAAAF,IAGA,OAAArB,EA5GAwB,CAAAxB,EAAAvI,EAAA6I,GAsJA,SAAAN,EAAAyB,GACA,GAAA9C,EAAA+C,SAAAD,GAAA,CACA,IAAAE,EAAA,EAAAC,EAAAH,EAAAxB,QAGA,YAFAD,EAAAD,EAAAC,EAAA2B,IAEA1B,OACAD,GAGAyB,EAAAI,KAAA7B,EAAA,IAAA2B,GACA3B,GAGA,GAAAyB,EAAA,CACA,uBAAAd,aACAc,EAAAK,kBAAAnB,aAAA,WAAAc,EACA,uBAAAA,EAAAxB,SA+8CA8B,EA/8CAN,EAAAxB,SAg9CA8B,EA/8CAhC,EAAAC,EAAA,GAEAgB,EAAAhB,EAAAyB,GAGA,cAAAA,EAAAO,MAAApC,EAAA6B,EAAAQ,MACA,OAAAjB,EAAAhB,EAAAyB,EAAAQ,MAw8CA,IAAAF,EAp8CA,UAAArB,UAAA,sFA9KAwB,CAAAlC,EAAAvI,GA4BA,SAAA0K,EAAAC,GACA,oBAAAA,EACA,UAAA1B,UAAA,oCACG,GAAA0B,EAAA,EACH,UAAAlC,WAAA,wCA4BA,SAAAM,EAAAR,EAAAoC,GAGA,GAFAD,EAAAC,GACApC,EAAAD,EAAAC,EAAAoC,EAAA,MAAAR,EAAAQ,KACAzD,EAAAmB,oBACA,QAAAtJ,EAAA,EAAmBA,EAAA4L,IAAU5L,EAC7BwJ,EAAAxJ,GAAA,EAGA,OAAAwJ,EAwCA,SAAAgB,EAAAhB,EAAAY,GACA,IAAAX,EAAAW,EAAAX,OAAA,MAAA2B,EAAAhB,EAAAX,QACAD,EAAAD,EAAAC,EAAAC,GACA,QAAAzJ,EAAA,EAAiBA,EAAAyJ,EAAYzJ,GAAA,EAC7BwJ,EAAAxJ,GAAA,IAAAoK,EAAApK,GAEA,OAAAwJ,EA+DA,SAAA4B,EAAA3B,GAGA,GAAAA,GAAAJ,IACA,UAAAK,WAAA,0DACAL,IAAAZ,SAAA,cAEA,SAAAgB,EAsFA,SAAAa,EAAAI,EAAAC,GACA,GAAAxC,EAAA+C,SAAAR,GACA,OAAAA,EAAAjB,OAEA,uBAAAU,aAAA,mBAAAA,YAAA0B,SACA1B,YAAA0B,OAAAnB,iBAAAP,aACA,OAAAO,EAAAJ,WAEA,iBAAAI,IACAA,EAAA,GAAAA,GAGA,IAAAS,EAAAT,EAAAjB,OACA,OAAA0B,EAAA,SAIA,IADA,IAAAW,GAAA,IAEA,OAAAnB,GACA,YACA,aACA,aACA,OAAAQ,EACA,WACA,YACA,UAAAZ,EACA,OAAAwB,EAAArB,GAAAjB,OACA,WACA,YACA,cACA,eACA,SAAA0B,EACA,UACA,OAAAA,IAAA,EACA,aACA,OAAAa,EAAAtB,GAAAjB,OACA,QACA,GAAAqC,EAAA,OAAAC,EAAArB,GAAAjB,OACAkB,GAAA,GAAAA,GAAAsB,cACAH,GAAA,GAgFA,SAAAI,EAAAC,EAAA1K,EAAArB,GACA,IAAAJ,EAAAmM,EAAA1K,GACA0K,EAAA1K,GAAA0K,EAAA/L,GACA+L,EAAA/L,GAAAJ,EAmIA,SAAAoM,EAAAd,EAAAC,EAAAlB,EAAAM,EAAA0B,GAEA,OAAAf,EAAA7B,OAAA,SAmBA,GAhBA,iBAAAY,GACAM,EAAAN,EACAA,EAAA,GACGA,EAAA,WACHA,EAAA,WACGA,GAAA,aACHA,GAAA,YAEAA,KACAiC,MAAAjC,KAEAA,EAAAgC,EAAA,EAAAf,EAAA7B,OAAA,GAIAY,EAAA,IAAAA,EAAAiB,EAAA7B,OAAAY,GACAA,GAAAiB,EAAA7B,OAAA,CACA,GAAA4C,EAAA,SACAhC,EAAAiB,EAAA7B,OAAA,OACG,GAAAY,EAAA,GACH,IAAAgC,EACA,SADAhC,EAAA,EAUA,GALA,iBAAAkB,IACAA,EAAApD,EAAA8B,KAAAsB,EAAAZ,IAIAxC,EAAA+C,SAAAK,GAEA,WAAAA,EAAA9B,QACA,EAEA8C,EAAAjB,EAAAC,EAAAlB,EAAAM,EAAA0B,GACG,oBAAAd,EAEH,OADAA,GAAA,IACApD,EAAAmB,qBACA,mBAAAK,WAAA/H,UAAA4K,QACAH,EACA1C,WAAA/H,UAAA4K,QAAArM,KAAAmL,EAAAC,EAAAlB,GAEAV,WAAA/H,UAAA6K,YAAAtM,KAAAmL,EAAAC,EAAAlB,GAGAkC,EAAAjB,EAAA,CAAAC,GAAAlB,EAAAM,EAAA0B,GAGA,UAAAnC,UAAA,wCAGA,SAAAqC,EAAAG,EAAAnB,EAAAlB,EAAAM,EAAA0B,GACA,IA0BArM,EA1BA2M,EAAA,EACAC,EAAAF,EAAAjD,OACAoD,EAAAtB,EAAA9B,OAEA,QAAAc,IAAAI,IAEA,UADAA,EAAAmC,OAAAnC,GAAAsB,gBACA,UAAAtB,GACA,YAAAA,GAAA,aAAAA,GAAA,CACA,GAAA+B,EAAAjD,OAAA,GAAA8B,EAAA9B,OAAA,EACA,SAEAkD,EAAA,EACAC,GAAA,EACAC,GAAA,EACAxC,GAAA,EAIA,SAAA0C,EAAAC,EAAAhN,GACA,WAAA2M,EACAK,EAAAhN,GAEAgN,EAAAC,aAAAjN,EAAA2M,GAKA,GAAAN,EAAA,CACA,IAAAa,GAAA,EACA,IAAAlN,EAAAqK,EAAwBrK,EAAA4M,EAAe5M,IACvC,GAAA+M,EAAAL,EAAA1M,KAAA+M,EAAAxB,GAAA,IAAA2B,EAAA,EAAAlN,EAAAkN,IAEA,IADA,IAAAA,MAAAlN,GACAA,EAAAkN,EAAA,IAAAL,EAAA,OAAAK,EAAAP,OAEA,IAAAO,IAAAlN,KAAAkN,GACAA,GAAA,OAKA,IADA7C,EAAAwC,EAAAD,IAAAvC,EAAAuC,EAAAC,GACA7M,EAAAqK,EAAwBrK,GAAA,EAAQA,IAAA,CAEhC,IADA,IAAAmN,GAAA,EACAC,EAAA,EAAqBA,EAAAP,EAAeO,IACpC,GAAAL,EAAAL,EAAA1M,EAAAoN,KAAAL,EAAAxB,EAAA6B,GAAA,CACAD,GAAA,EACA,MAGA,GAAAA,EAAA,OAAAnN,EAIA,SAeA,SAAAqN,EAAAL,EAAAtC,EAAA4C,EAAA7D,GACA6D,EAAAC,OAAAD,IAAA,EACA,IAAAE,EAAAR,EAAAvD,OAAA6D,EACA7D,GAGAA,EAAA8D,OAAA9D,IACA+D,IACA/D,EAAA+D,GAJA/D,EAAA+D,EASA,IAAAC,EAAA/C,EAAAjB,OACA,GAAAgE,EAAA,eAAAvD,UAAA,sBAEAT,EAAAgE,EAAA,IACAhE,EAAAgE,EAAA,GAEA,QAAAzN,EAAA,EAAiBA,EAAAyJ,IAAYzJ,EAAA,CAC7B,IAAA0N,EAAAC,SAAAjD,EAAAkD,OAAA,EAAA5N,EAAA,OACA,GAAAsM,MAAAoB,GAAA,OAAA1N,EACAgN,EAAAM,EAAAtN,GAAA0N,EAEA,OAAA1N,EAGA,SAAA6N,EAAAb,EAAAtC,EAAA4C,EAAA7D,GACA,OAAAqE,EAAA/B,EAAArB,EAAAsC,EAAAvD,OAAA6D,GAAAN,EAAAM,EAAA7D,GAGA,SAAAsE,EAAAf,EAAAtC,EAAA4C,EAAA7D,GACA,OAAAqE,EAq6BA,SAAAE,GAEA,IADA,IAAAC,EAAA,GACAjO,EAAA,EAAiBA,EAAAgO,EAAAvE,SAAgBzJ,EAEjCiO,EAAA9H,KAAA,IAAA6H,EAAAE,WAAAlO,IAEA,OAAAiO,EA36BAE,CAAAzD,GAAAsC,EAAAM,EAAA7D,GAGA,SAAA2E,EAAApB,EAAAtC,EAAA4C,EAAA7D,GACA,OAAAsE,EAAAf,EAAAtC,EAAA4C,EAAA7D,GAGA,SAAA4E,EAAArB,EAAAtC,EAAA4C,EAAA7D,GACA,OAAAqE,EAAA9B,EAAAtB,GAAAsC,EAAAM,EAAA7D,GAGA,SAAA6E,EAAAtB,EAAAtC,EAAA4C,EAAA7D,GACA,OAAAqE,EAk6BA,SAAAE,EAAAO,GAGA,IAFA,IAAAlO,EAAAmO,EAAAC,EACAR,EAAA,GACAjO,EAAA,EAAiBA,EAAAgO,EAAAvE,WACjB8E,GAAA,QADiCvO,EAGjCK,EAAA2N,EAAAE,WAAAlO,GACAwO,EAAAnO,GAAA,EACAoO,EAAApO,EAAA,IACA4N,EAAA9H,KAAAsI,GACAR,EAAA9H,KAAAqI,GAGA,OAAAP,EA/6BAS,CAAAhE,EAAAsC,EAAAvD,OAAA6D,GAAAN,EAAAM,EAAA7D,GAkFA,SAAAkF,EAAA3B,EAAAxJ,EAAAC,GACA,WAAAD,GAAAC,IAAAuJ,EAAAvD,OACAX,EAAA8F,cAAA5B,GAEAlE,EAAA8F,cAAA5B,EAAAjC,MAAAvH,EAAAC,IAIA,SAAAoL,EAAA7B,EAAAxJ,EAAAC,GACAA,EAAAqL,KAAAC,IAAA/B,EAAAvD,OAAAhG,GAIA,IAHA,IAAAuL,EAAA,GAEAhP,EAAAwD,EACAxD,EAAAyD,GAAA,CACA,IAQAwL,EAAAC,EAAAC,EAAAC,EARAC,EAAArC,EAAAhN,GACAsP,EAAA,KACAC,EAAAF,EAAA,MACAA,EAAA,MACAA,EAAA,MACA,EAEA,GAAArP,EAAAuP,GAAA9L,EAGA,OAAA8L,GACA,OACAF,EAAA,MACAC,EAAAD,GAEA,MACA,OAEA,WADAJ,EAAAjC,EAAAhN,EAAA,OAEAoP,GAAA,GAAAC,IAAA,KAAAJ,GACA,MACAK,EAAAF,GAGA,MACA,OACAH,EAAAjC,EAAAhN,EAAA,GACAkP,EAAAlC,EAAAhN,EAAA,GACA,UAAAiP,IAAA,UAAAC,KACAE,GAAA,GAAAC,IAAA,OAAAJ,IAAA,KAAAC,GACA,OAAAE,EAAA,OAAAA,EAAA,SACAE,EAAAF,GAGA,MACA,OACAH,EAAAjC,EAAAhN,EAAA,GACAkP,EAAAlC,EAAAhN,EAAA,GACAmP,EAAAnC,EAAAhN,EAAA,GACA,UAAAiP,IAAA,UAAAC,IAAA,UAAAC,KACAC,GAAA,GAAAC,IAAA,OAAAJ,IAAA,OAAAC,IAAA,KAAAC,GACA,OAAAC,EAAA,UACAE,EAAAF,GAMA,OAAAE,GAGAA,EAAA,MACAC,EAAA,GACKD,EAAA,QAELA,GAAA,MACAN,EAAA7I,KAAAmJ,IAAA,eACAA,EAAA,WAAAA,GAGAN,EAAA7I,KAAAmJ,GACAtP,GAAAuP,EAGA,OAQA,SAAAC,GACA,IAAArE,EAAAqE,EAAA/F,OACA,GAAA0B,GAAAsE,EACA,OAAA3C,OAAA4C,aAAAC,MAAA7C,OAAA0C,GAIA,IAAAR,EAAA,GACAhP,EAAA,EACA,KAAAA,EAAAmL,GACA6D,GAAAlC,OAAA4C,aAAAC,MACA7C,OACA0C,EAAAzE,MAAA/K,KAAAyP,IAGA,OAAAT,EAvBAY,CAAAZ,GA98BA1P,EAAA6I,SACA7I,EAAAuQ,WAoTA,SAAApG,IACAA,OACAA,EAAA,GAEA,OAAAtB,EAAA2H,OAAArG,IAvTAnK,EAAAyQ,kBAAA,GA0BA5H,EAAAmB,yBAAAiB,IAAArB,EAAAI,oBACAJ,EAAAI,oBAQA,WACA,IACA,IAAAoD,EAAA,IAAA/C,WAAA,GAEA,OADA+C,EAAA9C,UAAA,CAAqBA,UAAAD,WAAA/H,UAAAoO,IAAA,WAAmD,YACxE,KAAAtD,EAAAsD,OACA,mBAAAtD,EAAAuD,UACA,IAAAvD,EAAAuD,SAAA,KAAA3F,WACG,MAAApC,GACH,UAfAgI,GAKA5Q,EAAA+J,eAkEAlB,EAAAgI,SAAA,KAGAhI,EAAAiI,SAAA,SAAA1D,GAEA,OADAA,EAAA9C,UAAAzB,EAAAvG,UACA8K,GA2BAvE,EAAA8B,KAAA,SAAAhJ,EAAA6I,EAAAL,GACA,OAAAQ,EAAA,KAAAhJ,EAAA6I,EAAAL,IAGAtB,EAAAmB,sBACAnB,EAAAvG,UAAAgI,UAAAD,WAAA/H,UACAuG,EAAAyB,UAAAD,WACA,oBAAA5I,eAAAsP,SACAlI,EAAApH,OAAAsP,WAAAlI,GAEAzH,OAAAC,eAAAwH,EAAApH,OAAAsP,QAAA,CACApP,MAAA,KACAqP,cAAA,KAiCAnI,EAAA2H,MAAA,SAAAlE,EAAA2E,EAAA5F,GACA,OArBA,SAAAnB,EAAAoC,EAAA2E,EAAA5F,GAEA,OADAgB,EAAAC,GACAA,GAAA,EACArC,EAAAC,EAAAoC,QAEArB,IAAAgG,EAIA,iBAAA5F,EACApB,EAAAC,EAAAoC,GAAA2E,OAAA5F,GACApB,EAAAC,EAAAoC,GAAA2E,QAEAhH,EAAAC,EAAAoC,GAQAkE,CAAA,KAAAlE,EAAA2E,EAAA5F,IAiBAxC,EAAA6B,YAAA,SAAA4B,GACA,OAAA5B,EAAA,KAAA4B,IAKAzD,EAAAqI,gBAAA,SAAA5E,GACA,OAAA5B,EAAA,KAAA4B,IAiHAzD,EAAA+C,SAAA,SAAAiB,GACA,cAAAA,MAAAsE,YAGAtI,EAAAuI,QAAA,SAAAC,EAAAxE,GACA,IAAAhE,EAAA+C,SAAAyF,KAAAxI,EAAA+C,SAAAiB,GACA,UAAAjC,UAAA,6BAGA,GAAAyG,IAAAxE,EAAA,SAKA,IAHA,IAAAxG,EAAAgL,EAAAlH,OACA7D,EAAAuG,EAAA1C,OAEAzJ,EAAA,EAAAmL,EAAA2D,KAAAC,IAAApJ,EAAAC,GAAuC5F,EAAAmL,IAASnL,EAChD,GAAA2Q,EAAA3Q,KAAAmM,EAAAnM,GAAA,CACA2F,EAAAgL,EAAA3Q,GACA4F,EAAAuG,EAAAnM,GACA,MAIA,OAAA2F,EAAAC,GAAA,EACAA,EAAAD,EAAA,EACA,GAGAwC,EAAAyC,WAAA,SAAAD,GACA,OAAAmC,OAAAnC,GAAAsB,eACA,UACA,WACA,YACA,YACA,aACA,aACA,aACA,WACA,YACA,cACA,eACA,SACA,QACA,WAIA9D,EAAAyI,OAAA,SAAAC,EAAApH,GACA,IAAAL,EAAAyH,GACA,UAAA3G,UAAA,+CAGA,OAAA2G,EAAApH,OACA,OAAAtB,EAAA2H,MAAA,GAGA,IAAA9P,EACA,QAAAuK,IAAAd,EAEA,IADAA,EAAA,EACAzJ,EAAA,EAAeA,EAAA6Q,EAAApH,SAAiBzJ,EAChCyJ,GAAAoH,EAAA7Q,GAAAyJ,OAIA,IAAA6B,EAAAnD,EAAA6B,YAAAP,GACAqH,EAAA,EACA,IAAA9Q,EAAA,EAAaA,EAAA6Q,EAAApH,SAAiBzJ,EAAA,CAC9B,IAAAgN,EAAA6D,EAAA7Q,GACA,IAAAmI,EAAA+C,SAAA8B,GACA,UAAA9C,UAAA,+CAEA8C,EAAA3B,KAAAC,EAAAwF,GACAA,GAAA9D,EAAAvD,OAEA,OAAA6B,GA8CAnD,EAAAmC,aA0EAnC,EAAAvG,UAAA6O,WAAA,EAQAtI,EAAAvG,UAAAmP,OAAA,WACA,IAAA5F,EAAAhI,KAAAsG,OACA,GAAA0B,EAAA,KACA,UAAAzB,WAAA,6CAEA,QAAA1J,EAAA,EAAiBA,EAAAmL,EAASnL,GAAA,EAC1BkM,EAAA/I,KAAAnD,IAAA,GAEA,OAAAmD,MAGAgF,EAAAvG,UAAAoP,OAAA,WACA,IAAA7F,EAAAhI,KAAAsG,OACA,GAAA0B,EAAA,KACA,UAAAzB,WAAA,6CAEA,QAAA1J,EAAA,EAAiBA,EAAAmL,EAASnL,GAAA,EAC1BkM,EAAA/I,KAAAnD,IAAA,GACAkM,EAAA/I,KAAAnD,EAAA,EAAAA,EAAA,GAEA,OAAAmD,MAGAgF,EAAAvG,UAAAqP,OAAA,WACA,IAAA9F,EAAAhI,KAAAsG,OACA,GAAA0B,EAAA,KACA,UAAAzB,WAAA,6CAEA,QAAA1J,EAAA,EAAiBA,EAAAmL,EAASnL,GAAA,EAC1BkM,EAAA/I,KAAAnD,IAAA,GACAkM,EAAA/I,KAAAnD,EAAA,EAAAA,EAAA,GACAkM,EAAA/I,KAAAnD,EAAA,EAAAA,EAAA,GACAkM,EAAA/I,KAAAnD,EAAA,EAAAA,EAAA,GAEA,OAAAmD,MAGAgF,EAAAvG,UAAA6G,SAAA,WACA,IAAAgB,EAAA,EAAAtG,KAAAsG,OACA,WAAAA,EAAA,GACA,IAAAyH,UAAAzH,OAAAoF,EAAA1L,KAAA,EAAAsG,GAxHA,SAAAkB,EAAAnH,EAAAC,GACA,IAAAqI,GAAA,EAcA,SALAvB,IAAA/G,KAAA,KACAA,EAAA,GAIAA,EAAAL,KAAAsG,OACA,SAOA,SAJAc,IAAA9G,KAAAN,KAAAsG,UACAhG,EAAAN,KAAAsG,QAGAhG,GAAA,EACA,SAOA,IAHAA,KAAA,KACAD,KAAA,GAGA,SAKA,IAFAmH,MAAA,UAGA,OAAAA,GACA,UACA,OAAAwG,EAAAhO,KAAAK,EAAAC,GAEA,WACA,YACA,OAAAoL,EAAA1L,KAAAK,EAAAC,GAEA,YACA,OAAA2N,EAAAjO,KAAAK,EAAAC,GAEA,aACA,aACA,OAAA4N,EAAAlO,KAAAK,EAAAC,GAEA,aACA,OAAAkL,EAAAxL,KAAAK,EAAAC,GAEA,WACA,YACA,cACA,eACA,OAAA6N,EAAAnO,KAAAK,EAAAC,GAEA,QACA,GAAAqI,EAAA,UAAA5B,UAAA,qBAAAS,GACAA,KAAA,IAAAsB,cACAH,GAAA,IAwDA6D,MAAAxM,KAAA+N,YAGA/I,EAAAvG,UAAA2P,OAAA,SAAApF,GACA,IAAAhE,EAAA+C,SAAAiB,GAAA,UAAAjC,UAAA,6BACA,OAAA/G,OAAAgJ,GACA,IAAAhE,EAAAuI,QAAAvN,KAAAgJ,IAGAhE,EAAAvG,UAAA4P,QAAA,WACA,IAAAxD,EAAA,GACAyD,EAAAnS,EAAAyQ,kBAKA,OAJA5M,KAAAsG,OAAA,IACAuE,EAAA7K,KAAAsF,SAAA,QAAAgJ,GAAAC,MAAA,SAAkDC,KAAA,KAClDxO,KAAAsG,OAAAgI,IAAAzD,GAAA,UAEA,WAAAA,EAAA,KAGA7F,EAAAvG,UAAA8O,QAAA,SAAAkB,EAAApO,EAAAC,EAAAoO,EAAAC,GACA,IAAA3J,EAAA+C,SAAA0G,GACA,UAAA1H,UAAA,6BAgBA,QAbAK,IAAA/G,IACAA,EAAA,QAEA+G,IAAA9G,IACAA,EAAAmO,IAAAnI,OAAA,QAEAc,IAAAsH,IACAA,EAAA,QAEAtH,IAAAuH,IACAA,EAAA3O,KAAAsG,QAGAjG,EAAA,GAAAC,EAAAmO,EAAAnI,QAAAoI,EAAA,GAAAC,EAAA3O,KAAAsG,OACA,UAAAC,WAAA,sBAGA,GAAAmI,GAAAC,GAAAtO,GAAAC,EACA,SAEA,GAAAoO,GAAAC,EACA,SAEA,GAAAtO,GAAAC,EACA,SAQA,GAAAN,OAAAyO,EAAA,SASA,IAPA,IAAAjM,GAJAmM,KAAA,IADAD,KAAA,GAMAjM,GAPAnC,KAAA,IADAD,KAAA,GASA2H,EAAA2D,KAAAC,IAAApJ,EAAAC,GAEAmM,EAAA5O,KAAA4H,MAAA8G,EAAAC,GACAE,EAAAJ,EAAA7G,MAAAvH,EAAAC,GAEAzD,EAAA,EAAiBA,EAAAmL,IAASnL,EAC1B,GAAA+R,EAAA/R,KAAAgS,EAAAhS,GAAA,CACA2F,EAAAoM,EAAA/R,GACA4F,EAAAoM,EAAAhS,GACA,MAIA,OAAA2F,EAAAC,GAAA,EACAA,EAAAD,EAAA,EACA,GA6HAwC,EAAAvG,UAAAqQ,SAAA,SAAA1G,EAAAlB,EAAAM,GACA,WAAAxH,KAAAqJ,QAAAjB,EAAAlB,EAAAM,IAGAxC,EAAAvG,UAAA4K,QAAA,SAAAjB,EAAAlB,EAAAM,GACA,OAAAyB,EAAAjJ,KAAAoI,EAAAlB,EAAAM,GAAA,IAGAxC,EAAAvG,UAAA6K,YAAA,SAAAlB,EAAAlB,EAAAM,GACA,OAAAyB,EAAAjJ,KAAAoI,EAAAlB,EAAAM,GAAA,IAkDAxC,EAAAvG,UAAAkJ,MAAA,SAAAJ,EAAA4C,EAAA7D,EAAAkB,GAEA,QAAAJ,IAAA+C,EACA3C,EAAA,OACAlB,EAAAtG,KAAAsG,OACA6D,EAAA,OAEG,QAAA/C,IAAAd,GAAA,iBAAA6D,EACH3C,EAAA2C,EACA7D,EAAAtG,KAAAsG,OACA6D,EAAA,MAEG,KAAA4E,SAAA5E,GAWH,UAAAvD,MACA,2EAXAuD,GAAA,EACA4E,SAAAzI,IACAA,GAAA,OACAc,IAAAI,MAAA,UAEAA,EAAAlB,EACAA,OAAAc,GASA,IAAAiD,EAAArK,KAAAsG,OAAA6D,EAGA,SAFA/C,IAAAd,KAAA+D,KAAA/D,EAAA+D,GAEA9C,EAAAjB,OAAA,IAAAA,EAAA,GAAA6D,EAAA,IAAAA,EAAAnK,KAAAsG,OACA,UAAAC,WAAA,0CAGAiB,MAAA,QAGA,IADA,IAAAmB,GAAA,IAEA,OAAAnB,GACA,UACA,OAAA0C,EAAAlK,KAAAuH,EAAA4C,EAAA7D,GAEA,WACA,YACA,OAAAoE,EAAA1K,KAAAuH,EAAA4C,EAAA7D,GAEA,YACA,OAAAsE,EAAA5K,KAAAuH,EAAA4C,EAAA7D,GAEA,aACA,aACA,OAAA2E,EAAAjL,KAAAuH,EAAA4C,EAAA7D,GAEA,aAEA,OAAA4E,EAAAlL,KAAAuH,EAAA4C,EAAA7D,GAEA,WACA,YACA,cACA,eACA,OAAA6E,EAAAnL,KAAAuH,EAAA4C,EAAA7D,GAEA,QACA,GAAAqC,EAAA,UAAA5B,UAAA,qBAAAS,GACAA,GAAA,GAAAA,GAAAsB,cACAH,GAAA,IAKA3D,EAAAvG,UAAAuQ,OAAA,WACA,OACA3G,KAAA,SACAC,KAAA2G,MAAAxQ,UAAAmJ,MAAA5K,KAAAgD,KAAAkP,MAAAlP,KAAA,KAwFA,IAAAsM,EAAA,KAoBA,SAAA2B,EAAApE,EAAAxJ,EAAAC,GACA,IAAA6O,EAAA,GACA7O,EAAAqL,KAAAC,IAAA/B,EAAAvD,OAAAhG,GAEA,QAAAzD,EAAAwD,EAAqBxD,EAAAyD,IAASzD,EAC9BsS,GAAAxF,OAAA4C,aAAA,IAAA1C,EAAAhN,IAEA,OAAAsS,EAGA,SAAAjB,EAAArE,EAAAxJ,EAAAC,GACA,IAAA6O,EAAA,GACA7O,EAAAqL,KAAAC,IAAA/B,EAAAvD,OAAAhG,GAEA,QAAAzD,EAAAwD,EAAqBxD,EAAAyD,IAASzD,EAC9BsS,GAAAxF,OAAA4C,aAAA1C,EAAAhN,IAEA,OAAAsS,EAGA,SAAAnB,EAAAnE,EAAAxJ,EAAAC,GACA,IAAA0H,EAAA6B,EAAAvD,SAEAjG,KAAA,KAAAA,EAAA,KACAC,KAAA,GAAAA,EAAA0H,KAAA1H,EAAA0H,GAGA,IADA,IAAAoH,EAAA,GACAvS,EAAAwD,EAAqBxD,EAAAyD,IAASzD,EAC9BuS,GAAAC,EAAAxF,EAAAhN,IAEA,OAAAuS,EAGA,SAAAjB,EAAAtE,EAAAxJ,EAAAC,GAGA,IAFA,IAAA8E,EAAAyE,EAAAjC,MAAAvH,EAAAC,GACAuL,EAAA,GACAhP,EAAA,EAAiBA,EAAAuI,EAAAkB,OAAkBzJ,GAAA,EACnCgP,GAAAlC,OAAA4C,aAAAnH,EAAAvI,GAAA,IAAAuI,EAAAvI,EAAA,IAEA,OAAAgP,EA0CA,SAAAyD,EAAAnF,EAAAoF,EAAAjJ,GACA,GAAA6D,EAAA,MAAAA,EAAA,YAAA5D,WAAA,sBACA,GAAA4D,EAAAoF,EAAAjJ,EAAA,UAAAC,WAAA,yCA+JA,SAAAiJ,EAAA3F,EAAA/L,EAAAqM,EAAAoF,EAAAjB,EAAA1C,GACA,IAAA5G,EAAA+C,SAAA8B,GAAA,UAAA9C,UAAA,+CACA,GAAAjJ,EAAAwQ,GAAAxQ,EAAA8N,EAAA,UAAArF,WAAA,qCACA,GAAA4D,EAAAoF,EAAA1F,EAAAvD,OAAA,UAAAC,WAAA,sBAkDA,SAAAkJ,EAAA5F,EAAA/L,EAAAqM,EAAAuF,GACA5R,EAAA,IAAAA,EAAA,MAAAA,EAAA,GACA,QAAAjB,EAAA,EAAAoN,EAAA0B,KAAAC,IAAA/B,EAAAvD,OAAA6D,EAAA,GAAuDtN,EAAAoN,IAAOpN,EAC9DgN,EAAAM,EAAAtN,IAAAiB,EAAA,QAAA4R,EAAA7S,EAAA,EAAAA,MACA,GAAA6S,EAAA7S,EAAA,EAAAA,GA8BA,SAAA8S,EAAA9F,EAAA/L,EAAAqM,EAAAuF,GACA5R,EAAA,IAAAA,EAAA,WAAAA,EAAA,GACA,QAAAjB,EAAA,EAAAoN,EAAA0B,KAAAC,IAAA/B,EAAAvD,OAAA6D,EAAA,GAAuDtN,EAAAoN,IAAOpN,EAC9DgN,EAAAM,EAAAtN,GAAAiB,IAAA,GAAA4R,EAAA7S,EAAA,EAAAA,GAAA,IAmJA,SAAA+S,EAAA/F,EAAA/L,EAAAqM,EAAAoF,EAAAjB,EAAA1C,GACA,GAAAzB,EAAAoF,EAAA1F,EAAAvD,OAAA,UAAAC,WAAA,sBACA,GAAA4D,EAAA,YAAA5D,WAAA,sBAGA,SAAAsJ,EAAAhG,EAAA/L,EAAAqM,EAAAuF,EAAAI,GAKA,OAJAA,GACAF,EAAA/F,EAAA/L,EAAAqM,EAAA,GAEAnE,EAAA2B,MAAAkC,EAAA/L,EAAAqM,EAAAuF,EAAA,MACAvF,EAAA,EAWA,SAAA4F,EAAAlG,EAAA/L,EAAAqM,EAAAuF,EAAAI,GAKA,OAJAA,GACAF,EAAA/F,EAAA/L,EAAAqM,EAAA,GAEAnE,EAAA2B,MAAAkC,EAAA/L,EAAAqM,EAAAuF,EAAA,MACAvF,EAAA,EA/cAnF,EAAAvG,UAAAmJ,MAAA,SAAAvH,EAAAC,GACA,IAoBA0P,EApBAhI,EAAAhI,KAAAsG,OAqBA,IApBAjG,OAGA,GACAA,GAAA2H,GACA,IAAA3H,EAAA,GACGA,EAAA2H,IACH3H,EAAA2H,IANA1H,OAAA8G,IAAA9G,EAAA0H,IAAA1H,GASA,GACAA,GAAA0H,GACA,IAAA1H,EAAA,GACGA,EAAA0H,IACH1H,EAAA0H,GAGA1H,EAAAD,IAAAC,EAAAD,GAGA2E,EAAAmB,qBACA6J,EAAAhQ,KAAA8M,SAAAzM,EAAAC,IACAmG,UAAAzB,EAAAvG,cACG,CACH,IAAAwR,EAAA3P,EAAAD,EACA2P,EAAA,IAAAhL,EAAAiL,OAAA7I,GACA,QAAAvK,EAAA,EAAmBA,EAAAoT,IAAcpT,EACjCmT,EAAAnT,GAAAmD,KAAAnD,EAAAwD,GAIA,OAAA2P,GAWAhL,EAAAvG,UAAAyR,WAAA,SAAA/F,EAAAhD,EAAA2I,GACA3F,GAAA,EACAhD,GAAA,EACA2I,GAAAR,EAAAnF,EAAAhD,EAAAnH,KAAAsG,QAKA,IAHA,IAAA8B,EAAApI,KAAAmK,GACAgG,EAAA,EACAtT,EAAA,IACAA,EAAAsK,IAAAgJ,GAAA,MACA/H,GAAApI,KAAAmK,EAAAtN,GAAAsT,EAGA,OAAA/H,GAGApD,EAAAvG,UAAA2R,WAAA,SAAAjG,EAAAhD,EAAA2I,GACA3F,GAAA,EACAhD,GAAA,EACA2I,GACAR,EAAAnF,EAAAhD,EAAAnH,KAAAsG,QAKA,IAFA,IAAA8B,EAAApI,KAAAmK,IAAAhD,GACAgJ,EAAA,EACAhJ,EAAA,IAAAgJ,GAAA,MACA/H,GAAApI,KAAAmK,IAAAhD,GAAAgJ,EAGA,OAAA/H,GAGApD,EAAAvG,UAAA4R,UAAA,SAAAlG,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAtG,KAAAmK,IAGAnF,EAAAvG,UAAA6R,aAAA,SAAAnG,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAtG,KAAAmK,GAAAnK,KAAAmK,EAAA,OAGAnF,EAAAvG,UAAAqL,aAAA,SAAAK,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAtG,KAAAmK,IAAA,EAAAnK,KAAAmK,EAAA,IAGAnF,EAAAvG,UAAA8R,aAAA,SAAApG,EAAA2F,GAGA,OAFAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,SAEAtG,KAAAmK,GACAnK,KAAAmK,EAAA,MACAnK,KAAAmK,EAAA,QACA,SAAAnK,KAAAmK,EAAA,IAGAnF,EAAAvG,UAAA+R,aAAA,SAAArG,EAAA2F,GAGA,OAFAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QAEA,SAAAtG,KAAAmK,IACAnK,KAAAmK,EAAA,OACAnK,KAAAmK,EAAA,MACAnK,KAAAmK,EAAA,KAGAnF,EAAAvG,UAAAgS,UAAA,SAAAtG,EAAAhD,EAAA2I,GACA3F,GAAA,EACAhD,GAAA,EACA2I,GAAAR,EAAAnF,EAAAhD,EAAAnH,KAAAsG,QAKA,IAHA,IAAA8B,EAAApI,KAAAmK,GACAgG,EAAA,EACAtT,EAAA,IACAA,EAAAsK,IAAAgJ,GAAA,MACA/H,GAAApI,KAAAmK,EAAAtN,GAAAsT,EAMA,OAFA/H,IAFA+H,GAAA,OAEA/H,GAAAuD,KAAA+E,IAAA,IAAAvJ,IAEAiB,GAGApD,EAAAvG,UAAAkS,UAAA,SAAAxG,EAAAhD,EAAA2I,GACA3F,GAAA,EACAhD,GAAA,EACA2I,GAAAR,EAAAnF,EAAAhD,EAAAnH,KAAAsG,QAKA,IAHA,IAAAzJ,EAAAsK,EACAgJ,EAAA,EACA/H,EAAApI,KAAAmK,IAAAtN,GACAA,EAAA,IAAAsT,GAAA,MACA/H,GAAApI,KAAAmK,IAAAtN,GAAAsT,EAMA,OAFA/H,IAFA+H,GAAA,OAEA/H,GAAAuD,KAAA+E,IAAA,IAAAvJ,IAEAiB,GAGApD,EAAAvG,UAAAmS,SAAA,SAAAzG,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACA,IAAAtG,KAAAmK,IACA,OAAAnK,KAAAmK,GAAA,GADAnK,KAAAmK,IAIAnF,EAAAvG,UAAAoS,YAAA,SAAA1G,EAAA2F,GACAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACA,IAAA8B,EAAApI,KAAAmK,GAAAnK,KAAAmK,EAAA,MACA,aAAA/B,EAAA,WAAAA,KAGApD,EAAAvG,UAAAqS,YAAA,SAAA3G,EAAA2F,GACAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACA,IAAA8B,EAAApI,KAAAmK,EAAA,GAAAnK,KAAAmK,IAAA,EACA,aAAA/B,EAAA,WAAAA,KAGApD,EAAAvG,UAAAsS,YAAA,SAAA5G,EAAA2F,GAGA,OAFAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QAEAtG,KAAAmK,GACAnK,KAAAmK,EAAA,MACAnK,KAAAmK,EAAA,OACAnK,KAAAmK,EAAA,QAGAnF,EAAAvG,UAAAuS,YAAA,SAAA7G,EAAA2F,GAGA,OAFAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QAEAtG,KAAAmK,IAAA,GACAnK,KAAAmK,EAAA,OACAnK,KAAAmK,EAAA,MACAnK,KAAAmK,EAAA,IAGAnF,EAAAvG,UAAAwS,YAAA,SAAA9G,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAN,EAAA4D,KAAA5J,KAAAmK,GAAA,SAGAnF,EAAAvG,UAAAyS,YAAA,SAAA/G,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAN,EAAA4D,KAAA5J,KAAAmK,GAAA,SAGAnF,EAAAvG,UAAA0S,aAAA,SAAAhH,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAN,EAAA4D,KAAA5J,KAAAmK,GAAA,SAGAnF,EAAAvG,UAAA2S,aAAA,SAAAjH,EAAA2F,GAEA,OADAA,GAAAR,EAAAnF,EAAA,EAAAnK,KAAAsG,QACAN,EAAA4D,KAAA5J,KAAAmK,GAAA,SASAnF,EAAAvG,UAAA4S,YAAA,SAAAvT,EAAAqM,EAAAhD,EAAA2I,IACAhS,KACAqM,GAAA,EACAhD,GAAA,EACA2I,IAEAN,EAAAxP,KAAAlC,EAAAqM,EAAAhD,EADAwE,KAAA+E,IAAA,IAAAvJ,GAAA,EACA,GAGA,IAAAgJ,EAAA,EACAtT,EAAA,EAEA,IADAmD,KAAAmK,GAAA,IAAArM,IACAjB,EAAAsK,IAAAgJ,GAAA,MACAnQ,KAAAmK,EAAAtN,GAAAiB,EAAAqS,EAAA,IAGA,OAAAhG,EAAAhD,GAGAnC,EAAAvG,UAAA6S,YAAA,SAAAxT,EAAAqM,EAAAhD,EAAA2I,IACAhS,KACAqM,GAAA,EACAhD,GAAA,EACA2I,IAEAN,EAAAxP,KAAAlC,EAAAqM,EAAAhD,EADAwE,KAAA+E,IAAA,IAAAvJ,GAAA,EACA,GAGA,IAAAtK,EAAAsK,EAAA,EACAgJ,EAAA,EAEA,IADAnQ,KAAAmK,EAAAtN,GAAA,IAAAiB,IACAjB,GAAA,IAAAsT,GAAA,MACAnQ,KAAAmK,EAAAtN,GAAAiB,EAAAqS,EAAA,IAGA,OAAAhG,EAAAhD,GAGAnC,EAAAvG,UAAA8S,WAAA,SAAAzT,EAAAqM,EAAA2F,GAMA,OALAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,SACAnF,EAAAmB,sBAAArI,EAAA6N,KAAA6F,MAAA1T,IACAkC,KAAAmK,GAAA,IAAArM,EACAqM,EAAA,GAWAnF,EAAAvG,UAAAgT,cAAA,SAAA3T,EAAAqM,EAAA2F,GAUA,OATAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,WACAnF,EAAAmB,qBACAnG,KAAAmK,GAAA,IAAArM,EACAkC,KAAAmK,EAAA,GAAArM,IAAA,GAEA2R,EAAAzP,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAGAnF,EAAAvG,UAAAiT,cAAA,SAAA5T,EAAAqM,EAAA2F,GAUA,OATAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,WACAnF,EAAAmB,qBACAnG,KAAAmK,GAAArM,IAAA,EACAkC,KAAAmK,EAAA,OAAArM,GAEA2R,EAAAzP,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAUAnF,EAAAvG,UAAAkT,cAAA,SAAA7T,EAAAqM,EAAA2F,GAYA,OAXAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,gBACAnF,EAAAmB,qBACAnG,KAAAmK,EAAA,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,EACAkC,KAAAmK,GAAA,IAAArM,GAEA6R,EAAA3P,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAGAnF,EAAAvG,UAAAmT,cAAA,SAAA9T,EAAAqM,EAAA2F,GAYA,OAXAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,gBACAnF,EAAAmB,qBACAnG,KAAAmK,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,EACAkC,KAAAmK,EAAA,OAAArM,GAEA6R,EAAA3P,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAGAnF,EAAAvG,UAAAoT,WAAA,SAAA/T,EAAAqM,EAAAhD,EAAA2I,GAGA,GAFAhS,KACAqM,GAAA,GACA2F,EAAA,CACA,IAAAgC,EAAAnG,KAAA+E,IAAA,IAAAvJ,EAAA,GAEAqI,EAAAxP,KAAAlC,EAAAqM,EAAAhD,EAAA2K,EAAA,GAAAA,GAGA,IAAAjV,EAAA,EACAsT,EAAA,EACA4B,EAAA,EAEA,IADA/R,KAAAmK,GAAA,IAAArM,IACAjB,EAAAsK,IAAAgJ,GAAA,MACArS,EAAA,OAAAiU,GAAA,IAAA/R,KAAAmK,EAAAtN,EAAA,KACAkV,EAAA,GAEA/R,KAAAmK,EAAAtN,IAAAiB,EAAAqS,GAAA,GAAA4B,EAAA,IAGA,OAAA5H,EAAAhD,GAGAnC,EAAAvG,UAAAuT,WAAA,SAAAlU,EAAAqM,EAAAhD,EAAA2I,GAGA,GAFAhS,KACAqM,GAAA,GACA2F,EAAA,CACA,IAAAgC,EAAAnG,KAAA+E,IAAA,IAAAvJ,EAAA,GAEAqI,EAAAxP,KAAAlC,EAAAqM,EAAAhD,EAAA2K,EAAA,GAAAA,GAGA,IAAAjV,EAAAsK,EAAA,EACAgJ,EAAA,EACA4B,EAAA,EAEA,IADA/R,KAAAmK,EAAAtN,GAAA,IAAAiB,IACAjB,GAAA,IAAAsT,GAAA,MACArS,EAAA,OAAAiU,GAAA,IAAA/R,KAAAmK,EAAAtN,EAAA,KACAkV,EAAA,GAEA/R,KAAAmK,EAAAtN,IAAAiB,EAAAqS,GAAA,GAAA4B,EAAA,IAGA,OAAA5H,EAAAhD,GAGAnC,EAAAvG,UAAAwT,UAAA,SAAAnU,EAAAqM,EAAA2F,GAOA,OANAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,YACAnF,EAAAmB,sBAAArI,EAAA6N,KAAA6F,MAAA1T,IACAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,GACAkC,KAAAmK,GAAA,IAAArM,EACAqM,EAAA,GAGAnF,EAAAvG,UAAAyT,aAAA,SAAApU,EAAAqM,EAAA2F,GAUA,OATAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,gBACAnF,EAAAmB,qBACAnG,KAAAmK,GAAA,IAAArM,EACAkC,KAAAmK,EAAA,GAAArM,IAAA,GAEA2R,EAAAzP,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAGAnF,EAAAvG,UAAA0T,aAAA,SAAArU,EAAAqM,EAAA2F,GAUA,OATAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,gBACAnF,EAAAmB,qBACAnG,KAAAmK,GAAArM,IAAA,EACAkC,KAAAmK,EAAA,OAAArM,GAEA2R,EAAAzP,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAGAnF,EAAAvG,UAAA2T,aAAA,SAAAtU,EAAAqM,EAAA2F,GAYA,OAXAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,0BACAnF,EAAAmB,qBACAnG,KAAAmK,GAAA,IAAArM,EACAkC,KAAAmK,EAAA,GAAArM,IAAA,EACAkC,KAAAmK,EAAA,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,IAEA6R,EAAA3P,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAGAnF,EAAAvG,UAAA4T,aAAA,SAAAvU,EAAAqM,EAAA2F,GAaA,OAZAhS,KACAqM,GAAA,EACA2F,GAAAN,EAAAxP,KAAAlC,EAAAqM,EAAA,0BACArM,EAAA,IAAAA,EAAA,WAAAA,EAAA,GACAkH,EAAAmB,qBACAnG,KAAAmK,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,GACAkC,KAAAmK,EAAA,GAAArM,IAAA,EACAkC,KAAAmK,EAAA,OAAArM,GAEA6R,EAAA3P,KAAAlC,EAAAqM,GAAA,GAEAA,EAAA,GAgBAnF,EAAAvG,UAAA6T,aAAA,SAAAxU,EAAAqM,EAAA2F,GACA,OAAAD,EAAA7P,KAAAlC,EAAAqM,GAAA,EAAA2F,IAGA9K,EAAAvG,UAAA8T,aAAA,SAAAzU,EAAAqM,EAAA2F,GACA,OAAAD,EAAA7P,KAAAlC,EAAAqM,GAAA,EAAA2F,IAWA9K,EAAAvG,UAAA+T,cAAA,SAAA1U,EAAAqM,EAAA2F,GACA,OAAAC,EAAA/P,KAAAlC,EAAAqM,GAAA,EAAA2F,IAGA9K,EAAAvG,UAAAgU,cAAA,SAAA3U,EAAAqM,EAAA2F,GACA,OAAAC,EAAA/P,KAAAlC,EAAAqM,GAAA,EAAA2F,IAIA9K,EAAAvG,UAAAyJ,KAAA,SAAAuG,EAAAiE,EAAArS,EAAAC,GAQA,GAPAD,MAAA,GACAC,GAAA,IAAAA,MAAAN,KAAAsG,QACAoM,GAAAjE,EAAAnI,SAAAoM,EAAAjE,EAAAnI,QACAoM,MAAA,GACApS,EAAA,GAAAA,EAAAD,IAAAC,EAAAD,GAGAC,IAAAD,EAAA,SACA,OAAAoO,EAAAnI,QAAA,IAAAtG,KAAAsG,OAAA,SAGA,GAAAoM,EAAA,EACA,UAAAnM,WAAA,6BAEA,GAAAlG,EAAA,GAAAA,GAAAL,KAAAsG,OAAA,UAAAC,WAAA,6BACA,GAAAjG,EAAA,YAAAiG,WAAA,2BAGAjG,EAAAN,KAAAsG,SAAAhG,EAAAN,KAAAsG,QACAmI,EAAAnI,OAAAoM,EAAApS,EAAAD,IACAC,EAAAmO,EAAAnI,OAAAoM,EAAArS,GAGA,IACAxD,EADAmL,EAAA1H,EAAAD,EAGA,GAAAL,OAAAyO,GAAApO,EAAAqS,KAAApS,EAEA,IAAAzD,EAAAmL,EAAA,EAAqBnL,GAAA,IAAQA,EAC7B4R,EAAA5R,EAAA6V,GAAA1S,KAAAnD,EAAAwD,QAEG,GAAA2H,EAAA,MAAAhD,EAAAmB,oBAEH,IAAAtJ,EAAA,EAAeA,EAAAmL,IAASnL,EACxB4R,EAAA5R,EAAA6V,GAAA1S,KAAAnD,EAAAwD,QAGAmG,WAAA/H,UAAAkU,IAAA3V,KACAyR,EACAzO,KAAA8M,SAAAzM,IAAA2H,GACA0K,GAIA,OAAA1K,GAOAhD,EAAAvG,UAAA2O,KAAA,SAAAhF,EAAA/H,EAAAC,EAAAkH,GAEA,oBAAAY,EAAA,CASA,GARA,iBAAA/H,GACAmH,EAAAnH,EACAA,EAAA,EACAC,EAAAN,KAAAsG,QACK,iBAAAhG,IACLkH,EAAAlH,EACAA,EAAAN,KAAAsG,QAEA,IAAA8B,EAAA9B,OAAA,CACA,IAAAsM,EAAAxK,EAAA2C,WAAA,GACA6H,EAAA,MACAxK,EAAAwK,GAGA,QAAAxL,IAAAI,GAAA,iBAAAA,EACA,UAAAT,UAAA,6BAEA,oBAAAS,IAAAxC,EAAAyC,WAAAD,GACA,UAAAT,UAAA,qBAAAS,OAEG,iBAAAY,IACHA,GAAA,KAIA,GAAA/H,EAAA,GAAAL,KAAAsG,OAAAjG,GAAAL,KAAAsG,OAAAhG,EACA,UAAAiG,WAAA,sBAGA,GAAAjG,GAAAD,EACA,OAAAL,KAQA,IAAAnD,EACA,GANAwD,KAAA,EACAC,OAAA8G,IAAA9G,EAAAN,KAAAsG,OAAAhG,IAAA,EAEA8H,MAAA,GAGA,iBAAAA,EACA,IAAAvL,EAAAwD,EAAmBxD,EAAAyD,IAASzD,EAC5BmD,KAAAnD,GAAAuL,MAEG,CACH,IAAAhD,EAAAJ,EAAA+C,SAAAK,GACAA,EACAQ,EAAA,IAAA5D,EAAAoD,EAAAZ,GAAAlC,YACA0C,EAAA5C,EAAAkB,OACA,IAAAzJ,EAAA,EAAeA,EAAAyD,EAAAD,IAAiBxD,EAChCmD,KAAAnD,EAAAwD,GAAA+E,EAAAvI,EAAAmL,GAIA,OAAAhI,MAMA,IAAA6S,EAAA,qBAmBA,SAAAxD,EAAA/Q,GACA,OAAAA,EAAA,OAAAA,EAAAgH,SAAA,IACAhH,EAAAgH,SAAA,IAGA,SAAAsD,EAAArB,EAAA6D,GAEA,IAAAe,EADAf,KAAA0H,IAMA,IAJA,IAAAxM,EAAAiB,EAAAjB,OACAyM,EAAA,KACA3N,EAAA,GAEAvI,EAAA,EAAiBA,EAAAyJ,IAAYzJ,EAAA,CAI7B,IAHAsP,EAAA5E,EAAAwD,WAAAlO,IAGA,OAAAsP,EAAA,OAEA,IAAA4G,EAAA,CAEA,GAAA5G,EAAA,QAEAf,GAAA,OAAAhG,EAAApC,KAAA,aACA,SACS,GAAAnG,EAAA,IAAAyJ,EAAA,EAET8E,GAAA,OAAAhG,EAAApC,KAAA,aACA,SAIA+P,EAAA5G,EAEA,SAIA,GAAAA,EAAA,QACAf,GAAA,OAAAhG,EAAApC,KAAA,aACA+P,EAAA5G,EACA,SAIAA,EAAA,OAAA4G,EAAA,UAAA5G,EAAA,YACK4G,IAEL3H,GAAA,OAAAhG,EAAApC,KAAA,aAMA,GAHA+P,EAAA,KAGA5G,EAAA,KACA,IAAAf,GAAA,WACAhG,EAAApC,KAAAmJ,QACK,GAAAA,EAAA,MACL,IAAAf,GAAA,WACAhG,EAAApC,KACAmJ,GAAA,MACA,GAAAA,EAAA,UAEK,GAAAA,EAAA,OACL,IAAAf,GAAA,WACAhG,EAAApC,KACAmJ,GAAA,OACAA,GAAA,SACA,GAAAA,EAAA,SAEK,MAAAA,EAAA,SASL,UAAAvF,MAAA,sBARA,IAAAwE,GAAA,WACAhG,EAAApC,KACAmJ,GAAA,OACAA,GAAA,UACAA,GAAA,SACA,GAAAA,EAAA,MAOA,OAAA/G,EA4BA,SAAAyD,EAAAgC,GACA,OAAAlF,EAAAqN,YAhIA,SAAAnI,GAIA,IAFAA,EAUA,SAAAA,GACA,OAAAA,EAAAoI,KAAApI,EAAAoI,OACApI,EAAAtF,QAAA,iBAZA2N,CAAArI,GAAAtF,QAAAsN,EAAA,KAEAvM,OAAA,WAEA,KAAAuE,EAAAvE,OAAA,MACAuE,GAAA,IAEA,OAAAA,EAuHAsI,CAAAtI,IAGA,SAAAF,EAAAyI,EAAAC,EAAAlJ,EAAA7D,GACA,QAAAzJ,EAAA,EAAiBA,EAAAyJ,KACjBzJ,EAAAsN,GAAAkJ,EAAA/M,QAAAzJ,GAAAuW,EAAA9M,UAD6BzJ,EAE7BwW,EAAAxW,EAAAsN,GAAAiJ,EAAAvW,GAEA,OAAAA,mDCrvDAV,EAAAgL,WAuCA,SAAAmM,GACA,IAAAC,EAAAC,EAAAF,GACAG,EAAAF,EAAA,GACAG,EAAAH,EAAA,GACA,UAAAE,EAAAC,GAAA,EAAAA,GA1CAvX,EAAA6W,YAiDA,SAAAM,GAeA,IAdA,IAAAK,EACAJ,EAAAC,EAAAF,GACAG,EAAAF,EAAA,GACAG,EAAAH,EAAA,GAEAhK,EAAA,IAAAqK,EAVA,SAAAN,EAAAG,EAAAC,GACA,UAAAD,EAAAC,GAAA,EAAAA,EASAG,CAAAP,EAAAG,EAAAC,IAEAI,EAAA,EAGA9L,EAAA0L,EAAA,EACAD,EAAA,EACAA,EAEA5W,EAAA,EAAiBA,EAAAmL,EAASnL,GAAA,EAC1B8W,EACAI,EAAAT,EAAAvI,WAAAlO,KAAA,GACAkX,EAAAT,EAAAvI,WAAAlO,EAAA,QACAkX,EAAAT,EAAAvI,WAAAlO,EAAA,OACAkX,EAAAT,EAAAvI,WAAAlO,EAAA,IACA0M,EAAAuK,KAAAH,GAAA,OACApK,EAAAuK,KAAAH,GAAA,MACApK,EAAAuK,KAAA,IAAAH,EAGA,IAAAD,IACAC,EACAI,EAAAT,EAAAvI,WAAAlO,KAAA,EACAkX,EAAAT,EAAAvI,WAAAlO,EAAA,OACA0M,EAAAuK,KAAA,IAAAH,GAGA,IAAAD,IACAC,EACAI,EAAAT,EAAAvI,WAAAlO,KAAA,GACAkX,EAAAT,EAAAvI,WAAAlO,EAAA,OACAkX,EAAAT,EAAAvI,WAAAlO,EAAA,OACA0M,EAAAuK,KAAAH,GAAA,MACApK,EAAAuK,KAAA,IAAAH,GAGA,OAAApK,GA1FApN,EAAAsP,cAiHA,SAAAuI,GAQA,IAPA,IAAAL,EACA3L,EAAAgM,EAAA1N,OACA2N,EAAAjM,EAAA,EACAkM,EAAA,GAIArX,EAAA,EAAAsX,EAAAnM,EAAAiM,EAA0CpX,EAAAsX,EAAUtX,GAHpD,MAIAqX,EAAAlR,KAAAoR,EACAJ,EAAAnX,IALA,MAKAsX,IAAAtX,EALA,QAUA,IAAAoX,GACAN,EAAAK,EAAAhM,EAAA,GACAkM,EAAAlR,KACAqR,EAAAV,GAAA,GACAU,EAAAV,GAAA,MACA,OAEG,IAAAM,IACHN,GAAAK,EAAAhM,EAAA,OAAAgM,EAAAhM,EAAA,GACAkM,EAAAlR,KACAqR,EAAAV,GAAA,IACAU,EAAAV,GAAA,MACAU,EAAAV,GAAA,MACA,MAIA,OAAAO,EAAA1F,KAAA,KA1IA,IALA,IAAA6F,EAAA,GACAN,EAAA,GACAH,EAAA,oBAAApN,sBAAAyI,MAEA2D,EAAA,mEACA/V,EAAA,EAAAmL,EAAA4K,EAAAtM,OAAkCzJ,EAAAmL,IAASnL,EAC3CwX,EAAAxX,GAAA+V,EAAA/V,GACAkX,EAAAnB,EAAA7H,WAAAlO,MAQA,SAAA2W,EAAAF,GACA,IAAAtL,EAAAsL,EAAAhN,OAEA,GAAA0B,EAAA,IACA,UAAApB,MAAA,kDAKA,IAAA6M,EAAAH,EAAAjK,QAAA,KAOA,OANA,IAAAoK,MAAAzL,GAMA,CAAAyL,EAJAA,IAAAzL,EACA,EACA,EAAAyL,EAAA,GAqEA,SAAAW,EAAAJ,EAAA3T,EAAAC,GAGA,IAFA,IAAAqT,EARAW,EASAC,EAAA,GACA1X,EAAAwD,EAAqBxD,EAAAyD,EAASzD,GAAA,EAC9B8W,GACAK,EAAAnX,IAAA,cACAmX,EAAAnX,EAAA,cACA,IAAAmX,EAAAnX,EAAA,IACA0X,EAAAvR,KAdAqR,GADAC,EAeAX,IAdA,OACAU,EAAAC,GAAA,OACAD,EAAAC,GAAA,MACAD,EAAA,GAAAC,IAaA,OAAAC,EAAA/F,KAAA,IAhGAuF,EAAA,IAAAhJ,WAAA,OACAgJ,EAAA,IAAAhJ,WAAA,sBCnBA5O,EAAAyN,KAAA,SAAAzB,EAAAgC,EAAAqK,EAAAC,EAAAC,GACA,IAAA3P,EAAA9H,EACA0X,EAAA,EAAAD,EAAAD,EAAA,EACAG,GAAA,GAAAD,GAAA,EACAE,EAAAD,GAAA,EACAE,GAAA,EACAjY,EAAA2X,EAAAE,EAAA,IACAvX,EAAAqX,GAAA,IACA5V,EAAAuJ,EAAAgC,EAAAtN,GAOA,IALAA,GAAAM,EAEA4H,EAAAnG,GAAA,IAAAkW,GAAA,EACAlW,KAAAkW,EACAA,GAAAH,EACQG,EAAA,EAAW/P,EAAA,IAAAA,EAAAoD,EAAAgC,EAAAtN,MAAAM,EAAA2X,GAAA,GAKnB,IAHA7X,EAAA8H,GAAA,IAAA+P,GAAA,EACA/P,KAAA+P,EACAA,GAAAL,EACQK,EAAA,EAAW7X,EAAA,IAAAA,EAAAkL,EAAAgC,EAAAtN,MAAAM,EAAA2X,GAAA,GAEnB,OAAA/P,EACAA,EAAA,EAAA8P,MACG,IAAA9P,IAAA6P,EACH,OAAA3X,EAAA8X,IAAAjC,KAAAlU,GAAA,KAEA3B,GAAA0O,KAAA+E,IAAA,EAAA+D,GACA1P,GAAA8P,EAEA,OAAAjW,GAAA,KAAA3B,EAAA0O,KAAA+E,IAAA,EAAA3L,EAAA0P,IAGAtY,EAAAwL,MAAA,SAAAQ,EAAArK,EAAAqM,EAAAqK,EAAAC,EAAAC,GACA,IAAA3P,EAAA9H,EAAAC,EACAyX,EAAA,EAAAD,EAAAD,EAAA,EACAG,GAAA,GAAAD,GAAA,EACAE,EAAAD,GAAA,EACAI,EAAA,KAAAP,EAAA9I,KAAA+E,IAAA,OAAA/E,KAAA+E,IAAA,SACA7T,EAAA2X,EAAA,EAAAE,EAAA,EACAvX,EAAAqX,EAAA,KACA5V,EAAAd,EAAA,OAAAA,GAAA,EAAAA,EAAA,MAmCA,IAjCAA,EAAA6N,KAAAsJ,IAAAnX,GAEAqL,MAAArL,QAAAgV,KACA7V,EAAAkM,MAAArL,GAAA,IACAiH,EAAA6P,IAEA7P,EAAA4G,KAAA6F,MAAA7F,KAAAuJ,IAAApX,GAAA6N,KAAAwJ,KACArX,GAAAZ,EAAAyO,KAAA+E,IAAA,GAAA3L,IAAA,IACAA,IACA7H,GAAA,IAGAY,GADAiH,EAAA8P,GAAA,EACAG,EAAA9X,EAEA8X,EAAArJ,KAAA+E,IAAA,IAAAmE,IAEA3X,GAAA,IACA6H,IACA7H,GAAA,GAGA6H,EAAA8P,GAAAD,GACA3X,EAAA,EACA8H,EAAA6P,GACK7P,EAAA8P,GAAA,GACL5X,GAAAa,EAAAZ,EAAA,GAAAyO,KAAA+E,IAAA,EAAA+D,GACA1P,GAAA8P,IAEA5X,EAAAa,EAAA6N,KAAA+E,IAAA,EAAAmE,EAAA,GAAAlJ,KAAA+E,IAAA,EAAA+D,GACA1P,EAAA,IAIQ0P,GAAA,EAAWtM,EAAAgC,EAAAtN,GAAA,IAAAI,EAAAJ,GAAAM,EAAAF,GAAA,IAAAwX,GAAA,GAInB,IAFA1P,KAAA0P,EAAAxX,EACA0X,GAAAF,EACQE,EAAA,EAAUxM,EAAAgC,EAAAtN,GAAA,IAAAkI,EAAAlI,GAAAM,EAAA4H,GAAA,IAAA4P,GAAA,GAElBxM,EAAAgC,EAAAtN,EAAAM,IAAA,IAAAyB,kBClFA,IAAA0G,EAAA,GAAiBA,SAEjBlJ,EAAAD,QAAA8S,MAAAhJ,SAAA,SAAAsD,GACA,wBAAAjE,EAAAtI,KAAAuM,qBCUA,IALA,IAAA6L,EAAWzY,EAAQ,IAGnB0Y,EAAA,GACAC,EAAA,GACAzY,EAAA,EAAeA,EAAA,IAASA,IACxBwY,EAAAxY,MAAA,KAAAyI,SAAA,IAAAmF,OAAA,GACA6K,EAAAD,EAAAxY,MAuBA,SAAA+I,EAAAiE,EAAAM,GACA,IAAAtN,EAAAsN,GAAA,EAAAoL,EAAAF,EACA,OAAAE,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MAAA,IACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MAAA,IACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MAAA,IACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MAAA,IACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MACA0Y,EAAA1L,EAAAhN,MAAA0Y,EAAA1L,EAAAhN,MASA,IAAA2Y,EAAAJ,IAGAK,EAAA,CACA,EAAAD,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAIAE,EAAA,OAAAF,EAAA,MAAAA,EAAA,IAGAG,EAAA,EAAAC,EAAA,EAiFA,SAAA/P,EAAAgQ,EAAAhM,EAAAM,GAEA,IAAAtN,EAAAgN,GAAAM,GAAA,EAEA,qBACAN,EAAA,UAAAgM,EAAA,IAAA5G,MAAA,SACA4G,EAAA,MAIA,IAAAC,GAFAD,KAAA,IAEAE,SAAAF,EAAAG,KAAAZ,KAOA,GAJAU,EAAA,MAAAA,EAAA,MACAA,EAAA,MAAAA,EAAA,OAGAjM,EACA,QAAAoM,EAAA,EAAoBA,EAAA,GAASA,IAC7BpM,EAAAhN,EAAAoZ,GAAAH,EAAAG,GAIA,OAAApM,GAAAjE,EAAAkQ,GAIA,IAAA7Q,EAAAY,EACAZ,EAAAiR,GA1GA,SAAAL,EAAAhM,EAAAM,GACA,IAAAtN,EAAAgN,GAAAM,GAAA,EACAnB,EAAAa,GAAA,GAIAsM,OAAA/O,KAFAyO,KAAA,IAEAM,SAAAN,EAAAM,SAAAT,EAMAU,OAAAhP,IAAAyO,EAAAO,MAAAP,EAAAO,OAAA,IAAAC,MAAAC,UAIAC,OAAAnP,IAAAyO,EAAAU,MAAAV,EAAAU,MAAAX,EAAA,EAGAY,EAAAJ,EAAAT,GAAAY,EAAAX,GAAA,IAcA,GAXAY,EAAA,QAAApP,IAAAyO,EAAAM,WACAA,IAAA,UAKAK,EAAA,GAAAJ,EAAAT,SAAAvO,IAAAyO,EAAAU,QACAA,EAAA,GAIAA,GAAA,IACA,UAAA3P,MAAA,mDAGA+O,EAAAS,EACAR,EAAAW,EACAb,EAAAS,EAMA,IAAAM,GAAA,gBAHAL,GAAA,cAGAG,GAAA,WACAvN,EAAAnM,KAAA4Z,IAAA,OACAzN,EAAAnM,KAAA4Z,IAAA,OACAzN,EAAAnM,KAAA4Z,IAAA,MACAzN,EAAAnM,KAAA,IAAA4Z,EAGA,IAAAC,EAAAN,EAAA,yBACApN,EAAAnM,KAAA6Z,IAAA,MACA1N,EAAAnM,KAAA,IAAA6Z,EAGA1N,EAAAnM,KAAA6Z,IAAA,SACA1N,EAAAnM,KAAA6Z,IAAA,OAGA1N,EAAAnM,KAAAsZ,IAAA,MAGAnN,EAAAnM,KAAA,IAAAsZ,EAIA,IADA,IAAArX,EAAA+W,EAAA/W,MAAA2W,EACAnX,EAAA,EAAiBA,EAAA,EAAOA,IACxB0K,EAAAnM,EAAAyB,GAAAQ,EAAAR,GAGA,OAAAuL,GAAAjE,EAAAoD,IAmCA/D,EAAAY,KACAZ,EAAAI,MAhKA,SAAAzG,EAAAiL,EAAAM,GACA,IAAAtN,EAAAgN,GAAAM,GAAA,EAAA8L,EAAA,EAUA,IARApM,KAAA,GACAjL,EAAAkK,cAAAvD,QAAA,eAAsC,SAAAoR,GACtCV,EAAA,KACApM,EAAAhN,EAAAoZ,KAAAX,EAAAqB,MAKAV,EAAA,IACApM,EAAAhN,EAAAoZ,KAAA,EAGA,OAAApM,GAkJA5E,EAAAW,UAEAxJ,EAAAD,QAAA8I,gCCrLA,IAAA+Q,EAEAY,EAAA7Q,EAAA6Q,QAAA7Q,EAAA8Q,SACA,GAAAD,KAAAE,gBAAA,CAGA,IAAAC,EAAA,IAAAvQ,WAAA,IACAwP,EAAA,WAEA,OADAY,EAAAE,gBAAAC,GACAA,GAIA,IAAAf,EAAA,CAKA,IAAAgB,EAAA,IAAA/H,MAAA,IACA+G,EAAA,WACA,QAAArY,EAAAd,EAAA,EAAsBA,EAAA,GAAQA,IAC9B,MAAAA,KAAAc,EAAA,WAAAgO,KAAAoK,UACAiB,EAAAna,GAAAc,MAAA,EAAAd,IAAA,OAGA,OAAAma,GAIA5a,EAAAD,QAAA6Z,uJCxBO,SAASiB,EAAYC,EAAMC,GAC9B,IASIC,EACAC,EAVAC,GAAoB,EAEpBC,EAAMC,IAAO1R,OACb2R,EAAc,KACdC,EAAc,QAEdC,EAAa,KACbC,EAAc,KAqDlB,MAhDoB,mBAATT,EACPC,EAAeD,GAGfC,GADAD,EAAOA,GAAQ,IACKU,OACpBR,EAAgBF,EAAKW,SAGrB,gBAAiBX,IACjBM,EAAcN,EAAI,aAElB,QAASA,IAETQ,EAAaR,EAAKxJ,KAGlB,gBAAiBwJ,IACjBO,EAAcP,EAAKO,aAGnB,gBAAiBP,IACjBS,EAAcT,EAAKS,aAIvBG,IAAGC,UAAU,oBAAsBT,GAAKjP,KAAK,CAAC,IACzC2P,QACAC,OAAO,OACPC,QAAQ,mBAAmB,GAC3BA,QAAQ,mBAAqBZ,GAAK,GAGvCQ,IAAGK,OAAO,QAAQC,GAAG,yBAA2Bd,EAAK,WAC7CD,EACAA,GAAoB,GAGzBgB,QAAQpD,IAAI,oBAEX6C,IAAGK,OAAO,oBAAsBb,GAAKgB,MAAM,UAAW,QACvDb,EAAc,QAETL,GACAA,OAKD,SAAS/O,EAAMkQ,GAC2B,IADpBC,EACoB1K,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,IAAAA,UAAA,GAAjC2K,EAAiC3K,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAjB,aACxB4K,EAAM3Y,KAEN4Y,EAAW,KACXC,EAAc7Y,KAGd4Y,EADe,MAAfnB,EACWM,IAAGe,MAAM9Y,MAET+X,IAAGe,MAAMrB,GAGZiB,EACZ,IAAIK,EAAmB,KAEvBzB,EAAoBmB,EAEpBV,IAAGC,UAAU,oBAAsBT,GAAKyB,KAAK,IAC7C,IAAItL,EAAOqK,IAAGC,UAAU,oBAAsBT,GACzCc,GAAG,cAAe,SAASlb,GACxBmb,QAAQpD,IAAI,sBACZ6C,IAAGK,OAAO,oBAAsBb,GAAKgB,MAAM,UAAW,QACtDb,EAAc,QAEdK,IAAGkB,MAAMC,iBACTnB,IAAGkB,MAAME,oBAEZjB,OAAO,MAoIZ,GAlIAxK,EAAKsK,UAAU,MAAM1P,KAAqB,mBAAT4O,EAAsBA,EAAK5O,GAAQ4O,GAAMe,QACrEC,OAAO,MACPkB,KAAK,QAAS,SAASjc,GACpBmb,QAAQpD,IAAI,KAAM/X,GAClB,IAAIgS,EAAM,GAaV,OAZIhS,EAAEkc,UACFlK,GAAO,eAEPhS,EAAEmc,WACFnK,GAAO,gBAENhS,EAAEoc,SACHpK,GAAO,cAEP,aAAchS,IACdgS,GAAO,8BAEJA,IAEV6J,KAAK,SAAS7b,GACX,OAAIA,EAAEkc,QACK,QAENlc,EAAEqc,OACHlB,QAAQmB,MAAM,+DAES,iBAAZtc,EAAEqc,MAAsBrc,EAAEqc,MAAQrc,EAAEqc,MAAMlR,MAE5D+P,GAAG,QAAS,SAASlb,EAAGN,GACjBM,EAAEmc,UACDnc,EAAEoc,SACPpc,EAAEoc,OAAOZ,EAAKrQ,EAAMkQ,EAAOI,GAC3BN,QAAQpD,IAAI,eAGZ6C,IAAGC,UAAU,oBAAoBO,MAAM,UAAW,QAClDb,EAAc,QAEVL,GACAA,OAGPgB,GAAG,aAAc,SAASlb,EAAGN,GAI1B,GAHAkb,IAAGK,OAAOpY,MACLmY,QAAQ,4BAA4B,GAEjB,MAApBY,EAA0B,CAQ1B,GAJAhB,IAAGK,OAAO,oBAAsBb,GAC3BS,UAAU,MACVG,QAAQ,4BAA4B,QAEhB,IAAdhb,EAAEuc,SAOT,OANApB,QAAQpD,IAAI,qBAEZ6C,IAAGK,OAAO,oBAAsBW,GAC/BR,MAAM,UAAW,aAElBQ,EAAmB,MAIvB,GAAI5b,EAAEwc,UAAYZ,EAEd,OAIAT,QAAQpD,IAAI,mCAGZ6C,IAAGK,OAAO,oBAAsBW,GAC/BR,MAAM,UAAW,QAElBQ,EAAmB,KAM3B,QAAyB,IAAd5b,EAAEuc,SAAyB,CAClC,IAAIE,EAAe5Z,KAAK6Z,wBAEpBC,EAAsB,KAEtBA,EAAsB7C,EAAY9Z,EAAEuc,SADrB,QAAfhC,EAC8C,CAACD,YAAeoB,EACxDlL,IAAO,CAAEiM,EAAaG,KAAOvd,OAAOwd,YAC9BJ,EAAaK,IAAM,EAAIzd,OAAO0d,aAC1CxC,YAAe,QAGD,CACI/J,IAAO,CAAEiM,EAAaG,KAAOH,EAAaO,MAAQ3d,OAAOwd,YACnDJ,EAAaK,IAAM,EAAIzd,OAAO0d,aACvCzC,YAAeoB,EAClBjB,YAAe,CAACgC,EAAaG,KAAOvd,OAAOwd,YACzCJ,EAAaK,IAAM,EAAIzd,OAAO0d,eAGhD/c,EAAEwc,SAAWG,EAAoBtN,MAAMxM,KAAM,CAACsI,EAAKzL,GAAE,EACd,eACvCkc,EAAmB5b,EAAEwc,SAIzB5B,IAAGK,OAAOpY,MACLmY,QAAQ,4BAA4B,KAG5CE,GAAG,aAAc,SAASlb,EAAGN,GAEF,MAApBkc,GACAhB,IAAGK,OAAOpY,MACLmY,QAAQ,4BAA4B,KAIjDzK,EAAKsK,UAAU,8BACdE,OAAO,OACPkB,KAAK,MAAOgB,KACZhB,KAAK,QAAS,QACdA,KAAK,SAAU,QACfb,MAAM,WAAY,YAClBA,MAAM,QAAS,OAKhBnB,IACkC,IAA9BA,EAAa9O,EAAMkQ,GACnB,OAAOjB,EAIf,IAAI8C,EAAuBtC,IAAGK,OAAO,oBAAsBb,GACtDgB,MAAM,UAAW,SAEJ,MAAdZ,EACAI,IAAGK,OAAO,oBAAsBb,GAC/BgB,MAAM,OAASR,IAAGkB,MAAMqB,MAAQ,EAAK,MACrC/B,MAAM,MAAQR,IAAGkB,MAAMsB,MAAQ,EAAK,MAErCxC,IAAGK,OAAO,oBAAsBb,GAC/BgB,MAAM,OAAQZ,EAAW,GAAK,MAC9BY,MAAM,MAAOZ,EAAW,GAAK,MAIlC,IAAIiC,EAAeS,EAAqBvb,OAAO+a,wBA2B/C,OAzBID,EAAaG,KAAOH,EAAaO,MAAQ3d,OAAOge,YAA6B,QAAf9C,KAC9DA,EAAc,OAGI,MAAdC,EAEAI,IAAGK,OAAO,oBAAsBb,GAC/BgB,MAAM,OAASR,IAAGkB,MAAMqB,MAAQ,EAAIV,EAAaO,MAAS,MAC1D5B,MAAM,MAAQR,IAAGkB,MAAMsB,MAAQ,EAAK,MAElB,MAAf3C,EACAG,IAAGK,OAAO,oBAAsBb,GAC/BgB,MAAM,OAASX,EAAY,GAAKgC,EAAaO,MAAS,MACtD5B,MAAM,MAAOX,EAAY,GAAK,MAE/BG,IAAGK,OAAO,oBAAsBb,GAC/BgB,MAAM,OAASZ,EAAW,GAAKiC,EAAaO,MAAS,MACrD5B,MAAM,MAAOZ,EAAW,GAAK,OAQtCL,EACOC,GAEXQ,IAAGkB,MAAMC,iBACTnB,IAAGkB,MAAME,kBAGF5B,ICzRf,IAAIkD,EAAa,SAASjN,EAAExE,GAAK,OAAOwE,EAAIxE,GAkZrC,IAAI0R,EAAe,IAhYnB,WACH,IAAIC,EAAO3a,KAIX2a,EAAKC,YAAe,iCAAiCC,MAAM,IAC3DF,EAAKG,aAAe,iCAAiCD,MAAM,IAE3DF,EAAKI,gBAAkB,SAASC,GAE5B,IADA,IAAInP,EAAM,GACDhP,EAAI,EAAGA,EAAIme,EAAQ1U,OAAQzJ,IAChCgP,EAAImP,EAAQne,IAAMA,EAEtB,OAAOgP,GAGX8O,EAAKM,gBAAkB,SAAyBC,GAQ5C,IALA,IAAI5c,EAAI4c,EAAG,GAIPC,EAAK,IAAIlM,MAAM3Q,EAAI,GACfzB,EAAI,EAAGA,GAAKyB,EAAGzB,IAAI,CACvBse,EAAGte,GAAK,IAAIoS,MAAM3Q,EAAI,GACtB,IAAI,IAAI2L,EAAIpN,EAAGoN,GAAK3L,EAAG2L,IACvBkR,EAAGte,GAAGoN,GAAK,EAEf,IAAImR,EAAU,EAGd,IAAQve,EAAIyB,EAZD,EAYY,EAAGzB,EAAI,EAAGA,IAEjC,IAAQoN,EAAIpN,EAdD,EAcY,EAAGoN,GAAK3L,EAAG2L,IAAI,CAClCmR,EAAUD,EAAGte,GAAGoN,EAAE,GAElB,IAAI,IAAInN,EAAImN,EAjBL,EAiBgB,EAAGnN,GAAKD,EAAGC,IAC3Boe,EAAGpe,KAAOmN,IAGTmR,EAAUzP,KAAK2C,IAAI8M,GAAWte,EAAID,EAAKse,EAAGte,GAAGC,EAAE,GAAK,GAAK,GAAMmN,EAAInN,EAAI,EAAI,EAAKqe,EAAGre,EAAE,GAAGmN,EAAE,GAAK,KAIvGkR,EAAGte,GAAGoN,GAAKmR,EAKf,OAFAA,EAAUD,EAAG,GAAG7c,GAET6c,GAGXR,EAAKU,yBAA2B,SAASF,EAAIG,GAC3C,IAAIJ,EAAKjM,MAAMzC,MAAM,KACAyC,MAAMkM,EAAG7U,SAASiV,IAAI,WAAa,OAAO,IAI/D,OADAZ,EAAKa,KAAKL,EAAID,EAAII,EAAO,EAAGH,EAAG7U,OAAO,GAC/B4U,GAGTP,EAAKa,KAAO,SAASL,EAAID,EAAII,EAAOze,EAAGoN,GAErC,IAAImR,EAAUD,EAAGte,GAAGoN,GAGpB,KAAGA,EAAIpN,EAAI,EAFA,GAIX,GAAGse,EAAGte,GAAGoN,EAAE,IAAMmR,EAAjB,CAKA,IAAI,IAAIK,EAAIxR,EATD,EASY,EAAGwR,GAAK5e,EAAG4e,IAChC,GAAIH,EAAMrR,KAAOwR,IAGGA,EAAI5e,EAAKse,EAAGte,GAAG4e,EAAE,GAAK,IACtBxR,EAAIwR,EAAI,EAAI,EAAKN,EAAGM,EAAE,GAAGxR,EAAE,GAAK,GAEvB,GAAKmR,EAS9B,OAPAF,EAAGO,GAAKxR,EACRiR,EAAGjR,GAAKwR,EAEL5e,EAAI4e,GACHd,EAAKa,KAAKL,EAAID,EAAII,EAAOze,EAAG4e,EAAI,QAEpCd,EAAKa,KAAKL,EAAID,EAAII,EAAOG,EAAI,EAAGxR,EAAI,GAM1CqO,QAAQpD,IAAI,YAAcrY,EAAI,IAAMoN,EAAI,+BAzBtC0Q,EAAKa,KAAKL,EAAID,EAAII,EAAOze,EAAGoN,EAAE,IA6BlC0Q,EAAKe,sBAAwB,SAASC,GAElC,IAAIT,EAAKjM,MAAMzC,MAAM,KAAM,IAAIyC,MAAM0M,EAAWrV,OAAS,IAAIiV,IAAInR,OAAO3L,UAAUmd,QAAQ,GAG1FV,EAAG,GAAKS,EAAWrV,OAInB,IADA,IAAIuV,EAAQ,GACHhf,EAAI,EAAGA,EAAI8d,EAAKC,YAAYtU,OAAQzJ,IACzCgf,EAAMhf,GAAK,GAIf,IAAIif,EAAqBnB,EAAKI,gBAAgBJ,EAAKC,aAC/CmB,EAAsBpB,EAAKI,gBAAgBJ,EAAKG,cAEpD,IAASje,EAAI,EAAGA,EAAI8e,EAAWrV,OAAQzJ,IAAK,CACxC,IAAI2Q,EAAImO,EAAW9e,GACfmf,EAAKnf,EAAI,EAEb,GAAS,KAAL2Q,GAAiB,KAALA,EAEZ0N,EAAGc,GAAM,OAET,GAAIxO,KAAKsO,EAELD,EAAMC,EAAmBtO,IAAIxK,KAAKgZ,OAC/B,MAAIxO,KAAKuO,GAOZ,KAAM,sCALN,IAAI9R,EAAI4R,EAAME,EAAoBvO,IAAIyO,MAEtCf,EAAGc,GAAM/R,EACTiR,EAAGjR,GAAK+R,GAOpB,IAAK,IAAI5d,KAAOyd,EACZ,GAAIA,EAAMzd,GAAKkI,OAAS,EACpB,KAAM,8BAAgCuV,EAAMzd,GAAK,GAIzD,OAAO8c,GAGXP,EAAKuB,gBAAkB,SAASL,EAAOhf,EAAGoN,GAEtC,IADA,IAAIkS,EAAI,EACDN,EAAMM,GAAG7V,OAAS,GAAKuV,EAAMM,GAAGN,EAAMM,GAAG7V,OAAS,GAAK2D,GAC1DkS,GAAK,EAIT,OADAN,EAAMM,GAAGnZ,KAAKiH,GACPkS,GAGXxB,EAAKyB,gBAAkB,SAASP,EAAO5R,GAEnC,IADA,IAAIkS,EAAI,EACmB,IAApBN,EAAMM,GAAG7V,QAAgBuV,EAAMM,GAAGN,EAAMM,GAAG7V,OAAO,IAAM2D,GAC3DkS,GAAK,EAGT,OADAN,EAAMM,GAAGF,MACFE,GAGXxB,EAAK0B,sBAAwB,SAASnB,GAGlC,IADA,IAAIW,EAAQ,GACHhf,EAAI,EAAGA,EAAIqe,EAAG,GAAIre,IACvBgf,EAAMhf,GAAK,GAGf,IAAIyf,EAAO,GACPzQ,EAAM,GAEV,IAAShP,EAAI,EAAGA,EAAIqe,EAAG,GAAK,EAAGre,IAAK,CAChC,GAAc,IAAVqe,EAAGre,IAAYqe,EAAGre,KAAMyf,EACxB,KAAM,+CAEVA,EAAKpB,EAAGre,KAAM,EAEA,IAAVqe,EAAGre,GACHgP,GAAO,IAEHqP,EAAGre,GAAKA,EACRgP,GAAO8O,EAAKC,YAAYD,EAAKuB,gBAAgBL,EAAOhf,EAAGqe,EAAGre,KAE1DgP,GAAO8O,EAAKG,aAAaH,EAAKyB,gBAAgBP,EAAOhf,IAKjE,OAAOgP,GAGX8O,EAAK4B,cAAgB,SAASrB,EAAIpU,EAAM0V,GAWpC,IAPA,IAAIC,EAAW,GACXC,EAAY,GAEZC,EAAW7V,EACX8V,EAASJ,EAGJ3f,EAAIiK,EAAMjK,GAAK2f,EAAI3f,IACV,IAAVqe,EAAGre,KAAaqe,EAAGre,GAAKiK,GAAQoU,EAAGre,GAAK2f,IACxCE,EAAU1Z,KAAK,CAACnG,EAAEqe,EAAGre,KAE7B,IAASA,EAAI8f,EAAU9f,GAAK+f,EAAQ/f,IAAK,CACrC,KAAiB,IAAVqe,EAAGre,IAAYA,GAAK+f,GAAQ/f,IAInC,IAFA2f,EAAKtB,EAAGre,GAEDqe,EAAGre,KAAO2f,GACb3f,IACA2f,IAGJC,EAAWA,EAAShP,OAAOkN,EAAK4B,cAAcrB,EAAIre,EAAG2f,IAMzD,OAHIE,EAAUpW,OAAS,GACnBmW,EAASzZ,KAAK0Z,GAEXD,GAGX9B,EAAKkC,+BAAiC,SAAS3B,GAY3C,IAJA,IAAIC,EAAKR,EAAKM,gBAAgBC,GAC1B4B,EAAQnC,EAAKU,yBAAyBF,EAAID,GAC1C6B,EAAU,GAELlgB,EAAI,EAAGA,EAAIqe,EAAG5U,OAAQzJ,IACvBqe,EAAGre,GAAKA,GAGRigB,EAAMjgB,IAAMqe,EAAGre,KACfkgB,EAAQ/Z,KAAK,CAACnG,EAAGqe,EAAGre,KACpBqe,EAAGA,EAAGre,IAAM,EACZqe,EAAGre,GAAK,GAIhB,OAAOkgB,GAGXpC,EAAKqC,aAAe,SAAS9B,EAAI+B,EAAOpgB,EAAGoN,EAAGiT,GAe1C,IAAIC,EAAW,GACXC,EAAK,CAACvgB,EAAE,GACRwgB,EAAK,CAACpT,EAAE,GAKZ,GAHI8D,UAAUzH,OAAS,IACnB4W,EAAmB,IAEnBrgB,EAAIoN,EACJ,MAAO,GAKP,KAAiB,IAAViR,EAAGre,GAAUA,IAAOugB,EAAGpa,KAAKnG,GACnC,KAAiB,IAAVqe,EAAGjR,GAAUA,IAAOoT,EAAGra,KAAKiH,GAEnC,GAAIpN,EAAIoN,EAAG,CAGP,GADAmT,EAAGpa,KAAKnG,GACM,IAAVogB,EACA,MAAO,CAAC,CAAC,IAAIA,EAAOG,EAAGE,KAAK7C,KAO5B,IAHA,IAAI8C,GAAW,EACXxD,EAAO,GACPyD,EAAQ,GACHrB,EAAI,EAAGA,EAAIiB,EAAG9W,OAAQ6V,IACvBoB,EACAC,EAAMxa,KAAKoa,EAAGjB,IAEdpC,EAAK/W,KAAKoa,EAAGjB,IAEbe,EAAiB7T,QAAQ+T,EAAGjB,KAAO,IACnCoB,GAAW,GAGnB,MACW,CAAC,CAAC,IAAIN,EAAOG,EAAGE,KAAK7C,KAQxC,GAAIS,EAAGre,IAAMoN,EAAG,CAEZ,IAAIhN,EAAImgB,EAKR,IAJIjB,EAAItf,EAGRI,EAAE+F,KAAKmZ,GACAA,GAAKlS,GAAG,CAOX,IALAkT,EAAWA,EAAS1P,OAAOkN,EAAKqC,aAAa9B,EAAI+B,EAAOd,EAAGjB,EAAGiB,GAAIe,IAGlEjgB,EAAE+F,KAAKkY,EAAGiB,IACVA,EAAIjB,EAAGiB,GAAK,EACK,IAAVjB,EAAGiB,IAAYA,GAAKlS,EAAGkS,IAAOlf,EAAE+F,KAAKmZ,GAC5Clf,EAAE+F,KAAKmZ,GAYX,OAVAlf,EAAEgf,OACFhf,EAAIA,EAAEwQ,OAAO4P,IAEP/W,OAAS,IACG,IAAV2W,EACAE,EAASna,KAAK,CAAC,IAAKia,EAAOhgB,EAAEqgB,KAAK7C,KAElC0C,EAASna,KAAK,CAAC,IAAKia,EAAOhgB,EAAEqgB,KAAK7C,MAGnC0C,EAGPjC,EAAGre,KAAOoN,IAEVmT,EAAGpa,KAAKnG,GACRwgB,EAAGra,KAAKiH,GAEOmT,EAAG3P,OAAO4P,GACZ/W,OAAS,IACJ,IAAV2W,EACAE,EAASna,KAAK,CAAC,IAAIia,EAAOG,EAAG3P,OAAO4P,GAAIC,KAAK7C,KAE7C0C,EAASna,KAAK,CAAC,IAAIia,EAAOG,EAAG3P,OAAO4P,GAAIC,KAAK7C,OAMzD,IAFA,IAAI7b,EAAI,GAEDsc,EAAGre,KAAOoN,GAAKpN,EAAIoN,GAEtBrL,EAAEoE,KAAKnG,GACP+B,EAAEoE,KAAKiH,GAEPpN,GAAK,EACLoN,GAAK,EAELgT,GAAS,EAOjB,OAJIG,EAAK,CAACvgB,EAAE,GACRwgB,EAAK,CAACpT,EAAE,GACRkT,EAASna,KAAK,CAAC,IAAKia,EAAOre,EAAE0e,KAAK7C,KAE/B0C,EAAS1P,OAAOkN,EAAKqC,aAAa9B,EAAI+B,EAAOpgB,EAAGoN,EAAGiT,MAO3D,SAASO,EAAYC,GACxB,IAAI/C,EAAO3a,KA+IX,OA9IA2a,EAAK+C,WAAaA,EAElB/C,EAAKgD,WAAa,SAASC,GAKvB,IAHA,IAAI1J,EAAQ0J,EAAU/C,MAAM,KACxBgD,EAAO,GAEFhhB,EAAI,EAAGA,EAAIqX,EAAM5N,OAAQzJ,IAAK,CAEnC,IAAIihB,EAAS5J,EAAMrX,GAAGge,MAAM,KAE5B,GAAqB,GAAjBiD,EAAOxX,OACPuX,EAAK7a,KAAKwH,SAASsT,EAAO,UACzB,GAAqB,GAAjBA,EAAOxX,OAKZ,IAJA,IAAIQ,EAAO0D,SAASsT,EAAO,IACvBtB,EAAKhS,SAASsT,EAAO,IAGhB7T,EAAInD,EAAMmD,GAAKuS,EAAIvS,IACxB4T,EAAK7a,KAAKiH,QAEdqO,QAAQpD,IAAI,qCAAsC0I,GAI1D,OAAOC,GAGXlD,EAAKoD,eAAiB,SAASC,GAe3B,IAPA,IAAIC,EAAQD,EAAUnD,MAAM,MACxBqD,EAAe,GACfC,EAAU,EACVC,EAAa,CAACC,YAAa,CAACC,GAAG,IAAKC,MAAM,CAAC,QAAS,cACpDC,EAAe,GAGV3hB,EAAI,EAAGA,EAAIohB,EAAM3X,OAAQzJ,IAE9B,GAAmB,KAAfohB,EAAMphB,GAAG,GAWb,IAFA,IAAI4hB,EAAQR,EAAMphB,GAAGoW,OAAO4H,MAAM,SAEzB5Q,EAAI,EAAGA,EAAIwU,EAAMnY,OAAQ2D,IAC9B,GAAId,MAAMsV,EAAMxU,IAAK,CACjB,GAAiC,IAA7BwU,EAAMxU,GAAGyU,OAAO,SAAgB,CAEhC,IACIC,EADQF,EAAMxU,GAAG4Q,MAAM,KACJ,GAAGA,MAAM,KAChCuD,EAAWG,MAAQ,CAACI,EAAW,GAAIA,EAAW,IAC9C,SAGJ,GAAiC,GAA7BF,EAAMxU,GAAGyU,OAAO,UAAgB,CAEhC,IACIC,EADQF,EAAMxU,GAAG4Q,MAAM,KACJ,GAAGA,MAAM,KAChCuD,EAAWQ,OAAS,CAACD,EAAW,GAAIA,EAAW,IAC/C,SASJ,IAJA,IAAIzK,EAAQuK,EAAMxU,GAAG4Q,MAAM,KACvBgD,EAAOlD,EAAKgD,WAAWzJ,EAAM,IAC7B2K,EAAQ3K,EAAM,GAETiI,EAAI,EAAGA,EAAI0B,EAAKvX,OAAQ6V,IACzBhT,MAAM0V,GACNT,EAAWC,YAAYH,GAAcL,EAAK1B,IAAM0C,GAEhDT,EAAWC,YAAYH,GAAcL,EAAK1B,KAAO0C,EACjDL,EAAaxb,KAAKoH,OAAOyU,UAMjCT,EAAWC,YAAYH,GAAcC,GAAW/T,OAAOqU,EAAMxU,IAC7DkU,GAAW,EAEXK,EAAaxb,KAAKoH,OAAOqU,EAAMxU,UA/CnCiU,EAAeD,EAAMphB,GAAGoW,OAAOrL,MAAM,GACrCuW,EAAU,EAEVC,EAAWC,YAAYH,GAAgB,GAsD/C,MALM,WAAYE,IACdA,EAAWQ,OAAS,CAACjT,KAAKC,IAAIY,MAAM,KAAMgS,GAAe7S,KAAK2C,IAAI9B,MAAM,KAAMgS,KAElF7D,EAAKyD,WAAaA,EAEXzD,GAGXA,EAAKmE,gBAAkB,WAKnB,IAAIhhB,EAEJ,IAAK,IAAIihB,KAAgBpE,EAAKyD,WAAY,CACtC,IAAIY,EAAS5U,OAAO6U,UAChBC,EAAS9U,OAAO+U,UAGpB,IAAK,IAAIC,KAAUzE,EAAKyD,WAAWC,YAAYU,GAEvB,iBADpBjhB,EAAQ6c,EAAKyD,WAAWC,YAAYU,GAAcK,MAE1CthB,EAAQkhB,IACRA,EAASlhB,GACTA,EAAQohB,IACRA,EAASphB,IAKrB,IAAKshB,KAAUzE,EAAKyD,WAAWC,YAAYU,GAEnB,iBADpBjhB,EAAQ6c,EAAKyD,WAAWC,YAAYU,GAAcK,MAE9CzE,EAAKyD,WAAWC,YAAYU,GAAcK,IAAWthB,EAAQkhB,IAAYE,EAASF,IAK9F,OAAOrE,GAGXA,EAAKoD,eAAepD,EAAK+C,YAClB/C,ECjiBX,IAAIF,EAAa,SAASjN,EAAExE,GAAK,OAAOwE,EAAIxE,GA8CrC,SAASqW,IAAsE,IAA7DC,EAA6DvR,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAvD,GAAI4N,EAAmD5N,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAtC,GAAIwR,EAAkCxR,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAArB,GAAIyR,EAAiBzR,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAH,EAC3E4M,EAAO3a,KAEX2a,EAAKtS,KAAO,MACZsS,EAAK8E,qBAAsB,EAC3B9E,EAAK2E,IAAMA,EACX3E,EAAKgB,WAAaA,EAClBhB,EAAK4E,WAAaA,EAClB5E,EAAK+E,UAAW,EAEiB,KAA7B/E,EAAKgB,WAAW/T,OAAO,KAEvB+S,EAAKgB,WAAahB,EAAKgB,WAAW/T,MAAM,GAAI,GAC5C+S,EAAK+E,UAAW,GAGpB/E,EAAKpD,IAAMC,IAAO1R,OAElB6U,EAAKwC,SAAW,GAEhBxC,EAAKgF,gBAAkB,GACvBhF,EAAKiF,YAAc,GAEnBjF,EAAKkF,QAAU,SAASC,GAGpB,IAFA,IAAIC,EAAkBpF,EAAKqF,MAAMC,OAAO,SAAS9iB,GAAK,MAAqB,cAAdA,EAAE+iB,WAEtDrjB,EAAI,EAAGA,EAAIijB,EAAKxZ,QAAUzJ,EAAIkjB,EAAgBzZ,OAAQzJ,IAC3DkjB,EAAgBljB,GAAG0a,IAAMuI,EAAKjjB,GAGlC,OAAO8d,GAGXA,EAAKwF,iBAAmB,WACpBxF,EAAKyF,UAAY1F,EAAagB,sBAAsBf,EAAKgB,aAG7DhB,EAAK0F,aAAe,SAASC,GAMzB,IAHA,IAAIC,EAAS,GACTC,GAAc,GAEVA,EAAaF,EAAajX,QAAQ,OAAS,GAC/CkX,EAAOvd,KAAKwd,GACZF,EAAeA,EAAa9a,UAAU,EAAGgb,GAAcF,EAAa9a,UAAUgb,EAAW,EAAGF,EAAaha,QAI7G,MAAO,CAACga,aAAcA,EAAeC,OAAQA,IAGjD,IAAIpR,EAAMwL,EAAK0F,aAAa1F,EAAKgB,YACjChB,EAAKgB,WAAaxM,EAAImR,aACtB3F,EAAKuC,iBAAmB/N,EAAIoR,OAE5BpR,EAAMwL,EAAK0F,aAAa1F,EAAK2E,KAC7B3E,EAAK2E,IAAMnQ,EAAImR,aACf3F,EAAK8F,UAAYtR,EAAIoR,OAErB5F,EAAK+F,UAAY/F,EAAKgB,WAAWrV,OD3G9B,SAAqBkH,EAAGxE,GAG7B,GAAIwE,IAAMxE,EAAG,OAAO,EACpB,GAAU,OAANwE,GAAoB,OAANxE,EAAY,OAAO,EACrC,GAAIwE,EAAElH,QAAU0C,EAAE1C,OAAQ,OAAO,EAKjC,IAAK,IAAIzJ,EAAI,EAAGA,EAAI2Q,EAAElH,SAAUzJ,EAC9B,GAAI2Q,EAAE3Q,KAAOmM,EAAEnM,GAAI,OAAO,EAE5B,OAAO,ECgGA8jB,CAAYhG,EAAKuC,iBAAkBvC,EAAK8F,aACzCnI,QAAQpD,IAAI,oDACZoD,QAAQpD,IAAI,+CAGhByF,EAAKwF,mBAELxF,EAAKiG,aAAe,SAASV,EAAUW,GAGnC,IAFA,IAAIC,EAAanG,EAAKqF,MAAMC,OAAO,SAAS9iB,GAAK,OAAOA,EAAE+iB,UAAYA,IAE5DrjB,EAAI,EAAGA,EAAIikB,EAAWxa,OAAQzJ,IACpCikB,EAAWjkB,GAAG2F,EAAIqe,EAAUhkB,GAAG,GAC/BikB,EAAWjkB,GAAG4F,EAAIoe,EAAUhkB,GAAG,GAGnC,OAAO8d,GAGXA,EAAKoG,sBAAwB,WAKzB,IAHA,IAAID,EAAanG,EAAKqF,MAAMC,OAAO,SAAS9iB,GAAK,MAAqB,cAAdA,EAAE+iB,WAGjDrjB,EAAI,EAAGA,EAAIikB,EAAWxa,OAAQzJ,IAC/B8d,EAAKuC,iBAAiB7T,QAAQxM,IAAM,IACpCikB,EAAWjkB,GAAGqjB,SAAW,SACzBY,EAAWjkB,EAAE,GAAGqjB,SAAW,UAInC,IAZoC,IAAAc,EAAA,SAY3BnkB,GACD8D,GAAS,EAIb,IAAK,IAAIsJ,EAAI,EAAGA,EAAI0Q,EAAKwC,SAAStgB,GAAG,GAAGyJ,OAAQ2D,IACxC0Q,EAAKuC,iBAAiB7T,QAAQsR,EAAKwC,SAAStgB,GAAG,GAAGoN,KAAO,IACzDtJ,GAAS,GAGbA,EACAga,EAAKwC,SAAStgB,GAAG,GAAG0e,IAAI,SAAS/Y,GACpB,GAALA,IAEJmY,EAAKqF,MAAMxd,EAAE,GAAGye,SAAW,OAG/BtG,EAAKwC,SAAStgB,GAAG,GAAG0e,IAAI,SAAS/Y,GACpB,GAALA,IAEJmY,EAAKqF,MAAMxd,EAAE,GAAGye,SAAWtG,EAAKwC,SAAStgB,GAAG,OApB/CA,EAAI,EAAGA,EAAI8d,EAAKwC,SAAS7W,OAAQzJ,IAAK,KACvC8D,EADuCqgB,EAAtCnkB,GAwBT,OAAO8d,GAGXA,EAAKuG,aAAe,SAAShB,GAIzB,IAHA,IAAIW,EAAY,GACZd,EAAkBpF,EAAKqF,MAAMC,OAAO,SAAS9iB,GAAK,OAAOA,EAAE+iB,UAAYA,IAElErjB,EAAI,EAAGA,EAAIkjB,EAAgBzZ,OAAQzJ,IACxCgkB,EAAU7d,KAAK,CAAC+c,EAAgBljB,GAAG2F,EAAGud,EAAgBljB,GAAG4F,IAE7D,OAAOoe,GAGXlG,EAAKwG,QAAU,WAKX,IADA,IAAIrB,EAAO,GACFjjB,EAAI,EAAGA,EAAI8d,EAAKgB,WAAWrV,OAAQzJ,IACxCijB,EAAK9c,KAAK2X,EAAKqF,MAAMnjB,GAAG0a,KAE5B,OAAOuI,GAGXnF,EAAKyG,eAAiB,WAMlB,IALA,IAAIlG,EAAKP,EAAKyF,UACViB,EAAmB1G,EAAKwC,SAAS8C,OAAQ,SAAS9iB,GAClD,MAAe,KAARA,EAAE,IAAaA,EAAE,GAAGmJ,QAAU,IAGhCzJ,EAAI,EAAGA,EAAIwkB,EAAiB/a,OAAQzJ,IAIzC,IAHA,IAAIykB,EAAUD,EAAiBxkB,GAAG,GAC9B0kB,EAAOD,EAAQ1Z,MAAM,EAAG0Z,EAAQhb,OAAS,GAEpC2D,EAAI,EAAGA,EAAIsX,EAAKjb,OAAO,EAAG2D,IAC/B0Q,EAAK6G,YAAY,CAACD,EAAKtX,GAAIsX,EAAKtX,EAAE,GAAIiR,EAAGqG,EAAKtX,EAAE,IAAKiR,EAAGqG,EAAKtX,MAIrE,OAAO0Q,GAGXA,EAAK8G,eAAiB,WAQlB,IAJA,IAAIC,EAAa,SAASvkB,GACtB,OAAa,IAANA,GAAWA,GAAKwd,EAAKgB,WAAWrV,QAGlCzJ,EAAI,EAAGA,EAAI8d,EAAKwC,SAAS7W,OAAQzJ,IACtC,GAA2B,KAAvB8d,EAAKwC,SAAStgB,GAAG,KAAe8d,EAAK8E,qBAA8C,KAAvB9E,EAAKwC,SAAStgB,GAAG,IAAjF,CAGA,IAAI0kB,EAAO5G,EAAKwC,SAAStgB,GAAG,GAAGojB,OAAOyB,GAEtC,GAA2B,KAAvB/G,EAAKwC,SAAStgB,GAAG,GAAW,CAC5B,IAAI8kB,EAAW,CAACvkB,KAAQ,GACpBkX,KAAQ,EAER5R,OAAU,EACVkf,IAAOjH,EACPuF,SAAY,SACZe,SAAY,IACZM,KAAQ,GACR/e,EAAKmY,EAAKqF,MAAMrF,EAAK+F,UAAU,GAAGle,EAClCC,EAAKkY,EAAKqF,MAAMrF,EAAK+F,UAAU,GAAGje,EAClCof,GAAMlH,EAAKqF,MAAMrF,EAAK+F,UAAU,GAAGmB,GACnCC,GAAMnH,EAAKqF,MAAMrF,EAAK+F,UAAU,GAAGoB,GACnCvK,IAAOC,IAAO1R,QACdic,EAAW,CAAC3kB,KAAQ,GACpBkX,KAAQ,EAER5R,OAAU,EACVkf,IAAOjH,EACPuF,SAAY,SACZe,SAAY,IACZM,KAAQ,GACR/e,EAAKmY,EAAKqF,MAAM,GAAGxd,EACnBC,EAAKkY,EAAKqF,MAAM,GAAGvd,EACnBof,GAAMlH,EAAKqF,MAAM,GAAG6B,GACpBC,GAAMnH,EAAKqF,MAAM,GAAG8B,GACpBvK,IAAOC,IAAO1R,QAEdyb,EAAKve,KAAK2X,EAAKqF,MAAM1Z,OAAO,GAC5Bib,EAAKve,KAAK2X,EAAKqF,MAAM1Z,OAAO,GAC5BqU,EAAKqF,MAAMhd,KAAK2e,GAChBhH,EAAKqF,MAAMhd,KAAK+e,GAIxBpH,EAAK6G,YAAYD,GAGrB,OAAO5G,GAGXA,EAAKqH,eAAiB,WAClB,IAAK,IAAInlB,EAAI,EAAGA,EAAI8d,EAAKsH,MAAM3b,OAAQzJ,IACnC8d,EAAKsH,MAAMplB,GAAG0a,IAAMoD,EAAKsH,MAAMplB,GAAGqlB,OAAO3K,IAAMoD,EAAKsH,MAAMplB,GAAG4R,OAAO8I,IAGxE,OAAOoD,GAGXA,EAAK6G,YAAc,SAASD,GAQxB,IAPA,IAEI9gB,EAAS,OAAe,EAAI8gB,EAAKjb,QACjC5D,EAHa,IAGW,EAAIiJ,KAAKwW,IAAI1hB,IAErC2hB,EAAc,GAETvlB,EAAI,EAAGA,EAAI0kB,EAAKjb,OAAQzJ,IAC7BulB,GAAezH,EAAKqF,MAAMuB,EAAK1kB,GAAG,GAAG0a,IAEzC,IAAI8K,EAAU,CAACjlB,KAAQ,GACNkX,KAAQ,EAER5R,OAAUA,EACVkf,IAAOjH,EACPuF,SAAY,SACZe,SAAY,IACZM,KAAQA,EACRhK,IAAO6K,GACxBzH,EAAKqF,MAAMhd,KAAKqf,GAEhB,IAAIC,EAAO,EACPC,EAAO,EACPC,EAAgB,EAEpB/hB,EAA4B,SAAnB8gB,EAAKjb,OAAS,IAAgB,EAAIib,EAAKjb,QAChD5D,EAAS,GAAMiJ,KAAK8W,IAAIhiB,GAExB,IAAK,IAAIwJ,EAAI,EAAGA,EAAIsX,EAAKjb,OAAQ2D,IAC7B,KAAgB,IAAZsX,EAAKtX,IAAYsX,EAAKtX,GAAK0Q,EAAKgB,WAAWrV,QAA/C,CAIAqU,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAMuB,EAAKtX,GAAK,GAC/BwE,OAAUkM,EAAKqF,MAAMrF,EAAKqF,MAAM1Z,OAAO,GACvCoc,SAAY,OACZ5kB,MAAS4E,EACT6U,IAAOC,IAAO1R,SAE3Byb,EAAKjb,OAAS,GAEdqU,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAMuB,EAAKtX,GAAK,GAC/BwE,OAAUkM,EAAKqF,MAAMuB,GAAMtX,EAAI0B,KAAK6F,MAAM+P,EAAKjb,OAAS,IAAMib,EAAKjb,QAAU,GAC7Eoc,SAAY,OACZ5kB,MAAkB,EAAT4E,EACT6U,IAAOC,IAAO1R,SAGnC,IAAI6c,EAA0B,SAAnBpB,EAAKjb,OAAS,GAAgBib,EAAKjb,OAC1CpJ,EAAI,EAAIyO,KAAK8W,IAAI,SAAcE,EAAK,GAExChI,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAMuB,EAAKtX,GAAK,GAC/BwE,OAAUkM,EAAKqF,MAAMuB,GAAMtX,EAAI,GAAKsX,EAAKjb,QAAU,GACnDoc,SAAY,OACZ5kB,MAASZ,IAI1B,IAAI0lB,EAAWjI,EAAKqF,MAAMuB,EAAKtX,GAAG,GAC9B,MAAO2Y,IACPN,GAAQM,EAASpgB,EACjB+f,GAAQK,EAASngB,EAEjB+f,GAAiB,GAazB,OATIA,EAAgB,IAGhBH,EAAQ7f,EAAI8f,EAAOE,EACnBH,EAAQ5f,EAAI8f,EAAOC,EACnBH,EAAQR,GAAKQ,EAAQ7f,EACrB6f,EAAQP,GAAKO,EAAQ5f,GAGlBkY,GAGXA,EAAKkI,iBAAmB,WAcpB,IAbA,IAQIjD,EAAc,GACdkD,EAAYnI,EAAKqF,MAAMC,OALC,SAAS9iB,GACjC,MAAqB,UAAdA,EAAE+iB,WAKT6C,EAAS,GAGJlmB,EAAI,EAAGA,GAAK8d,EAAKqF,MAAM1Z,OAAQzJ,IACpC+iB,EAAY/iB,GAAK,GAErB,IAASA,EAAI,EAAGA,EAAIimB,EAAUxc,OAAQzJ,IAIlC,IAHA,IAAImmB,EAAWF,EAAUjmB,GAGhBoN,EAAI,EAAGA,EAAI+Y,EAASzB,KAAKjb,OAAQ2D,IAAK,CAK3C,IAJA,IAAIgZ,EAAUD,EAASzB,KAAKtX,GAInBkS,EAAI,EAAGA,EAAIyD,EAAYqD,GAAS3c,OAAQ6V,IAC7C,KAAI+G,KAAKC,UAAU,CAACvD,EAAYqD,GAAS9G,GAAG5E,IAAKyL,EAASzL,KAAK+F,UAAWyF,GAA1E,CAGA,IAAIK,EAAWxD,EAAYqD,GAAS9G,GAAGzZ,OAASsgB,EAAStgB,OAEzDiY,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUtC,EAAYqD,GAAS9G,GAC9B1N,OAAUuU,EACVllB,MAASslB,EAjCtB,GAkCaV,SAAY,cAG9BK,EAAOG,KAAKC,UAAU,CAACvD,EAAYqD,GAAS9G,GAAG5E,IAAKyL,EAASzL,KAAK+F,UAAW,EAGjFsC,EAAYqD,GAASjgB,KAAKggB,GAIlC,OAAOrI,GAIXA,EAAK0I,cAAgB,SAASC,GAC1B,QAAyB,IAAdA,EACP,OAAO3I,EAEX,IAAK,IAAI9d,EAAI,EAAGA,EAAIymB,EAAWhd,OAAQzJ,IAAK,CACxC,IAGI0mB,EAAU,CAACrB,OAHFvH,EAAK6I,uBAAuBF,EAAWzmB,GAAGiK,MAGtB2H,OAFpBkM,EAAK6I,uBAAuBF,EAAWzmB,GAAG2f,IAEJkG,SAAY,QAC3De,cAAiBH,EAAWzmB,GAAG6lB,SAAUnL,IAAOC,IAAO1R,QAEvD6U,EAAKsH,MAAMjf,KAAKugB,GAGxB,OAAO5I,GAIXA,EAAK+I,eAAiB,WAMlB,IAAIxI,EAAKP,EAAKyF,UACCzF,EAAKwC,SAEpBxC,EAAKqF,MAAQ,GACbrF,EAAKsH,MAAQ,GAIb,IAAI0B,EAAY,GAGhBhJ,EAAKwC,SAASG,OAEd,IAAK,IAAIzgB,EAAI,EAAGA,EAAI8d,EAAKwC,SAAS7W,OAAQzJ,IAEtC,IADA,IAAI0kB,EAAO5G,EAAKwC,SAAStgB,GAAG,GACnBoN,EAAI,EAAGA,EAAIsX,EAAKjb,OAAQ2D,IAC7B0Z,EAAUpC,EAAKtX,IAAM0Q,EAAKwC,SAAStgB,GAAG,GAI9C,IAAK,IAAIA,EAAI,EAAGA,GAAKqe,EAAG,GAAIre,IAAK,CAC7B,IAAI+mB,EAAWjJ,EAAK2E,IAAIziB,EAAE,IAEtB8d,EAAKuC,iBAAiB7T,QAAQxM,EAAE,IAAM,GACtC8d,EAAKuC,iBAAiB7T,QAAQxM,EAAE,IAAM,KACtC+mB,EAAW,IAIfjJ,EAAKqF,MAAMhd,KAAK,CAAC5F,KAAQwmB,EACRtP,IAAOkL,EAAc3iB,EAAI,EACzB6F,OAAU,EACVkf,IAAOjH,EACPuF,SAAY,aACZX,WAAc5E,EAAK4E,WACnB0B,SAAY0C,EAAU9mB,GACtB0a,IAAOC,IAAO1R,OACdid,QAAU,IAG/B,IAAK,IAAIlmB,EAAI,EAAGA,EAAI8d,EAAKqF,MAAM1Z,OAAQzJ,IAE/B8d,EAAKqF,MAAMnjB,GAAGgnB,SADR,IAANhnB,EACyB,KAEA8d,EAAKqF,MAAMnjB,EAAE,GAGtCA,GAAK8d,EAAKqF,MAAM1Z,OAAO,EACvBqU,EAAKqF,MAAMnjB,GAAGinB,SAAW,KAEzBnJ,EAAKqF,MAAMnjB,GAAGinB,SAAWnJ,EAAKqF,MAAMnjB,EAAE,GAI9C,IAAK,IAAIA,EAAI,EAAGA,GAAKqe,EAAG,GAAIre,IAEV,IAAVqe,EAAGre,IAEH8d,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAMnjB,EAAE,GACvB4R,OAAUkM,EAAKqF,MAAM9E,EAAGre,GAAG,GAC3B6lB,SAAY,WACZ5kB,MAAS,EACTyZ,IAAOC,IAAO1R,SAG/BjJ,EAAI,IAEwC,IAAxC8d,EAAKuC,iBAAiB7T,QAAQxM,EAAE,KACO,GAAvC8d,EAAKuC,iBAAiB7T,QAAQxM,EAAE,KACO,GAAvC8d,EAAKuC,iBAAiB7T,QAAQxM,EAAE,KAGhC8d,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAMnjB,EAAE,GACxB4R,OAAUkM,EAAKqF,MAAMnjB,EAAE,GACvB6lB,SAAY,WACZ5kB,MAAS,EACTyZ,IAAOC,IAAO1R,SAC9B6U,EAAKqF,MAAMnjB,EAAE,GAAGkmB,QAAS,GAMrC,IAAK,IAAIlmB,EAAI,EAAGA,EAAI8d,EAAKgF,gBAAgBrZ,OAAQzJ,IAC7C8d,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAMrF,EAAKgF,gBAAgB9iB,GAAG,GAAG,GACjD4R,OAAUkM,EAAKqF,MAAMrF,EAAKgF,gBAAgB9iB,GAAG,GAAG,GAChD6lB,SAAY,aACZ5kB,MAAS,EACTyZ,IAAOC,IAAO1R,SAYlC,OATI6U,EAAK+E,UACL/E,EAAKsH,MAAMjf,KAAK,CAACkf,OAAUvH,EAAKqF,MAAM,GACtBvR,OAAUkM,EAAKqF,MAAMrF,EAAK+F,UAAU,GACpCgC,SAAY,WACZ5kB,MAAS,EACTyZ,IAAOC,IAAO1R,SAI3B6U,GAGXA,EAAKqC,aAAe,SAAS9B,EAAI+B,EAAOpgB,EAAGoN,GAevC,IAAIkT,EAAW,GACXC,EAAK,CAACvgB,EAAE,GACRwgB,EAAK,CAACpT,EAAE,GAEZ,GAAIpN,EAAIoN,EACJ,MAAO,GAKP,KAAiB,IAAViR,EAAGre,GAAUA,IAAOugB,EAAGpa,KAAKnG,GACnC,KAAiB,IAAVqe,EAAGjR,GAAUA,IAAOoT,EAAGra,KAAKiH,GAEnC,GAAIpN,EAAIoN,EAAG,CAGP,GADAmT,EAAGpa,KAAKnG,GACM,IAAVogB,EACA,MAAO,CAAC,CAAC,IAAIA,EAAOG,EAAGE,KAAK7C,KAO5B,IAHA,IAAI8C,GAAW,EACXxD,EAAO,GACPyD,EAAQ,GACHrB,EAAI,EAAGA,EAAIiB,EAAG9W,OAAQ6V,IACvBoB,EACAC,EAAMxa,KAAKoa,EAAGjB,IAEdpC,EAAK/W,KAAKoa,EAAGjB,IAEbxB,EAAKuC,iBAAiB7T,QAAQ+T,EAAGjB,KAAO,IACxCoB,GAAW,GAGnB,MACW,CAAC,CAAC,IAAIN,EAAOG,EAAGE,KAAK7C,KAQxC,GAAIS,EAAGre,IAAMoN,EAAG,CAEZ,IAAIhN,EAAImgB,EACJjB,EAAItf,EAIR,IADAI,EAAE+F,KAAKmZ,GACAA,GAAKlS,GAAG,CAOX,IALAkT,EAAWA,EAAS1P,OAAOkN,EAAKqC,aAAa9B,EAAI+B,EAAOd,EAAGjB,EAAGiB,KAG9Dlf,EAAE+F,KAAKkY,EAAGiB,IACVA,EAAIjB,EAAGiB,GAAK,EACK,IAAVjB,EAAGiB,IAAYA,GAAKlS,EAAGkS,IAAOlf,EAAE+F,KAAKmZ,GAC5Clf,EAAE+F,KAAKmZ,GAYX,OAVAlf,EAAEgf,OACFhf,EAAIA,EAAEwQ,OAAO4P,IAEP/W,OAAS,IACG,IAAV2W,EACAE,EAASna,KAAK,CAAC,IAAKia,EAAOhgB,EAAEqgB,KAAK7C,KAElC0C,EAASna,KAAK,CAAC,IAAKia,EAAOhgB,EAAEqgB,KAAK7C,MAGnC0C,EAGPjC,EAAGre,KAAOoN,IAEVmT,EAAGpa,KAAKnG,GACRwgB,EAAGra,KAAKiH,GAEOmT,EAAG3P,OAAO4P,GACZ/W,OAAS,IACJ,IAAV2W,EACAE,EAASna,KAAK,CAAC,IAAIia,EAAOG,EAAG3P,OAAO4P,GAAIC,KAAK7C,KAE7C0C,EAASna,KAAK,CAAC,IAAIia,EAAOG,EAAG3P,OAAO4P,GAAIC,KAAK7C,OAMzD,IAFA,IAAI7b,EAAI,GAEDsc,EAAGre,KAAOoN,GAAKpN,EAAIoN,GAEtBrL,EAAEoE,KAAKnG,GACP+B,EAAEoE,KAAKiH,GAEPpN,GAAK,EACLoN,GAAK,EAELgT,GAAS,EAOjB,OAJIG,EAAK,CAACvgB,EAAE,GACRwgB,EAAK,CAACpT,EAAE,GACRkT,EAASna,KAAK,CAAC,IAAKia,EAAOre,EAAE0e,KAAK7C,KAE/B0C,EAAS1P,OAAOkN,EAAKqC,aAAa9B,EAAI+B,EAAOpgB,EAAGoN,KAG3D0Q,EAAKoJ,UAAY,WAA8C,IAArCvE,EAAqCzR,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAvB,EAAGiW,EAAoBjW,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAJ,GACvD,GAAsB,IAAlBiW,EACA,OAAOrJ,EAEX,IAAK,IAAI9d,EAAI,EAAGA,GAAK8d,EAAK+F,UAAW7jB,IAEjC,GAAIA,EAAImnB,GAAkB,EAAG,CAEzB,IAAI1B,EAAMC,EAENS,EAAWrI,EAAKqF,MAAMnjB,EAAE,GACxBgnB,OAAQ,EAAEC,OAAQ,EAClBG,OAAO,EAAEC,OAAO,EAEE,GAAlBvJ,EAAK+F,WACLwD,EAAU,CAAClB,EAASxgB,EAAI,GAAIwgB,EAASvgB,GACrCwhB,EAAU,CAACjB,EAASxgB,EAAI,GAAIwgB,EAASvgB,KAIjCohB,EADK,GAALhnB,EACW8d,EAAKqF,MAAMrF,EAAK+F,UAAY,GAE5B/F,EAAKqF,MAAMnjB,EAAI,GAI1BinB,EADAjnB,GAAK8d,EAAK+F,UACC/F,EAAKqF,MAAM,GAEXrF,EAAKqF,MAAMnjB,GAG2B,IAAjD8d,EAAKyF,UAAU0D,EAASxP,IAAMkL,EAAY,IACO,IAAjD7E,EAAKyF,UAAUyD,EAASvP,IAAMkL,EAAY,IACO,IAAjD7E,EAAKyF,UAAU4C,EAAS1O,IAAMkL,EAAY,KAE1CqE,EAAWC,EAAWnJ,EAAKqF,MAAMrF,EAAKyF,UAAU4C,EAAS1O,IAAMkL,EAAY,GAAG,IAK7B,IAAjD7E,EAAKyF,UAAU4C,EAAS1O,IAAMkL,EAAY,IACO,IAAjD7E,EAAKyF,UAAU0D,EAASxP,IAAMkL,EAAY,IACO,IAAjD7E,EAAKyF,UAAUyD,EAASvP,IAAMkL,EAAY,IAK1C0E,EAAU,CAACJ,EAASthB,EAAIwgB,EAASxgB,EAAGshB,EAASrhB,EAAIugB,EAASvgB,GAC1DwhB,EAAU,CAACJ,EAASrhB,EAAIwgB,EAASxgB,EAAGqhB,EAASphB,EAAIugB,EAASvgB,KAL1DyhB,EAAU,CAAClB,EAASxgB,EAAIshB,EAASthB,EAAGwgB,EAASvgB,EAAIqhB,EAASrhB,GAC1DwhB,EAAU,CAACjB,EAASxgB,EAAIqhB,EAASrhB,EAAGwgB,EAASvgB,EAAIohB,EAASphB,KAQlE,IAAI0hB,EAAc,CAACD,EAAQ,GAAKD,EAAQ,GAAIC,EAAQ,GAAKD,EAAQ,IAC7DG,EAAYzY,KAAK0Y,KAAKF,EAAY,GAAKA,EAAY,GAAKA,EAAY,GAAKA,EAAY,IACrFG,EAAY,CAACH,EAAY,GAAKC,EAAWD,EAAY,GAAKC,GAC1DG,EAAY,EAAE,GAAKD,EAAU,IAAK,GAAKA,EAAU,IAErDhC,EAAO3H,EAAKqF,MAAMnjB,EAAE,GAAG2F,EAAI+hB,EAAU,GACrChC,EAAO5H,EAAKqF,MAAMnjB,EAAE,GAAG4F,EAAI8hB,EAAU,GAErC,IAAIlC,EAAU,CAACjlB,KAAQP,EAAI2iB,EAAa,EACvBlL,KAAQ,EACR5R,OAAU,EACVkf,IAAOjH,EACPuF,SAAY,QACZX,WAAc5E,EAAK4E,WACnB0B,SAAY,IACZze,EAAK8f,EACL7f,EAAK8f,EACLV,GAAMS,EACNR,GAAMS,EACNhL,IAAOC,IAAO1R,QAC3Byd,EAAU,CAACrB,OAAUvH,EAAKqF,MAAMnjB,EAAE,GAC1B4R,OAAU4T,EACVvkB,MAAS,EACT4kB,SAAY,aACZnL,IAAOC,IAAO1R,QAE1B6U,EAAKqF,MAAMhd,KAAKqf,GAChB1H,EAAKsH,MAAMjf,KAAKugB,GAIxB,OAAO5I,GAGXA,EAAK6J,oBAAsB,WAIvB,GAHA7J,EAAK8J,oBACL9J,EAAKwC,SAAWxC,EAAKqC,aAAarC,EAAKyF,UAAW,EAAG,EAAGzF,EAAKgB,WAAWrV,QAEpEqU,EAAK+E,SAAU,CAEf,IAAIgF,EAAe/J,EAAKwC,SAAS8C,OAAO,SAAS9iB,GAAK,GAAY,KAARA,EAAE,GAAW,OAAO,IAE9E,GAAIunB,EAAape,OAAS,EAAG,CACzBqe,MAAQD,EAAa,GACrBnD,KAAOoD,MAAM,GAAGrH,KAAK7C,GAErBmK,KAAOrD,KAAK,GACZsD,OAAQ,EACRC,WAAa,EACb,IAAK,IAAIjoB,EAAI,EAAGA,EAAI0kB,KAAKjb,OAAQzJ,IACzB0kB,KAAK1kB,GAAK+nB,KAAO,IACjBE,YAAc,GAElBF,KAAOrD,KAAK1kB,GAGE,GAAdioB,WACAH,MAAM,GAAK,IACU,GAAdG,WACPH,MAAM,GAAK,IAEXA,MAAM,GAAK,KAKvB,OAAOhK,GAGXA,EAAKoK,iBAAmB,WAKpB,IAFA,IAESloB,EAAI,EAAGA,EAAI8d,EAAKsH,MAAM3b,OAAQzJ,IACnC8d,EAAKsH,MAAMplB,GAAG0a,IAAMoD,EAAKsH,MAAMplB,GAAGqlB,OAAO3K,IAAMoD,EAAKsH,MAAMplB,GAAG4R,OAAO8I,IAGxE,OAAOoD,GAGXA,EAAK8J,kBAAoB,WAIrB,OAHI9J,EAAKyF,UAAU9Z,OAAS,IACxBqU,EAAKgF,gBAAkBhF,EAAKgF,gBAAgBlS,OAAOiN,EAAamC,+BAA+BlC,EAAKyF,aAEjGzF,GAGXA,EAAKqK,eAAiB,WAOlB,IAHA,IAAI9J,EAAKP,EAAKyF,UACVT,EAAkBhF,EAAKgF,gBAElB9iB,EAAI,EAAGA,EAAI8iB,EAAgBrZ,OAAQzJ,IACxCqe,EAAGyE,EAAgB9iB,GAAG,IAAM8iB,EAAgB9iB,GAAG,GAC/Cqe,EAAGyE,EAAgB9iB,GAAG,IAAM8iB,EAAgB9iB,GAAG,GAInD,OADA8d,EAAKgF,gBAAkB,GAChBhF,GAGXA,EAAKsK,QAAU,SAAS7nB,GACpB,YAAmB,IAARA,GACPud,EAAKvd,KAAO,GACLud,IAEPA,EAAKvd,KAAOA,EACLud,IAKXA,EAAK+F,UAAY,GACjB/F,EAAK6J,sBAET7J,EAAK6I,uBAAyB,SAASjC,GAGnC,GAA6C,mBAAzChkB,OAAOkB,UAAU6G,SAAStI,KAAKukB,IAC/B,IAAK,IAAItX,EAAI,EAAGA,EAAI0Q,EAAKqF,MAAM1Z,OAAQ2D,IACnC,GAAI,SAAU0Q,EAAKqF,MAAM/V,IACjB0Q,EAAKqF,MAAM/V,GAAGsX,KAAKnT,OAAOmT,GAC1B,OAAO5G,EAAKqF,MAAM/V,QAK9B,IAAK,IAAIA,EAAI,EAAGA,EAAI0Q,EAAKqF,MAAM1Z,OAAQ2D,IACnC,GAAI0Q,EAAKqF,MAAM/V,GAAGqK,KAAOiN,EACrB,OAAO5G,EAAKqF,MAAM/V,GAM9B,OADAqO,QAAQpD,IAAI,iCAAkCqM,GACvC,MCt0BR,SAAS2D,EAAqBC,GACnC,IAOItoB,EAAGmL,EACFod,EAHD5iB,EAAI,GAAIC,EAAI,GAKhBuF,EAAMmd,EAAW,GACjB,IAAI1kB,EAAQwO,MAAMzC,MAAM,KAAM,IAAIyC,MAAMjH,EAAI,IAAIuT,IAAInR,OAAO3L,UAAUmd,QAAQ,GACzEyJ,EAAYpW,MAAMzC,MAAM,KAAM,IAAIyC,MAAM,GAAGtD,KAAK6F,MAAMxJ,EAAI,KAC3CuT,IAAInR,OAAO3L,UAAUmd,QAAS,GAC7C0J,EAAarW,MAAMzC,MAAM,KAAM,IAAIyC,MAAM,GAAGtD,KAAK6F,MAAMxJ,EAAI,KAC5CuT,IAAInR,OAAO3L,UAAUmd,QAAS,GAE7C2J,EAAK,EACLC,EAAM,EACNC,EAAS9Z,KAAK+Z,GAAK,GAGZ,SAAPzlB,EAAgBpD,EAAGoN,EAAGkb,GAItB,IAOGQ,EAAOC,EAASzJ,EAAGrf,EAAG+oB,EAASC,EAAS1Y,EAAM2Y,EAC9CC,EAAOC,EAAGC,EACZC,EATGC,EAAQ,EAKTzoB,EAAI,EAAG0oB,EAAS,EAMnBC,EAAWrX,MAAMzC,MAAM,KAAM,IAAIyC,MAAO,EAAsB,EAApBtD,KAAK6F,OAAOvH,EAAEpN,GAAG,KAAQ0e,IAAInR,OAAO3L,UAAUmd,QAAS,GAKrG,IAHA+J,EAAQ9oB,EAAE,EAAGoN,IAGNpN,GAAKoN,GAER,IADA2b,EAAUT,EAAWtoB,KACC,GAAHA,EAEd,CACDupB,GAAS,EACTjK,EAAItf,EAAGC,EAAI8oB,EACXU,IAAW3oB,GAAKwe,EAChBmK,IAAW3oB,GAAKb,EAChBD,EAAI+oB,EAAQ,EAEZC,EAAU1J,EAAG2J,EAAUhpB,EACvBipB,EAAS,EACT,GACI5J,IAAKrf,IAAKipB,UAENZ,EAAWhJ,IAAMrf,GAAOqoB,EAAWhJ,GAAKA,GAGhD,GADA/O,EAAO2Y,EAAO,EACVA,GAAU,IACVtlB,EAAMolB,EAAQ,EAAEzY,IAASqY,EACzBhlB,EAAMqlB,EAAQ,EAAE1Y,IAASqY,EACzBhlB,EAAMolB,IAAmBJ,EACzBhlB,EAAMqlB,IAAmBL,EACrBM,EAAS,GACT,KAAO3Y,GAAQ,EAAGA,IACd3M,EAAMolB,EAAQzY,GAAQzB,KAAK+Z,GAC3BjlB,EAAMqlB,EAAQ1Y,GAAQzB,KAAK+Z,GAIvCJ,IAAaE,GAAOO,EAChB5J,GAAKrf,GACPmD,EAAKkc,EAAGrf,EAAGqoB,QA9BbtoB,IAAKupB,IAASC,IAqCtB,IAHAF,EAAUxa,KAAK+Z,IAAIU,EAAM,GAAGA,EAC5BE,IAAW3oB,GAAKsM,EAChB+b,EAAQL,EAAQ,EAAI,EAAIA,EACnBM,EAAI,EAAGA,GAAKtoB,EAAGsoB,IAAK,CAErB,IADAC,EAAQI,EAASL,GAAGD,EACf5Y,EAAO,EAAGA,GAAQ8Y,EAAM9Y,IAC7B3M,EAAMulB,EAAM5Y,IAAS+Y,EACrB,GAAIF,EAAItoB,EACJ,MACJqoB,EAAQM,IAAWL,GAEvBZ,IAAYE,GAAMc,EAGlBpmB,CAAK,EAAG+H,EAAI,EAAGmd,GACfE,EAAUE,IAAO,EAEjBH,EAhGe,EAiGf5iB,EAAE,GAhGW,IAiGbC,EAAE,GAhGW,IAkGb,IAAI8jB,EAAO,GAGX,IADAA,EAAKvjB,KAAK,CAACR,EAAE,GAAIC,EAAE,KACd5F,EAAI,EAAGA,EAAImL,EAAKnL,IACjB2F,EAAE3F,GAAK2F,EAAE3F,EAAE,GArGD,GAqGW8O,KAAK8W,IAAI2C,GAC9B3iB,EAAE5F,GAAK4F,EAAE5F,EAAE,GAtGD,GAsGW8O,KAAK6a,IAAIpB,GAE9BmB,EAAKvjB,KAAK,CAACR,EAAE3F,GAAI4F,EAAE5F,KACnBuoB,GAASzZ,KAAK+Z,GAAGjlB,EAAM5D,EAAE,GAG7B,OAAO0pB,EChHF,SAASE,IACfzmB,KAAK0C,OAAS,KACd1C,KAAK0mB,WAAa,KAClB1mB,KAAK2mB,KAAO,KACT3mB,KAAK4kB,KAAO,UFCsB,IAA3Bjb,OAAOlL,UAAUwU,OACxBtJ,OAAOlL,UAAUwU,KAAO,WACpB,OAAOtJ,OAAO3J,MAAMuF,QAAQ,aAAc,MEAlDkhB,EAAQhoB,UAAUkF,UAAY,WAC7B,OAAO3D,KAAK0C,QAGb+jB,EAAQhoB,UAAUmF,UAAY,SAASlB,GACtC1C,KAAK0C,OAASA,GAGf+jB,EAAQhoB,UAAUmoB,cAAgB,WACjC,OAAO5mB,KAAK0mB,YAGbD,EAAQhoB,UAAUooB,cAAgB,SAASH,GAC1C1mB,KAAK0mB,WAAaA,GAGnBD,EAAQhoB,UAAUqoB,QAAU,WAC3B,OAAO9mB,KAAK2mB,MAGbF,EAAQhoB,UAAUsoB,QAAU,SAASJ,GACpC3mB,KAAK2mB,KAAOA,GAGbF,EAAQhoB,UAAUuoB,QAAU,WAC3B,OAAOhnB,KAAK4kB,MAGb6B,EAAQhoB,UAAUwoB,QAAU,SAASrC,GACpC5kB,KAAK4kB,KAAOA,qBClCN,SAASsC,IACflnB,KAAKmnB,KAAO,KACZnnB,KAAKwC,EAAI,KACNxC,KAAKyC,EAAI,KACZzC,KAAKonB,UAAY,KACjBpnB,KAAKG,OAAS,IAAIC,IAGnB8mB,EAAKzoB,UAAU4oB,QAAU,WACxB,OAAOrnB,KAAKmnB,MAGbD,EAAKzoB,UAAU6oB,QAAU,SAASH,GACjCnnB,KAAKmnB,KAAOA,GAGbD,EAAKzoB,UAAU8E,KAAO,WACrB,OAAOvD,KAAKwC,GAGb0kB,EAAKzoB,UAAU+E,KAAO,SAAShB,GAC9BxC,KAAKwC,EAAIA,GAGV0kB,EAAKzoB,UAAUgF,KAAO,WACrB,OAAOzD,KAAKyC,GAGbykB,EAAKzoB,UAAUiF,KAAO,SAASjB,GAC9BzC,KAAKyC,EAAIA,GAGVykB,EAAKzoB,UAAU8oB,YAAc,WAC5B,OAAOvnB,KAAKonB,WAGbF,EAAKzoB,UAAU+oB,aAAe,SAASJ,GACtCpnB,KAAKonB,UAAYA,GAGlBF,EAAKzoB,UAAUwC,UAAY,WAC1B,OAAOjB,KAAKG,QAGb+mB,EAAKzoB,UAAUyC,UAAY,SAASf,GACnCH,KAAKG,OAASA,cCzCR,SAASsnB,IACZznB,KAAK0nB,KAAO,KACf1nB,KAAK2nB,QAAU,IAEf3nB,KAAK4nB,MAAQ,GACb5nB,KAAK6nB,MAAQ,KACV7nB,KAAK8nB,QAAU,KACf9nB,KAAK+nB,WAAa,KAErB/nB,KAAK/D,KAAO,IAAIiE,IAChBF,KAAKgoB,MAAQ,GAEbhoB,KAAKioB,QAAU,GAEfjoB,KAAKkoB,QAAU,IAAIzB,EAEnBzmB,KAAKmoB,OAAS,GACdnoB,KAAKooB,wBAA0B,IAG/BpoB,KAAKqoB,SAAW,KAEhBroB,KAAKsoB,GAAK,KAIVtoB,KAAKuoB,aAAe,GACpBvoB,KAAKwoB,kBAAoB,GA0N1B,SAASlmB,EAAMijB,GACX,IAAIa,EAAQ,KACRjX,EAAM,KACNhS,EAAI,KAER,GAAIooB,EAAG5iB,kBAAoB,EACvB,OAAO,EAEX,GAAI4iB,EAAGliB,SACH,OAAQ,EAEZkiB,EAAGjiB,SAAQ,GACX8iB,EAAQ,EACRjX,EAAM,EACN,IAAK,IAAItS,EAAI,EAA0B,MAAvB0oB,EAAGziB,cAAcjG,GAAYA,KACzCM,EAAImF,EAAMijB,EAAGziB,cAAcjG,GAAGkE,aACrB,IACU,KAATqlB,EACFjX,EAAMhS,EAEDgS,EAAMhS,IACXgS,EAAMhS,IAKlB,OADAooB,EAAGjiB,SAAQ,GACJ6L,EAAM,ECrQV,SAASsZ,EAAeC,EAASC,GACpC,IAAIhO,EAAO3a,KAsBX,GApBA2a,EAAK9E,QAAU,CACX+S,UAAY,EACZC,iBAAmB,EACnB7E,cAAiB,GACjB8E,YAAc,EACdC,eAAkB,IAClBC,SAAY,IACZC,cAAiB,GACjBC,aAAgB,GAChBC,uBAA0B,GAC1BC,YAAe,KACfC,OAAU,qBACVC,wBAA0B,EAC1BC,mBAAsB,IACtBC,cAAiB,GACjBC,mBAAqB,GAKrB1b,UAAUzH,OAAS,EACnB,IAAK,IAAIojB,KAAUf,EACXhO,EAAK9E,QAAQnX,eAAegrB,KAC5B/O,EAAK9E,QAAQ6T,GAAUf,EAAce,IAYjD,GARiC,OAA7B/O,EAAK9E,QAAQuT,aACbzO,EAAK9E,QAAQ8T,KAAOhP,EAAK9E,QAAQuT,YAAY,GAC7CzO,EAAK9E,QAAQ+T,KAAOjP,EAAK9E,QAAQuT,YAAY,KAE7CzO,EAAK9E,QAAQ8T,KAAO,IACpBhP,EAAK9E,QAAQ+T,KAAO,KAGK,GAAzBjP,EAAK9E,QAAQ+S,SAAkB,CAC/B,IAAIiB,EAAiB,CACjB,CACIrQ,MAAO,WACPD,OAAQ,SAASZ,EAAKxb,EAAGN,EAAG+b,KAG5Bc,SAAU,CAAC,CACPF,MAAS,IACTD,OAAQ,SAASZ,EAAKxb,EAAGN,EAAG+b,GACxBN,QAAQpD,IAAI,YAAa0D,EAAU+B,EAAK9E,QAAQ8T,KAAMhP,EAAK9E,QAAQ+T,MACnE,IAAIE,EAAiB,CAACC,EAAOC,OAAOpR,EAAS,IACvBqR,EAAOD,OAAOpR,EAAS,KAC7CN,QAAQpD,IAAI,iBAAkB4U,GAE9BnP,EAAKuP,OAAO,IAAK,CAACC,SAAY,IAAKC,UAAaN,MAGxD,CACItQ,MAAS,IACTD,OAAQ,SAASZ,EAAKxb,EAAGN,EAAG+b,GACxBN,QAAQpD,IAAI,YAAa0D,EAAU+B,EAAK9E,QAAQ8T,KAAMhP,EAAK9E,QAAQ+T,MACnE,IAAIE,EAAiB,CAACC,EAAOC,OAAOpR,EAAS,IACvBqR,EAAOD,OAAOpR,EAAS,KAC7CN,QAAQpD,IAAI,iBAAkB4U,GAE9BnP,EAAKuP,OAAO,IAAK,CAACC,SAAY,IAAKC,UAAaN,MAIxD,CACItQ,MAAS,IACTD,OAAQ,SAASZ,EAAKxb,EAAGN,EAAG+b,GACxBN,QAAQpD,IAAI,YAAa0D,EAAU+B,EAAK9E,QAAQ8T,KAAMhP,EAAK9E,QAAQ+T,MACnE,IAAIE,EAAiB,CAACC,EAAOC,OAAOpR,EAAS,IACvBqR,EAAOD,OAAOpR,EAAS,KAC7CN,QAAQpD,IAAI,iBAAkB4U,GAE9BnP,EAAKuP,OAAO,IAAK,CAACC,SAAY,IAAKC,UAAaN,MAIxD,CACItQ,MAAS,IACTD,OAAQ,SAASZ,EAAKxb,EAAGN,EAAG+b,GACxBN,QAAQpD,IAAI,YAAa0D,EAAU+B,EAAK9E,QAAQ8T,KAAMhP,EAAK9E,QAAQ+T,MACnE,IAAIE,EAAiB,CAACC,EAAOC,OAAOpR,EAAS,IACvBqR,EAAOD,OAAOpR,EAAS,KAC7CN,QAAQpD,IAAI,iBAAkB4U,GAE9BnP,EAAKuP,OAAO,IAAK,CAACC,SAAY,IAAKC,UAAaN,OAKxDxQ,UAAU,IAId+Q,EAAW,CACX,CACI7Q,MAAO,cACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK2P,WAAWntB,IAEpBmc,UAAU,GAEd,CACIE,MAAO,cACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrByb,QAAQpD,IAAI,qCACZoD,QAAQpD,IAAI,gCAAkC/X,IAElDuc,SAAU,CACN,CACIF,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK4P,WAAW,IAAKptB,KAG7B,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK4P,WAAW,IAAKptB,KAI7B,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK4P,WAAW,IAAKptB,KAI7B,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK4P,WAAW,IAAKptB,OAKrC,CACIqc,MAAO,gBACPD,OAAQ,SAASZ,EAAKxb,EAAGN,KAGzB6c,SAAU,CACN,CACIF,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,GAAI,KAG9C,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,GAAI,KAI9C,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,GAAI,KAI9C,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,GAAI,OAKtD,CACIqc,MAAO,eACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrByb,QAAQpD,IAAI,KAAM/X,IAGtBuc,SAAU,CACN,CACIF,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,EAAG,KAI7C,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,EAAG,KAG7C,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,EAAG,KAG7C,CACIqc,MAAO,IACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrB8d,EAAK6P,wBAAwB,IAAKrtB,EAAG,QAOzDwd,EAAK8P,gBAAkBxT,EAAYoT,GACnC1P,EAAK+P,sBAAwBzT,EAAY4S,QAGzCvR,QAAQpD,IAAI,sBACZyF,EAAK8P,gBAAkB,aAGhB1S,IAAG4S,MAAMC,aAApB,IAIIC,EAAgB,KAChBC,EAAc,KACdC,GAAuB,EAEvBhB,EAAShS,IAAG4S,MAAMK,SACrBpM,OAAO,CAAC,EAAEjE,EAAK9E,QAAQ8T,OAAOpL,MAAM,CAAC,EAAE5D,EAAK9E,QAAQ8T,OACjDM,EAASlS,IAAG4S,MAAMK,SACrBpM,OAAO,CAAC,EAAEjE,EAAK9E,QAAQ+T,OAAOrL,MAAM,CAAC,EAAG5D,EAAK9E,QAAQ+T,OAElDqB,EAAQtQ,EAAKsQ,MAAQ,CACrBjL,MAAQ,GACRiC,MAAQ,IAiXZ,SAASiJ,EAAU1oB,GACf,OAAOmJ,KAAK0Y,KAAK7hB,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAG5C,SAAS2oB,EAAgBhuB,GACrB,IAAIiuB,EAAWjuB,EACXkuB,EAAaluB,EAAE0mB,SAGnB,GAAmB,OAAfwH,GAICluB,EAAE4lB,OAAP,CAIA,IAAIuI,EAAI,GAAGF,EAAS5oB,EAAI6oB,EAAW7oB,KAAM4oB,EAAS3oB,EAAI4oB,EAAW5oB,IAEjE,GAAY,GAAR6oB,EAAE,IAAmB,GAARA,EAAE,GAAnB,CAIA,IAAIrF,EAAI,GADRqF,EAAI,CAACA,EAAE,GAAKJ,EAAUI,GAAIA,EAAE,GAAKJ,EAAUI,KAC/B,GAAIA,EAAE,IAEdC,EAAW,CAACpuB,EAAEuF,OAAS4oB,EAAE,GAAInuB,EAAEuF,OAAS4oB,EAAE,IAE1CE,EAAO,KACED,EAAS,GArBL,GAqBwBD,EAAE,GAAKrF,EAAE,IAAM,GAAK,KAAOsF,EAAS,GArB5D,GAqB+ED,EAAE,GAAKrF,EAAE,IAAM,GAAK,IACvGsF,EAAS,GAAM,IAAOA,EAAS,GAAM,KACrCA,EAAS,GAvBL,GAuBwBD,EAAE,GAAKrF,EAAE,IAAM,GAAK,KAAOsF,EAAS,GAvB5D,GAuB+ED,EAAE,GAAKrF,EAAE,IAAM,GAE/GlO,IAAGK,OAAOpY,MAAMoZ,KAAK,IAAKoS,KAG9B,SAASC,EAAetuB,GACpB,MAAqB,YAAdA,EAAEulB,UACY,YAAdvlB,EAAEulB,UACY,iBAAdvlB,EAAEulB,UACY,cAAdvlB,EAAEulB,UACY,cAAdvlB,EAAEulB,UACY,YAAdvlB,EAAEulB,UACY,eAAdvlB,EAAEulB,SAwUb,SAASgJ,EAAaC,EAAgBxuB,EAAGwtB,GACrC,GAAIgB,EAAejtB,eAAevB,EAAEmX,KAAM,CACtC,IAAIlM,EAAMwjB,WAAWD,EAAexuB,EAAEmX,MAEtC,OAAInL,MAAMf,GAGCujB,EAAexuB,EAAEmX,KAIjBqW,EAAMviB,GAGjB,MAAO,QA9uBfuS,EAAKkR,cAAgB,CACjBC,WAAc,EACdC,aAAgB,EAChBC,WAAc,EACdC,cAAiB,GACjB1O,SAAY,EACZ2O,MAAS,IAGbvR,EAAKwR,kBAAoB,CACrBC,kBAAqB,OACrBC,iBAAoB,OACpBC,mBAAsB,OACtBC,iBAAoB,OACpBC,aAAgB,OAChBC,uBAA0B,OAC1BC,oBAAuB,QAG3B/R,EAAKgS,YAAc,YACnBhS,EAAKiS,aAAe,GACpBjS,EAAKkS,UAAYlS,EAAK9E,QAAQiT,WAE9BnO,EAAKmS,MAAO,EACZnS,EAAKoS,KAAO,GACZpS,EAAK2I,WAAa,GAElBrU,MAAMxQ,UAAU2P,OAAS,SAAUnH,GAE/B,IAAKA,EACD,OAAO,EAGX,GAAIjH,KAAKsG,QAAUW,EAAMX,OACrB,OAAO,EAEX,IAAK,IAAIzJ,EAAI,EAAGC,EAAEkD,KAAKsG,OAAQzJ,EAAIC,EAAGD,IAElC,GAAImD,KAAKnD,aAAcoS,OAAShI,EAAMpK,aAAcoS,OAEhD,IAAKjP,KAAKnD,GAAGuR,OAAOnH,EAAMpK,IACtB,OAAO,OAEV,GAAImD,KAAKnD,IAAMoK,EAAMpK,GAEtB,OAAO,EAGf,OAAO,GAIX8d,EAAKqS,oBAAsB,SAASC,EAAWtE,GAE3C,IAAI9S,EAAU,CACEsU,SAAY,GACZ/sB,KAAQ,QACRyjB,UAAa,GACbmD,cAAiBrJ,EAAK9E,QAAQmO,cAC9BkJ,aAAe,EACfpN,KAAQ,GACRL,qBAAuB,GAGvC,GAAwB,GAApB1R,UAAUzH,OACV,IAAK,IAAIojB,KAAUf,EACX9S,EAAQnX,eAAegrB,KACvB7T,EAAQ6T,GAAUf,EAAce,IAI5CpR,QAAQpD,IAAI,gBAAiBW,EAAQiK,MACrC,IAAIqN,EAAK,IAAI9N,EAASxJ,EAAQsU,SAAU8C,EAAWpX,EAAQzY,MAC3D+vB,EAAG1N,oBAAsB5J,EAAQ4J,oBAEjC,IAAI2N,EAAUD,EAAG3I,sBAEjB,GAAiC,IAA7B3O,EAAQgL,UAAUva,OAGlB,GAA2B,UAAvBqU,EAAK9E,QAAQwT,OAAoB,CACjC,IAEIgE,GAFS,IAAI5F,GAEY6F,sBAAsBH,EAAG/M,WACtDvK,EAAQgL,UAAY,GACpB,IAAK,IAAIhkB,EAAI,EAAGA,EAAIwwB,EAAgBxF,MAAOhrB,IACvCgZ,EAAQgL,UAAU7d,KAAK,CAACqqB,EAAgB7qB,EAAE3F,GAAIwwB,EAAgB5qB,EAAE5F,UAEpEgZ,EAAQgL,UAAYqE,EAAoBkI,EAAQhN,WAcxD,OAVAgN,EAAUA,EAAQ1J,iBACjB7D,QAAQhK,EAAQiK,MAChBc,aAAa,aAAc/K,EAAQgL,WACnCkD,UAAU,EAAGlO,EAAQmO,eACrB5C,iBACAK,iBACAoB,mBACAkC,mBACAhE,yBAKLpG,EAAKuP,OAAS,SAAS+C,EAAWtE,GAC9B,IAAIyE,EAAUzS,EAAKqS,oBAAoBC,EAAWtE,GAqBlD,GAHyB,IAArB5a,UAAUzH,SACVqiB,EAAgB,IAEhB,eAAgBA,EAAe,CAE/B,IAAI4E,EAAW5S,EAAK6S,iBAAiBJ,EAASzE,EAAcrF,YAE5D3I,EAAK2I,WAAa3I,EAAK2I,WAAW7V,OAAO8f,GAW7C,MARI,cAAe5E,EACfhO,EAAK8S,WAAWL,EAAS,CAAChD,UAAWzB,EAAcyB,UACzBsD,YAAY,IACjC,gBAAiB/E,EACtBhO,EAAK8S,WAAWL,EAAS,CAACF,YAAavE,EAAcuE,cAErDvS,EAAK8S,WAAWL,EAAS,CAACM,WAAY/E,EAAc+E,aAEjDN,GAGXzS,EAAK4P,WAAa,SAAS3G,EAAU+J,GAGjC,IAAI/L,EAAM+L,EAAc/L,IAEpBjG,EAAajB,EAAa2B,sBAAsBuF,EAAIxB,WACpDS,EAAYe,EAAIV,aAAa,cAC7BiJ,EAAWvI,EAAItC,IACfQ,EAAO8B,EAAIT,UAEXyM,EAAaD,EAAcrZ,IAE3BuZ,EAAgBlS,EAChBmS,EAAc3D,EAASviB,MAAM,EAAEgmB,EAAW,GAAMhK,EAAWuG,EAASviB,MAAMgmB,GAE9EtV,QAAQpD,IAAI,eAAgB4Y,GAE5BxV,QAAQpD,IAAI,QAAS4K,GACrBA,EAAKiO,OAAOH,EAAW,EAAG,EAAGpW,IAAO1R,QACpC,IAAIkoB,EAAenN,SAGZlG,EAAKoS,KAAKnL,EAAIrK,KACRoD,EAAKuP,OAAO2D,EAAe,CAAC1D,SAAY2D,EAC5BjN,UAAamN,EACblO,KAAQA,EACR4N,YAAc,KAI3C/S,EAAK6P,wBAA0B,SAAS5G,EAAU+J,EAAeM,GAG7D,IAAIrM,EAAM+L,EAAc/L,IAEpBjG,EAAajB,EAAa2B,sBAAsBuF,EAAIxB,WACpDS,EAAYe,EAAIV,aAAa,cAC7BiJ,EAAWvI,EAAItC,IACfQ,EAAO8B,EAAIT,UAEXyM,EAAaD,EAAcrZ,IAAM2Z,EAEjCJ,EAAgBlS,EAAW/T,MAAM,EAAEgmB,GAAc,IAAMjS,EAAW/T,MAAMgmB,GACxEE,EAAc3D,EAASviB,MAAM,EAAEgmB,GAAehK,EAAWuG,EAASviB,MAAMgmB,GAE5EtV,QAAQpD,IAAI,eAAgB4Y,GAE5BhO,EAAKiO,OAAOH,EAAY,EAAGpW,IAAO1R,QAClC+a,EAAUkN,OAAOH,EAAY,EAAG/M,EAAU+M,EAAaK,EAAe,IAEtE,IAAIC,EAAUpO,EACVkO,EAAenN,EAEnBvI,QAAQpD,IAAI,aAAc2L,GAC1BvI,QAAQpD,IAAI,sBAAuB8Y,UAE5BrT,EAAKoS,KAAKnL,EAAIrK,KACRoD,EAAKuP,OAAO2D,EAAe,CAAC1D,SAAY2D,EAC5BjN,UAAamN,EACblO,KAAQoO,EACRR,YAAc,KAI3C/S,EAAK2P,WAAa,SAASxrB,GACvBwZ,QAAQpD,IAAI,cAAepW,GAE3B,IAAI8iB,EAAM9iB,EAAK8iB,IACXuM,EAAOvM,EAAIxB,UAAUthB,EAAKwV,KAGlB,GAAR6Z,IACAvM,EAAIxB,UAAUthB,EAAKwV,KAAO,EAC1BsN,EAAIxB,UAAU+N,GAAQ,GAG1B,IAAIxS,EAAajB,EAAa2B,sBAAsBuF,EAAIxB,WACpDS,EAAYe,EAAIV,aAAa,cAC7BiJ,EAAWvI,EAAItC,IACfQ,EAAO8B,EAAIT,UAEX0M,EAAgBlS,EAAW/T,MAAM,EAAG9I,EAAKwV,IAAI,GAAKqH,EAAW/T,MAAM9I,EAAKwV,KACxE0Z,EAAenN,EAAUjZ,MAAM,EAAG9I,EAAKwV,IAAI,GACtC7G,OAAOoT,EAAUjZ,MAAM9I,EAAKwV,MACjCwZ,EAAc3D,EAASviB,MAAM,EAAG9I,EAAKwV,IAAI,GAAK6V,EAASviB,MAAM9I,EAAKwV,KAClE4Z,EAAUpO,EAAKlY,MAAM,EAAG9I,EAAKwV,IAAI,GAC5B7G,OAAOqS,EAAKlY,MAAM9I,EAAKwV,aAEzBqG,EAAKoS,KAAKnL,EAAIrK,KACRoD,EAAKuP,OAAO2D,EAAe,CAAC1D,SAAY2D,EAC5BjN,UAAamN,EACblO,KAAQoO,EACPR,YAAc,IAExCpV,QAAQpD,IAAI,kBAAmB2Y,IASnClT,EAAK6S,iBAAmB,SAASJ,EAASgB,GAGtC,IAFA,IAAIb,EAAW,GAEN1wB,EAAI,EAAGA,EAAIuxB,EAAc9nB,OAAQzJ,IAAK,CAC3C,IAAI0mB,EAAU,CAACb,SAAU,WAAY5kB,MAAO,EAAGyZ,IAAKC,IAAO1R,OACvDoc,OAAQ,KAAMzT,OAAQ,MAE1B,GAA4D,mBAAxDlR,OAAOkB,UAAU6G,SAAStI,KAAKoxB,EAAcvxB,GAAG,KAChD,IAAK,IAAIoN,EAAI,EAAGA,EAAImjB,EAAQpN,MAAM1Z,OAAQ2D,IACtC,GAAI,SAAUmjB,EAAQpN,MAAM/V,IACpBmjB,EAAQpN,MAAM/V,GAAGsX,KAAKnT,OAAOggB,EAAcvxB,GAAG,IAAK,CACnD0mB,EAAQrB,OAASkL,EAAQpN,MAAM/V,GAC/B,YAKZ,IAASA,EAAI,EAAGA,EAAImjB,EAAQpN,MAAM1Z,OAAQ2D,IAClCmjB,EAAQpN,MAAM/V,GAAGqK,KAAO8Z,EAAcvxB,GAAG,KACzC0mB,EAAQrB,OAASkL,EAAQpN,MAAM/V,IAM3C,GAA4D,mBAAxD1M,OAAOkB,UAAU6G,SAAStI,KAAKoxB,EAAcvxB,GAAG,IAChD,IAASoN,EAAI,EAAGA,EAAImjB,EAAQpN,MAAM1Z,OAAQ2D,IAClC,SAAUmjB,EAAQpN,MAAM/V,IACpBmjB,EAAQpN,MAAM/V,GAAGsX,KAAKnT,OAAOggB,EAAcvxB,GAAG,MAC9C0mB,EAAQ9U,OAAS2e,EAAQpN,MAAM/V,SAK3C,IAASA,EAAI,EAAGA,EAAImjB,EAAQpN,MAAM1Z,OAAQ2D,IAClCmjB,EAAQpN,MAAM/V,GAAGqK,KAAO8Z,EAAcvxB,GAAG,KACzC0mB,EAAQ9U,OAAS2e,EAAQpN,MAAM/V,IAKrB,MAAlBsZ,EAAQrB,QAAoC,MAAlBqB,EAAQ9U,OAKtC8e,EAASvqB,KAAKugB,GAJVjL,QAAQpD,IAAI,iDAAkDqO,EAAS6K,EAAcvxB,IAO7F,OAAO0wB,GAGX5S,EAAK8S,WAAa,SAASY,EAATC,GAG+B,IAMzCC,EAAMC,EANmCC,EAAAH,EAFpBpB,mBAEoB,IAAAuB,KAAAC,EAAAJ,EADrBlE,iBACqB,IAAAsE,EADT,KACSA,EAAAC,EAAAL,EAArBZ,kBAAqB,IAAAiB,KAS7C,GAFArW,QAAQpD,IAAI,cAAewY,GAEV,MAAbtD,EAAmB,CAEnB,IAAIwE,EAAS,EACTC,EAAS,EACTC,EAAY,EAEhBT,EAASrO,MAAM+O,QAAQ,SAASjwB,GAC5B8vB,GAAU9vB,EAAK0D,EACfqsB,GAAU/vB,EAAK2D,EACfqsB,GAAa,IAGbA,EAAY,GAGZT,EAASrO,MAAM+O,QAAQ,SAASjwB,GAC5BA,EAAK0D,EAAI1D,EAAK0D,EAAI4nB,EAAU,GAAKwE,EAASE,EAC1ChwB,EAAK2D,EAAI3D,EAAK2D,EAAI2nB,EAAU,GAAKyE,EAASC,EAE1ChwB,EAAK+iB,GAAK/iB,EAAK0D,EACf1D,EAAKgjB,GAAKhjB,EAAK2D,IA+B3B,OA1BIyqB,IAEIqB,EADA5T,EAAKsQ,MAAMjL,MAAM1Z,OAAS,EACnByR,IAAGzJ,IAAIqM,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAK,OAAOA,EAAEqF,KAEnD,EAEXgsB,EAAOzW,IAAGnM,IAAIyiB,EAASrO,MAAMzE,IAAI,SAASpe,GAAK,OAAOA,EAAEqF,KAExD6rB,EAASrO,MAAM+O,QAAQ,SAASjwB,GAC5BA,EAAK0D,GAAM+rB,EAAOC,EAAQ,GAC1B1vB,EAAK+iB,IAAO0M,EAAOC,KAI3BH,EAASrO,MAAM+O,QAAQ,SAASjwB,GAC5BA,EAAK8iB,IAAMyM,IAGf1T,EAAKoS,KAAKsB,EAAS9W,KAAO8W,EAC1B1T,EAAKqU,mBAELrU,EAAKsU,SAEDvB,GACA/S,EAAK+S,aAEFW,GAgDX1T,EAAKuU,cAAgB,SAASC,EAAcC,GAExC,IAAIC,EAAW1U,EAAK9E,QAAQ0T,mBAMxB1T,EAAU,CAACiK,KAJJnF,EAAKsQ,MAAMjL,MACrBC,OAAO,SAAS9iB,GAAK,MAAqB,cAAdA,EAAE+iB,WAC9B3E,IAAI,SAASpe,GAAK,OAAOA,EAAEoa,OAGxB+X,EAAa3U,EAAKqS,oBAAoBmC,EAActZ,GAEpD0Z,EAASC,EAASxX,UAAU,WAAW1P,KAAKgnB,EAAWtP,MAAOyP,GAEjD,IAAbJ,EACAE,EAAOnW,KAAK,YAAa,SAASjc,GAC9B,MAAO,aAAe,CAACA,EAAEqF,EAAGrF,EAAEsF,GAAK,MAGvC8sB,EAAOG,aAAatW,KAAK,YAAa,SAASjc,GAC3C,MAAO,aAAe,CAACA,EAAEqF,EAAGrF,EAAEsF,GAAK,MAAQ4sB,SAASA,GAG5D,IAAIpN,EAAQ0N,EAAS3X,UAAU,aAC9B1P,KAAKgnB,EAAWrN,MAAMhC,OAAOwL,GAAiBmE,GAC3CC,EAAWlV,EAAKmV,eAAeP,EAAOtX,SACzCmB,KAAK,YAAa,SAASjc,GACxB,YAAkB,IAAPA,EAAEqF,QAAkC,IAAPrF,EAAEsF,EAC/B,aAAe,CAAC,EAAG,GAAK,IAExB,KA2Cf,GAvCiB,IAAb4sB,EACAE,EAAOQ,OAAOC,SAEdT,EAAOQ,OAAOL,aACbtW,KAAK,YAAa,SAASjc,GACxB,YAAkB,IAAPA,EAAEqF,QAAkC,IAAPrF,EAAEsF,EAC/B,aAAe,CAAC,EAAG,GAAK,IAExB,KAGnB8sB,EAAOnX,OAAO,QACb6X,KAAK9E,GAENxQ,EAAKsQ,MAAMjL,MAAQuP,EAAOjnB,OAC1BqS,EAAKuV,cACLvV,EAAK+S,WAAW2B,GAqBhBpN,EAAM8N,OAAOC,SAEI,IAAbX,EAAgB,CAChBpN,EACC7I,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAO1f,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAOzf,IACzC2W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOjM,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOhM,IAE3BkY,EAAKwV,eAAelO,EAAMhK,SACzC0C,EAAKsQ,MAAMhJ,MAAQA,EAAM3Z,OAEzBqS,EAAKuV,mBAELjO,EAAMyN,aACLtW,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAO1f,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAOzf,IACzC2W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOjM,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOhM,IACzC4sB,SAASA,GACTryB,KAvCL,SAAgB0yB,EAAYU,GACE,IAAtBV,EAAWjnB,QAAgB4nB,WAAWD,EAAUf,GACpD,IAAI/wB,EAAI,EACRoxB,EACCO,KAAK,aAAe3xB,IACpB2xB,KAAK,MAAO,aAAoB3xB,GAAG8xB,EAAS5jB,MAAMxM,KAAM+N,cAG7D,WACmB4M,EAAKwV,eAAelO,EAAMhK,SACzC0C,EAAKsQ,MAAMhJ,MAAQA,EAAM3Z,OAEzBqS,EAAKuV,mBAEsB,IAAhBd,GACPA,MA2BS,IAAbC,EACAQ,EACCzW,KAAK,YAAa,SAASjc,GACxB,YAAkB,IAAPA,EAAEqF,QAAkC,IAAPrF,EAAEsF,EAC/B,aAAe,CAACtF,EAAEqF,EAAGrF,EAAEsF,GAAK,IAE5B,KAGfotB,EAASH,aACRtW,KAAK,YAAa,SAASjc,GACxB,YAAkB,IAAPA,EAAEqF,QAAkC,IAAPrF,EAAEsF,EAC/B,aAAe,CAACtF,EAAEqF,EAAGrF,EAAEsF,GAAK,IAE5B,MAMvBkY,EAAKqU,iBAAmB,WAKpB,IAAK,IAAIzX,KAFToD,EAAKsQ,MAAMjL,MAAQ,GACnBrF,EAAKsQ,MAAMhJ,MAAQ,GACHtH,EAAKoS,KACjBpS,EAAKsQ,MAAMjL,MAAQrF,EAAKsQ,MAAMjL,MAAMvS,OAAOkN,EAAKoS,KAAKxV,GAAKyI,OAC1DrF,EAAKsQ,MAAMhJ,MAAQtH,EAAKsQ,MAAMhJ,MAAMxU,OAAOkN,EAAKoS,KAAKxV,GAAK0K,OAQ9D,IAFA,IAAIqO,EAAc,GAETzzB,EAAI,EAAGA,EAAI8d,EAAKsQ,MAAMjL,MAAM1Z,OAAQzJ,IACzCyzB,EAAY3V,EAAKsQ,MAAMjL,MAAMnjB,GAAG0a,KAAOoD,EAAKsQ,MAAMjL,MAAMnjB,GAO5D,IALA8d,EAAKsQ,MAAMhJ,MAAM8M,QAAQ,SAAS5vB,GAC9BA,EAAK+iB,OAASoO,EAAYnxB,EAAK+iB,OAAO3K,KACtCpY,EAAKsP,OAAS6hB,EAAYnxB,EAAKsP,OAAO8I,OAGrC1a,EAAI,EAAGA,EAAI8d,EAAK2I,WAAWhd,OAAQzJ,IAGpC,GAAM8d,EAAK2I,WAAWzmB,GAAG4R,OAAO8I,OAAO+Y,EAAvC,CAQA,GAHA3V,EAAK2I,WAAWzmB,GAAGqlB,OAASoO,EAAY3V,EAAK2I,WAAWzmB,GAAGqlB,OAAO3K,KAClEoD,EAAK2I,WAAWzmB,GAAG4R,OAAS6hB,EAAY3V,EAAK2I,WAAWzmB,GAAG4R,OAAO8I,KAE/B,iBAA/BoD,EAAK2I,WAAWzmB,GAAG6lB,SAQnB,IANA,IAAI6N,EAAY5V,EAAKsQ,MAAMhJ,MAAMhC,OAAO,SAAS9iB,GAC7C,OAASA,EAAE+kB,QAAUvH,EAAK2I,WAAWzmB,GAAGqlB,QAAU/kB,EAAE+kB,QAAUvH,EAAK2I,WAAWzmB,GAAG4R,QACzEtR,EAAEsR,QAAUkM,EAAK2I,WAAWzmB,GAAGqlB,QAAU/kB,EAAEsR,QAAUkM,EAAK2I,WAAWzmB,GAAGqlB,SAC1D,QAAd/kB,EAAEulB,WAGLzY,EAAI,EAAGA,EAAIsmB,EAAUjqB,OAAQ2D,IAAK,CACvC,IAAIumB,EAAY7V,EAAKsQ,MAAMhJ,MAAM5Y,QAAQknB,EAAUtmB,IACnD0Q,EAAKsQ,MAAMhJ,MAAM8L,OAAOyC,EAAW,GAI3CvF,EAAMhJ,MAAMjf,KAAK2X,EAAK2I,WAAWzmB,SArB7Byb,QAAQpD,IAAI,aAAcyF,EAAK2I,WAAWzmB,KAyBtD8d,EAAK8V,SAAW,SAAkBC,GAK9BA,EAAKzO,MAAM8M,QAAQ,SAAS4B,GACG,iBAAhBA,EAAMzO,SAAoByO,EAAMzO,OAASwO,EAAK1Q,MAAM2Q,EAAMzO,SAC1C,iBAAhByO,EAAMliB,SAAoBkiB,EAAMliB,OAASiiB,EAAK1Q,MAAM2Q,EAAMliB,WAMrEkM,EAAKsQ,MAAMjL,MAAM1Z,OAAS,GAC1BioB,KAAOxW,IAAGzJ,IAAIqM,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAI,OAAOA,EAAEqF,KACzDouB,KAAO7Y,IAAGzJ,IAAIqM,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAI,OAAOA,EAAEsF,OAEzD8rB,KAAO,EACPqC,KAAO,GAGXF,EAAK1Q,MAAM+O,QAAQ,SAAS4B,GAClBA,EAAM/O,IAAIrK,OAAOoD,EAAKoS,OACxBpS,EAAKoS,KAAK4D,EAAM/O,IAAIrK,KAAOoZ,EAAM/O,KAGrC+O,EAAMnuB,GAAK+rB,KAGXoC,EAAM9O,IAAM0M,OAIhB5wB,EAAI,IAAI0hB,EAAS,GAAG,IACpB1hB,EAAEqiB,MAAQ0Q,EAAK1Q,MACfriB,EAAEskB,MAAQyO,EAAKzO,MAGftH,EAAKqU,mBAELrU,EAAKsU,SACLtU,EAAK+S,cAGT/S,EAAKkW,gBAAkB,SAAyBH,GAE5C/V,EAAKiS,aAAe8D,GAGxB/V,EAAKmW,oBAAsB,SAASC,GAChC,IAAIC,EAAK,IAAIvT,EAAYsT,GACzBpW,EAAKiS,aAAeoE,EAAG5S,WACvBzD,EAAKsW,kBAAkB,WAG3BtW,EAAKuW,WAAa,WACdvW,EAAKsQ,MAAMjL,MAAQ,GACnBrF,EAAKsQ,MAAMhJ,MAAQ,GAEnBtH,EAAKoS,KAAO,GACZpS,EAAK2I,WAAa,GAElB3I,EAAKsU,UAGTtU,EAAK3L,OAAS,WACX,IAAI1G,EAAO,CAACykB,KAAQpS,EAAKoS,KAAMzJ,WAAc3I,EAAK2I,YASlD,OARsBJ,KAAKC,UAAU7a,EAAM,SAASlK,EAAKN,GAEpD,MAAW,OAAPM,OACA,EAEON,GAEb,OAIN6c,EAAKwW,SAAW,SAASC,GACrB,IAAIrE,EAAMzJ,EAEV,IACI,IAAIhb,EAAO4a,KAAK7d,MAAM+rB,GACtBrE,EAAOzkB,EAAKykB,KACZzJ,EAAahb,EAAKgb,WACpB,MAAM+N,GACJ,MAAMA,EAGV,IAAK,IAAI9Z,KAAOwV,EACU,OAAlBA,EAAKxV,GAAKlP,MACV1K,EAAI,IAAI0hB,EAER1hB,EAAE2hB,IAAMyN,EAAKxV,GAAK+H,IAClB3hB,EAAEge,WAAaoR,EAAKxV,GAAKoE,WACzBhe,EAAE+hB,SAAWqN,EAAKxV,GAAKmI,SACvB/hB,EAAEyiB,UAAY2M,EAAKxV,GAAK6I,UACxBziB,EAAE4Z,IAAMwV,EAAKxV,GAAKA,IAClB5Z,EAAE4hB,WAAawN,EAAKxV,GAAKgI,WACzB5hB,EAAEqiB,MAAQ+M,EAAKxV,GAAKyI,MACpBriB,EAAEskB,MAAQ8K,EAAKxV,GAAK0K,MACpBtkB,EAAE+iB,UAAYqM,EAAKxV,GAAKmJ,UACxB/iB,EAAEwf,SAAW4P,EAAKxV,GAAK4F,SACvBxf,EAAEiiB,YAAcmN,EAAKxV,GAAKqI,YAC1BjiB,EAAEgiB,gBAAkBoN,EAAKxV,GAAKoI,kBAE9BhiB,EAAI,IAAI2zB,aACR3zB,EAAE8K,KAAOskB,EAAKxV,GAAK9O,KACnB9K,EAAEqiB,MAAQ+M,EAAKxV,GAAKyI,MACpBriB,EAAE4Z,IAAMwV,EAAKxV,GAAKA,KAGtBoD,EAAK8S,WAAW9vB,GAAG,GAGvB2lB,EAAWyL,QAAQ,SAAS5vB,GACxBwb,EAAK2I,WAAWtgB,KAAK7D,KAGzBwb,EAAKqU,mBACLrU,EAAKsU,UAGTtU,EAAK4W,QAAU,WACX,GAAgC,MAA5B5W,EAAK9E,QAAQuT,YAAjB,CAGA,IAAIQ,EAAO7R,IAAGK,OAAOsQ,GAAS5pB,OAAO0yB,aACjC7H,EAAO5R,IAAGK,OAAOsQ,GAAS5pB,OAAO2yB,YAErC9W,EAAK9E,QAAQ8T,KAAOA,EACpBhP,EAAK9E,QAAQ+T,KAAOA,EAGpBG,EAAOxL,MAAM,CAAC,EAAGoL,IAAO/K,OAAO,CAAC,EAAG+K,IACnCM,EAAO1L,MAAM,CAAC,EAAGqL,IAAOhL,OAAO,CAAC,EAAGgL,IAGnCjP,EAAK+W,OAAOlvB,EAAEunB,GACbtnB,EAAEwnB,GAEHtP,EAAKgX,QAAQnvB,EAAEunB,GACdtnB,EAAEwnB,GAEHtP,EAAK+S,aAEA/S,EAAK9E,QAAQ4T,mBAUlBmI,EAAIxY,KAAK,QAASuQ,GACjBvQ,KAAK,SAAUwQ,KAqBpBjP,EAAKkX,gBAAkB,SAAShT,GAChB2Q,EAASxX,UAAU,WAAWI,OAAO,0BAC3CG,MAAM,OAAQsG,IAGxBlE,EAAKsW,kBAAoB,SAASa,GACXtC,EAASxX,UAAU,uBAEzBG,QAAQ4Z,IAAO9yB,SAAS,GACxBma,KAAK,IAAK,SAASjc,GAAK,OAAOA,EAAEuF,SAEjC8sB,EAASxX,UAAU,WAClBwX,EAASxX,UAAU,WAAWA,UAAU,UADtD,IAEIgI,EAAQwP,EAASxX,UAAU,WAAWI,OAAO,0BAIjD,GAHAuC,EAAKgS,YAAcmF,EAGG,YAAlBA,EAA8B,CAC9B,IAAInH,EAAQ5S,IAAG4S,MAAMqH,UACpBzT,MAAM,CAAC,UAAW,UAAW,UAAW,UAAW,YACnDK,OAAO,CAAC,IAAI,IAAI,IAAI,IAAI,MACzBoB,EAAMzH,MAAM,OAAQ,SAASpb,GACzB,OAAOwtB,EAAMxtB,EAAEC,aAGhB,GAAsB,aAAlB00B,EAA+B,CAClCnH,EAAQ5S,IAAG4S,MAAMsH,aACpBrT,OAAO,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MAChCL,MAAM,CAAC,aAAc,UAAW,UAAW,cACrC,YAAa,YAAa,gBAE1ByB,EAAMzH,MAAM,OAAQ,SAASpb,GACzB,OAAOwtB,EAAMxtB,EAAE8jB,iBAGvB,GAAsB,aAAlB6Q,EACP9R,EAAMzH,MAAM,OAAQ,SAASpb,GAMzB,OALY4a,IAAG4S,MAAMK,SACpBzM,MAAM,CAAC,UAAW,UAAW,YAC7B2T,YAAYna,IAAGoa,gBACfvT,OAAO,CAAC,EAAG,GAAKzhB,EAAEykB,IAAIlB,UAAY,GAAK,EAAGvjB,EAAEykB,IAAIlB,WAE1CiK,CAAMxtB,EAAEmX,YAEhB,GAAsB,UAAlBwd,EAA4B,CAGnC,QAAgC,IAArBnX,EAAKiS,cACZ,WAAYjS,EAAKiS,cAClB,UAAWjS,EAAKiS,aACXjC,EAAQ5S,IAAG4S,MAAMK,SACpBkH,YAAYna,IAAGoa,gBACfvT,OAAOjE,EAAKiS,aAAahO,QACzBL,MAAM5D,EAAKiS,aAAarO,OAG7ByB,EAAMzH,MAAM,OAAQ,SAASpb,GACzB,YAAgC,IAArBwd,EAAKiS,cACZjS,EAAKiS,aAAaluB,eAAe,eAIjCic,EAAKiS,aAAavO,YAAY3f,eAAevB,EAAEoiB,aAC/C5E,EAAKiS,aAAavO,YAAYlhB,EAAEoiB,YAAY7gB,eAAevB,EAAEmX,KAItDoX,EADc/Q,EAAKiS,aAAavO,YAAYlhB,EAAEoiB,YACjBpiB,EAAGwtB,GAChChQ,EAAKiS,aAAavO,YAAY3f,eAAe,IAE7CgtB,EADc/Q,EAAKiS,aAAavO,YAAY,IACflhB,EAAGwtB,GAGpC,QAdI,YAiDvBnuB,OAAO41B,iBAAiB,SAAUzX,EAAK4W,SAAS,GAEhD5W,EAAK+W,OAAS3Z,IAAGsa,SAASC,OACrBC,YAAY,CAAC,GAAI,KACjB/vB,EAAEunB,GACFtnB,EAAEwnB,GACF5R,GAAG,YA4ER,WACI,IAAIvZ,EAAO0wB,EAASxX,UAAU,WAAWA,UAAU,gBACnDlZ,EAAKmxB,KAAK,SAAS9yB,GACXA,EAAEsC,UAAW,EACbtC,EAAEq1B,oBAAqB,IAE/B1zB,EAAKqZ,QAAQ4Z,IAAOtyB,UAAU,KAjF7B4Y,GAAG,OAoFR,WACIoa,EAAIrZ,KAAK,YACA,aAAerB,IAAGkB,MAAMyZ,UAAY,WAAkB3a,IAAGkB,MAAM0R,MAAQ,OApFpF5S,IAAGK,OAAOsQ,GAAStQ,OAAO,OAAO4X,SAEjC,IAAI4B,EAAM7Z,IAAGK,OAAOsQ,GACnBtP,KAAK,WAAY,GACjBf,GAAG,gBAAiBsa,GACpBta,GAAG,cAAeua,GAClB3C,KAAK,WAAajwB,KAAK6yB,UACvB3a,OAAO,WACPkB,KAAK,QAASuB,EAAK9E,QAAQ8T,MAC3BvQ,KAAK,SAAUuB,EAAK9E,QAAQ+T,MAC5BxQ,KAAK,QAAS,cAEfuB,EAAK9E,QAAQ+b,IAAMA,EAEnB,IAAIkB,EAAWlB,EAAI1Z,OAAO,SACzBG,GAAG,YAlDJ,WACI,GAAKwS,EAAL,CAEA,IAAIkI,EAAOhb,IAAGe,MAAM2Z,EAAI3zB,QAExBQ,EACC8Z,KAAK,KAAMyR,EAAcroB,GACzB4W,KAAK,KAAMyR,EAAcpoB,GACzB2W,KAAK,KAAM2Z,EAAK,IAChB3Z,KAAK,KAAM2Z,EAAK,OA0CpB1a,GAAG,YAvDJ,cAwDCA,GAAG,UAvCJ,WACQwS,IAEKE,GACDzrB,EACC8Z,KAAK,QAAS2Y,IAAOxyB,iBAI9ByzB,MAgCArY,EAAK9E,QAAQyT,wBACbwJ,EAAS91B,KAAK2d,EAAK+W,QAEnB/W,EAAK9E,QAAQ+S,UACbkK,EAASza,GAAG,cAAesC,EAAK+P,uBAapC,IAAIhrB,EAAQozB,EAAS5a,OAAO,KAC3B+a,MAAM,WAAa,MAAO,CAACxzB,UAAU,EAAO+yB,oBAAoB,KAChEpZ,KAAK,QAAS2Y,IAAOryB,OAElB+yB,EAAMK,EAAS5a,OAAO,SACtByX,EAAW8C,EAAIva,OAAO,SACtBsX,EAAWiD,EAAIva,OAAO,SAE1ByC,EAAKgX,QAAU5Z,IAAG6Z,IAAIlyB,QACT8C,EAAEunB,GACFtnB,EAAEwnB,GACH5R,GAAG,aAAc,SAASlb,GACVqyB,EAASxX,UAAU,WAAWA,UAAU,gBAC9CiY,KAAK,SAAS9yB,GAAKA,EAAEq1B,mBAAqBU,GAAe/1B,EAAEsC,aAErE4Y,GAAG,QAAS,WACT,IAAIkX,EAASC,EAASxX,UAAU,WAAWA,UAAU,gBACjDmb,EAASpb,IAAGkB,MAAMxK,OAAO0kB,SAE7B5D,EAAOpX,QAAQ4Z,IAAOtyB,SAAU,SAAStC,GACrC,OAAOA,EAAEsC,SAAWkb,EAAK9E,QAAQiT,YAAc3rB,EAAEq1B,oBAChDW,EAAO,GAAG,IAAMh2B,EAAEqF,GAAKrF,EAAEqF,EAAI2wB,EAAO,GAAG,IACpCA,EAAO,GAAG,IAAMh2B,EAAEsF,GAAKtF,EAAEsF,EAAI0wB,EAAO,GAAG,QAGlD9a,GAAG,WAAY,WACZN,IAAGkB,MAAMxK,OAAO2kB,QAChBrb,IAAGK,OAAOpY,MAAMhD,KAAK+a,IAAGkB,MAAMxK,UAG3C/O,EAAM1C,KAAK2d,EAAKgX,SACXtZ,GAAG,kBAAmB,MACtBA,GAAG,mBAAoB,MACvBA,GAAG,kBAAmB,MACtBA,GAAG,iBAAkB,MAC1B3Y,EAAM0Y,OAAO,eAAeG,MAAM,SAAU,QAgB9CoC,EAAK0Y,wBAA0B,WAK3B,GAAgC,IAA5B1Y,EAAKsQ,MAAMjL,MAAM1Z,OACjB,MAAO,CAACosB,UAAa,CAAC,EAAE,GAAI/H,MAAS,GAGzC,IAAI6D,EAAOzW,IAAGnM,IAAI+O,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAI,OAAOA,EAAEqF,KACzD8wB,EAAOvb,IAAGnM,IAAI+O,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAI,OAAOA,EAAEsF,KAEzD8rB,EAAOxW,IAAGzJ,IAAIqM,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAI,OAAOA,EAAEqF,KACzDouB,EAAO7Y,IAAGzJ,IAAIqM,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAI,OAAOA,EAAEsF,KAEzD8wB,EAAYxb,IAAGzJ,IAAIqM,EAAKsQ,MAAMjL,MAAMzE,IAAI,SAASpe,GAAK,OAAOA,EAAEuF,UAG/D8wB,EAAWjF,EAAOC,EAClBiF,EAAY7C,EAAO0C,EAGnBI,EAAa/Y,EAAK9E,QAAQ8T,MAAQ6J,EAAW,GAC7CG,EAAchZ,EAAK9E,QAAQ+T,MAAQ6J,EAAY,GAI/CG,EAC8D,GADnDjoB,KAAKC,IAAI8nB,EAAYC,EACZhZ,EAAK9E,QAAQ2T,cAAgB+J,GAGjDM,EAAcL,EAAWI,EACzBE,EAAeL,EAAYG,EAM/B,MAAO,CAAClB,UAAa,EAHNlE,EAAQoF,GAAYjZ,EAAK9E,QAAQ8T,KAAOkK,GAAe,GACvDP,EAAQM,GAAYjZ,EAAK9E,QAAQ+T,KAAOkK,GAAgB,GAEhCnJ,MAASiJ,IAGpDjZ,EAAK+S,WAAa,SAAS2B,GACE,IAArBthB,UAAUzH,SACV+oB,EAAW,GAEf,IAAI0E,EAAcpZ,EAAK0Y,0BAEH,OAAhBU,IAIJtB,EAAI/C,aAAatW,KAAK,YACb,aAAe2a,EAAYrB,UAAY,WAAkBqB,EAAYpJ,MAAQ,KAAK0E,SAASA,GAIpG1U,EAAK+W,OAAOgB,UAAUqB,EAAYrB,WAClC/X,EAAK+W,OAAO/G,MAAMoJ,EAAYpJ,SAGlChQ,EAAKqZ,MAAQjc,IAAGsR,OAAO2K,QACtBC,OAAO,SAAS92B,GAAK,MAAkB,UAAdA,EAAE+iB,SACbvF,EAAK9E,QAAQoT,aAGbtO,EAAK9E,QAAQqT,cAC3BF,SAASrO,EAAK9E,QAAQmT,UACtBkL,aAAa,SAAS/2B,GAAK,OAAOwd,EAAK9E,QAAQsT,uBAAyBhsB,EAAEW,QAC1Eq2B,aAAa,SAASh3B,GAAK,OAAIA,EAAEulB,YAAY/H,EAAKkR,cACdlR,EAAKkR,cAAc1uB,EAAEulB,UAErB/H,EAAKkR,cAAcK,QAEvDkI,QAAQ,GACRpU,MAAMrF,EAAKsQ,MAAMjL,OACjBiC,MAAMtH,EAAKsQ,MAAMhJ,OACjB8G,eAAepO,EAAK9E,QAAQkT,gBAC5BtgB,KAAK,CAACkS,EAAK9E,QAAQ8T,KAAMhP,EAAK9E,QAAQ+T,OAGvC,IAAItqB,EAAWmzB,EAAIva,OAAO,QACzBkB,KAAK,QAAS2Y,IAAOzyB,UACrB8Z,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GAEZ,SAAS4Z,IACLnI,EAAgB,KAChBC,EAAc,KACE,KAGpB,IAAIuJ,GAAe,EACfnB,GAAc,EAElB,SAASoB,EAAcC,GACnB,IAAIhF,EAASC,EAASxX,UAAU,WAEhC,OACWuX,EAAOtP,OAAO,SAAS9iB,GAAK,OAAOA,EAAEsC,WA2DpD,SAAS+0B,EAAQ11B,GACb,IAAInB,EAAImB,EAAK4D,OAAS,GACtB+xB,EAAM31B,EAAK0D,EAAI7E,EACf+2B,EAAM51B,EAAK0D,EAAI7E,EACfg3B,EAAM71B,EAAK2D,EAAI9E,EACfi3B,EAAM91B,EAAK2D,EAAI9E,EACf,OAAO,SAASk3B,EAAMC,EAAIC,EAAIC,EAAIC,GAC9B,GAAIJ,EAAKK,OAAUL,EAAKK,QAAUp2B,EAAO,CACrC,IAAI0D,EAAI1D,EAAK0D,EAAIqyB,EAAKK,MAAM1yB,EAC5BC,EAAI3D,EAAK2D,EAAIoyB,EAAKK,MAAMzyB,EACxB3F,EAAI6O,KAAK0Y,KAAK7hB,EAAIA,EAAIC,EAAIA,GAC1B9E,EAAImB,EAAK4D,OAASmyB,EAAKK,MAAMxyB,OACzB5F,EAAIa,IACJb,GAAKA,EAAIa,GAAKb,EAAI,GAClBgC,EAAK0D,GAAKA,GAAK1F,EACfgC,EAAK2D,GAAKA,GAAK3F,EACf+3B,EAAKK,MAAM1yB,GAAKA,EAChBqyB,EAAKK,MAAMzyB,GAAKA,GAGxB,OAAOqyB,EAAKJ,GAAOM,EAAKP,GAAOM,EAAKH,GAAOK,EAAKN,GAjCxDha,EAAKwa,YAAc,WACXxa,EAAKkS,WACLlS,EAAKqZ,MAAMoB,UAoCnB,IAAIC,EAAOtd,IAAGsa,SAASgD,OAEtBhd,GAAG,YA7EJ,SAAqBlb,GACjB4a,IAAGkB,MAAMqc,YAAYnc,kBAElBhc,EAAEsC,UAAayzB,GAEH1D,EAASxX,UAAU,WAAWA,UAAU,gBAC9CG,QAAQ4Z,IAAOtyB,SAAU,SAASd,GAAK,OAAOA,EAAEc,SAAYkb,EAAK9E,QAAQiT,aAAenqB,EAAE6zB,oBAAqB,KAGxHza,IAAGK,OAAOpY,MAAMoY,OAAO,gBAAgBD,QAAQ4Z,IAAOtyB,SAAU,SAASd,GAAwC,OAAnCxB,EAAEq1B,mBAAqBr1B,EAAEsC,SAAiBtC,EAAEsC,SAAWkb,EAAK9E,QAAQiT,aAAc,IAEnJwL,IACNrE,KAAK,SAASsF,GACjBA,EAAGC,OAAS,MAiEnBnd,GAAG,OAzDJ,SAAiBlb,GAEAm3B,IAENrE,KAAK,SAASsF,GACjBA,EAAG/yB,GAAKuV,IAAGkB,MAAMwc,GACjBF,EAAG9yB,GAAKsV,IAAGkB,MAAMyc,GAEjBH,EAAG1T,IAAM9J,IAAGkB,MAAMwc,GAClBF,EAAGzT,IAAM/J,IAAGkB,MAAMyc,KAGtB/a,EAAKwa,cACLpd,IAAGkB,MAAMqc,YAAYpc,mBA6CxBb,GAAG,UArCJ,SAAmBlb,GACFm3B,IAENrE,KAAK,SAASsF,GACjBA,EAAGC,QAAS,MAmCpB,SAAS7C,IACL,IAAIhY,EAAKmS,OAILuH,EAAJ,CAEA,OAAQtc,IAAGkB,MAAM0c,SACb,KAAK,GACDrd,QAAQpD,IAAI,cAAeyF,EAAKib,2BAChC,MACJ,KAAK,GACDvB,GAAe,EACf,MACJ,KAAK,GACDnB,GAAc,EACd,MACJ,KAAK,GACDvY,EAAK+S,cAIT2G,GAAgBnB,KAChBJ,EAAS91B,KAAK2d,EAAK+W,QAClBrZ,GAAG,iBAAkB,MACrBA,GAAG,kBAAmB,MACtBA,GAAG,iBAAkB,MACrBA,GAAG,gBAAiB,MAGrBoa,EAAIza,UAAU,WACbK,GAAG,iBAAkB,OAGtB6a,IACFxzB,EAAM0Y,OAAO,eAAeG,MAAM,SAAU,aAC5C7Y,EAAM1C,KAAK2d,EAAKgX,WAItB,SAASiB,IACLyB,GAAe,EACfnB,GAAc,EAEdxzB,EAAM1C,KAAK2d,EAAKgX,SACftZ,GAAG,kBAAmB,MACtBA,GAAG,mBAAoB,MACvBA,GAAG,kBAAmB,MACtBA,GAAG,iBAAkB,MAEtB3Y,EAAM0Y,OAAO,eAAeG,MAAM,SAAU,QAC5Cua,EAAS91B,KAAK2d,EAAK+W,QAEnBe,EAAIza,UAAU,WACbhb,KAAKq4B,GAGVtd,IAAGK,OAAOsQ,GACTrQ,GAAG,UAAWsa,GACdta,GAAG,QAASua,GACZva,GAAG,cAAe,WACXN,IAAGkB,MAAMC,mBAGjB,IAAI0W,EAAU,SAASzyB,GACnB,OAAOA,EAAEoa,KAGTkY,EAAU,SAAStyB,GAEnB,OADUA,EAAEoa,KAKZse,EAAiB,SAASl4B,GAC1B,IAAIm4B,EAAsBn4B,EAAEujB,aAAa,cACrC6U,EAAiBp4B,EAAEujB,aAAa,SAEhCpB,EAAOniB,EAAEwjB,UAEbxjB,EAAE6mB,sBACDd,iBACAsB,iBACApE,aAAa,aAAckV,GAC3BjW,QAAQC,GACRiE,UAAU,EAAGpJ,EAAK9E,QAAQmO,eAC1BpD,aAAa,QAASmV,GACtB3U,iBACAK,iBACAO,kBA2FDgU,EAAa,SAAS74B,GAEtB,IAAIqb,EAAQmC,EAAKsQ,MAAMhJ,MAAM5Y,QAAQlM,GAGrC,GAFAmb,QAAQpD,IAAI,iBAAkBsD,GAE1BA,GAAS,EAAG,CAOZ,GAAIrb,EAAE+kB,OAAON,KAAOzkB,EAAEsR,OAAOmT,IAAK,CAC9B,GAAkB,YAAdzkB,EAAEulB,SAKF,OAJApK,QAAQpD,IAAI,mCAAoC/X,EAAE+kB,OAAO5N,IAAKnX,EAAEsR,OAAO6F,UAtG9D,SAASnX,GAC9B,GAAIA,EAAEsR,OAAO6F,IAAMnX,EAAE+kB,OAAO5N,KAAO,EAAnC,CASA,IAHA,IAAIsN,EAAMzkB,EAAEsR,OAAOmT,IACfnF,EAAW,GAEN5f,EAAI,EAAGA,EAAI+kB,EAAIK,MAAM3b,OAAQzJ,IAAK,CACvC,IAAIsC,EAAOyiB,EAAIK,MAAMplB,GAEA,YAAjBsC,EAAKujB,UAGLvjB,EAAK+iB,OAAO5N,KAAOnX,EAAE+kB,OAAO5N,KAAOnV,EAAKsP,OAAO6F,KAAOnX,EAAEsR,OAAO6F,MAC/DgE,QAAQpD,IAAI,oBAAqB/V,GACjCsd,EAASzZ,KAAK7D,IAOtBmZ,QAAQpD,IAAI,YAAauH,GAEzB,IAAK,IAAI5f,EAAI,EAAGA,EAAI4f,EAASnW,OAAQzJ,IACjC+kB,EAAIxB,UAAU3D,EAAS5f,GAAGqlB,OAAO5N,KAAO,EACxCsN,EAAIxB,UAAU3D,EAAS5f,GAAG4R,OAAO6F,KAAO,EAExCmI,EAAS5f,GAAGiK,KAAO2V,EAAS5f,GAAGqlB,OAAO5N,IACtCmI,EAAS5f,GAAG2f,GAAKC,EAAS5f,GAAG4R,OAAO6F,IAAMnX,EAAE+kB,OAAO5N,IAKxCsN,EAAItC,IAAnB,IACI2W,EAAYrU,EAAItC,IAAI1X,MAAM,EAAGzK,EAAE+kB,OAAO5N,KACtC4hB,EAAYtU,EAAItC,IAAI1X,MAAMzK,EAAE+kB,OAAO5N,KAEnC6hB,EAAgBzb,EAAa2B,sBAAsBuF,EAAIxB,WACvDgW,EAAcD,EAAcvuB,MAAM,EAAGzK,EAAE+kB,OAAO5N,KAC9C+hB,EAAcF,EAAcvuB,MAAMzK,EAAE+kB,OAAO5N,KAI3CuM,EAAYe,EAAIV,aAAa,cAC7BpB,EAAO8B,EAAIT,UAEXmV,EAAazV,EAAUjZ,MAAM,EAAGzK,EAAE+kB,OAAO5N,KACzCiiB,EAAa1V,EAAUjZ,MAAMzK,EAAE+kB,OAAO5N,KAEtCkiB,EAAQ1W,EAAKlY,MAAM,EAAGzK,EAAE+kB,OAAO5N,KAC/BmiB,EAAQ3W,EAAKlY,MAAMzK,EAAE+kB,OAAO5N,KAEhCgE,QAAQpD,IAAI,cAAeohB,GAC3Bhe,QAAQpD,IAAI,cAAeqhB,UAEpB5b,EAAKoS,KAAKnL,EAAIrK,KAOrB,IANA,IAAImf,EAAO/b,EAAKuP,OAAOkM,EAAa,CAAEjM,SAAY8L,EACvBpV,UAAayV,EACbxW,KAAQ0W,IAC/BG,EAAOhc,EAAKuP,OAAOmM,EAAa,CAAElM,SAAY+L,EACvBrV,UAAa0V,EACbzW,KAAQ2W,IAC1B55B,EAAI,EAAGA,EAAI4f,EAASnW,OAAQzJ,IACjCyb,QAAQpD,IAAI,QAASwhB,GACrBpe,QAAQpD,IAAI,QAASyhB,GACrBre,QAAQpD,IAAI,cAAeuH,EAAS5f,IACpC8d,EAAK2I,WAAWtgB,KACZ,CAACkf,OAAUwU,EAAK1W,MAAMvD,EAAS5f,GAAGiK,KAAK,GACtC2H,OAAUkoB,EAAK3W,MAAMvD,EAAS5f,GAAG2f,GAAG,GACpC1e,MAAS,EACTyZ,IAAOC,IAAO1R,OACd4c,SAAY,kBACb/H,EAAKqU,mBACLrU,EAAKsU,SAGb3W,QAAQpD,IAAI,mBAAoByF,EAAK2I,iBA9EjChL,QAAQpD,IAAI,qCAAsC/X,EAAEsR,OACxC,UAAWtR,EAAE+kB,OAAQ,QAAS/kB,GAqGlCy5B,CAAmBz5B,GAMnB,IAAIQ,EAAIR,EAAE+kB,OAAON,IAEjBjkB,EAAEqnB,iBACFrnB,EAAEyiB,UAAUjjB,EAAE+kB,OAAO5N,KAAO,EAC5B3W,EAAEyiB,UAAUjjB,EAAEsR,OAAO6F,KAAO,EAE5BuhB,EAAel4B,OAIhB,CAEH,IAAIk5B,EAAiBlc,EAAK2I,WAAWja,QAAQlM,GAE7Cwd,EAAK2I,WAAWyK,OAAO8I,EAAgB,GAG3Clc,EAAKqU,mBAGTrU,EAAKsU,UAGL6H,EAAY,SAAS35B,GACrB,GAAKk3B,EAAL,CASA/b,QAAQpD,IAAI,cAAe/X,EAAEulB,UACzBvlB,EAAEulB,WANa,CACEqU,MAAQ,EACRC,WAAa,EACbC,YAAc,IAMnCjB,EAAW74B,KAGfwd,EAAKib,wBAA0B,WAC3Btd,QAAQpD,IAAI,aAAcyF,EAAKoS,MAC/B,IAAI5C,EAAW,GACX+M,EAAU,EACVC,EAAW,GACX5W,EAAS,GACTH,EAAY,GAGhB,IAAK,IAAI7I,KAAOoD,EAAKoS,KAAM,CAGvB,IAFA,IAAInL,EAAMjH,EAAKoS,KAAKxV,GAEXtN,EAAI,EAAGA,EAAI2X,EAAI5B,MAAM1Z,OAAQ2D,IAAK,CACvC,IAAInL,EAAO8iB,EAAI5B,MAAM/V,GAEA,cAAjBnL,EAAKohB,WAGT5H,QAAQpD,IAAI,QAASpW,GACrBq4B,EAASr4B,EAAKyY,KAAO2f,EACrBA,GAAW,EAEX/M,EAASnnB,KAAKlE,EAAK1B,OAGvBmjB,EAAOvd,KAAKk0B,GAGhB9W,EAAY,CAAC8W,EAAQ,GACrB,IAAK,IAAIr6B,EAAI,EAAGA,EAAIq6B,EAASr6B,IACzBujB,EAAUpd,KAAK,GAGnB,IAAK,IAAIuU,KAAOoD,EAAKoS,KAGjB,IAFA,IAAInL,EAAMjH,EAAKoS,KAAKxV,GAEXtN,EAAI,EAAGA,EAAI2X,EAAIK,MAAM3b,OAAQ2D,IAAK,CACvC,IAAI9K,EAAOyiB,EAAIK,MAAMhY,GAErB,GAAqB,YAAjB9K,EAAKujB,SAAT,CAGA,IAAI0U,EAAOD,EAASh4B,EAAK+iB,OAAO3K,KAC5B8f,EAAOF,EAASh4B,EAAKsP,OAAO8I,KAChC6I,EAAUgX,GAAQC,EAClBjX,EAAUiX,GAAQD,GAI1B,IAAK,IAAIv6B,EAAI,EAAGA,EAAI8d,EAAK2I,WAAWhd,OAAQzJ,IAAK,CAC7C,IAAIsC,EAAOwb,EAAK2I,WAAWzmB,GAEvBu6B,EAAOD,EAASh4B,EAAK+iB,OAAO3K,KAC5B8f,EAAOF,EAASh4B,EAAKsP,OAAO8I,KAEhC6I,EAAUgX,GAAQC,EAClBjX,EAAUiX,GAAQD,EAKtB,IAFA,IAAInK,EAAYvS,EAAa2B,sBAAsB+D,GAAWvF,MAAM,IAE3Dhe,EAAI,EAAGA,EAAI0jB,EAAOja,OAAS,EAAGzJ,IACnCyb,QAAQpD,IAAI,aAAcqL,EAAO1jB,IACjCstB,EAAS4D,OAAOxN,EAAO1jB,GAAKA,EAAI,EAAG,EAAG,KACtCowB,EAAUc,OAAOxN,EAAO1jB,GAAKA,EAAI,EAAG,EAAG,KAK3C,OAFAyb,QAAQpD,IAAI,YAAaiV,EAAUA,EAAS3b,KAAK,KACjD8J,QAAQpD,IAAI,aAAc+X,EAAWA,EAAUze,KAAK,KAC7C,CAAC2b,EAAS3b,KAAK,IAAKye,EAAUze,KAAK,MAG9CmM,EAAK2c,gBAAkB,SAAS/T,GAwB5B,IArBA,IAAImT,EAAOnT,EAAQrB,OAAON,IACtB+U,EAAOpT,EAAQ9U,OAAOmT,IAEtB2V,EAAc7c,EAAa2B,sBAAsBqa,EAAKtW,WACtDoX,EAAc9c,EAAa2B,sBAAsBsa,EAAKvW,WAEtDqX,EAAOlU,EAAQrB,OAAON,IAAItC,IAC1BoY,EAAOnU,EAAQ9U,OAAOmT,IAAItC,IAE1BgX,EAAaI,EAAKxV,aAAa,cAC/BqV,EAAaI,EAAKzV,aAAa,cAG/B2M,EAAgB0J,EAAcC,EAC9BG,EAASF,EAAOC,EAChB1J,EAAesI,EAAW7oB,OAAO8oB,GAGjCqB,EAAgB,GAChBC,EAAW,GAENh7B,EAAI,EAAGA,EAAI8d,EAAK2I,WAAWhd,OAAQzJ,IACxCyb,QAAQpD,IAAI,qBAAsByF,EAAK2I,WAAWzmB,IAClDyb,QAAQpD,IAAI,QAASwhB,GACrBpe,QAAQpD,IAAI,QAASyhB,GACjBhc,EAAK2I,WAAWzmB,GAAGqlB,OAAON,KAAO8U,EAC5B/b,EAAK2I,WAAWzmB,GAAG4R,OAAOmT,KAAO+U,IAWlCiB,EAAc50B,KAAK,CACfkf,OAAUvH,EAAK2I,WAAWzmB,GAAG4R,OAC7BA,OAAUkM,EAAK2I,WAAWzmB,GAAGqlB,OAAO5N,MAGxCujB,EAASld,EAAK2I,WAAWzmB,GAAG0a,MAAO,GAEhCoD,EAAK2I,WAAWzmB,GAAGqlB,OAAON,KAAO+U,IACnChc,EAAK2I,WAAWzmB,GAAG4R,OAAOmT,KAAO8U,IASlCkB,EAAc50B,KAAK,CACfkf,OAAUvH,EAAK2I,WAAWzmB,GAAG4R,OAC7BA,OAAUkM,EAAK2I,WAAWzmB,GAAGqlB,OAAO5N,IAAMijB,EAAYjxB,SAE1DuxB,EAASld,EAAK2I,WAAWzmB,GAAG0a,MAAO,IAIvCoD,EAAK2I,WAAWzmB,GAAG4R,OAAOmT,KAAO8U,EAC7B/b,EAAK2I,WAAWzmB,GAAGqlB,OAAON,KAAO+U,IAKjCiB,EAAc50B,KAAK,CACfkf,OAAUvH,EAAK2I,WAAWzmB,GAAGqlB,OAC7BzT,OAAUkM,EAAK2I,WAAWzmB,GAAG4R,OAAO6F,MAGxCujB,EAASld,EAAK2I,WAAWzmB,GAAG0a,MAAO,GAEhCoD,EAAK2I,WAAWzmB,GAAG4R,OAAOmT,KAAO+U,GACpChc,EAAK2I,WAAWzmB,GAAGqlB,OAAON,KAAO8U,IACjCkB,EAAc50B,KAAK,CACfkf,OAAUvH,EAAK2I,WAAWzmB,GAAGqlB,OAC7BzT,OAAUkM,EAAK2I,WAAWzmB,GAAG4R,OAAO6F,IAAMijB,EAAYjxB,SAG1DuxB,EAASld,EAAK2I,WAAWzmB,GAAG0a,MAAO,GAM/CoD,EAAK2I,WAAa3I,EAAK2I,WAAWrD,OAAO,SAAClb,GAAQ,QAASA,EAAEwS,OAAOsgB,YAE7Dld,EAAKoS,KAAK2J,EAAKnf,YACfoD,EAAKoS,KAAK4J,EAAKpf,KAEtB,IAAIugB,EAAS,KAGTA,EADAnd,EAAK9E,QAAQiT,WACJnO,EAAKuP,OAAO2D,EAAe,CAAE1D,SAAYwN,EAC9B9W,UAAamN,EACbN,YAAc,IAEzB/S,EAAKuP,OAAO2D,EAAe,CAAE1D,SAAYwN,EACtCjK,YAAc,IAK9B,IAAK,IAAI7wB,EAAI,EAAGA,EAAI+6B,EAActxB,OAAQzJ,IACtC8d,EAAK2I,WAAWtgB,KAAK,CACjBkf,OAAU0V,EAAc/6B,GAAGqlB,OAC3BzT,OAAUqpB,EAAO9X,MAAM4X,EAAc/6B,GAAG4R,OAAO,GAC/C3Q,MAAS,EACTyZ,IAAOC,IAAO1R,OACd4c,SAAY,kBAIpB/H,EAAKqU,mBACLrU,EAAKsU,SACL3W,QAAQpD,IAAI,mBAAoByF,EAAK2I,aAGzC3I,EAAKod,QAAW,SAASxU,GAMrB,GADAjL,QAAQpD,IAAI,mBACRqO,EAAQrB,OAAON,KAAO2B,EAAQ9U,OAAOmT,IAAK,CAE1C,IAAIjkB,EAAI4lB,EAAQrB,OAAON,IAEvBjkB,EAAEyiB,UAAUmD,EAAQrB,OAAO5N,KAAOiP,EAAQ9U,OAAO6F,IACjD3W,EAAEyiB,UAAUmD,EAAQ9U,OAAO6F,KAAOiP,EAAQrB,OAAO5N,IAEjDuhB,EAAel4B,QAIf2a,QAAQpD,IAAI,iBACZqO,EAAQb,SAAW,gBACnB/H,EAAK2I,WAAWtgB,KAAKugB,GAEzB5I,EAAKqU,mBACLrU,EAAKsU,UAGT,IAAI+I,EAAiB,SAAS76B,GAC1B,IAAI4a,IAAGkB,MAAMgf,iBAAb,CAEA,IAAK/E,EAEU1D,EAASxX,UAAU,WAAWA,UAAU,gBAC9CG,QAAQ4Z,IAAOtyB,SAAU,SAASd,GAAK,OAAOA,EAAEc,SAAYkb,EAAK9E,QAAQiT,aAAenqB,EAAE6zB,oBAAqB,KAIxHza,IAAGK,OAAOpY,MAAMoY,OAAO,UAAUD,QAAQ4Z,IAAOtyB,SAAUtC,EAAEsC,SAAWkb,EAAK9E,QAAQiT,aAAe3rB,EAAEq1B,oBACrGza,IAAGkB,MAAME,oBAGT+e,EAAc,SAAS/6B,EAAEN,GACzB,IAA6Bs7B,GAAmB,EAEhD,GAAItN,EAAe,CAIf,GAA4B,WAH5BC,EAAc3tB,GAGE+iB,UAAkD,UAA1B2K,EAAc3K,UAAgD,SAAxB4K,EAAY5K,UAAiD,SAA1B2K,EAAc3K,SAC3H,OAEJ,GAAI4K,GAAeD,EAAmC,YAAlBmI,IAGpC,IAFA,IAAIzP,EAAU,CAACrB,OAAQ2I,EAAepc,OAAQqc,EAAapI,SAAU,WAAY5kB,MAAO,EAAGyZ,IAAKC,IAAO1R,QAE9FjJ,EAAI,EAAGA,EAAI8d,EAAKsQ,MAAMhJ,MAAM3b,OAAQzJ,IAkBzC,GAjBK8d,EAAKsQ,MAAMhJ,MAAMplB,GAAGqlB,QAAU2I,GAC9BlQ,EAAKsQ,MAAMhJ,MAAMplB,GAAG4R,QAAUoc,GAC9BlQ,EAAKsQ,MAAMhJ,MAAMplB,GAAGqlB,QAAU4I,GAC9BnQ,EAAKsQ,MAAMhJ,MAAMplB,GAAG4R,QAAUqc,GAKK,YAAhCnQ,EAAKsQ,MAAMhJ,MAAMplB,GAAG6lB,UACY,cAAhC/H,EAAKsQ,MAAMhJ,MAAMplB,GAAG6lB,UACY,iBAAhC/H,EAAKsQ,MAAMhJ,MAAMplB,GAAG6lB,WAEpBpK,QAAQpD,IAAI,wBACZijB,GAAmB,IAIrBxd,EAAKsQ,MAAMhJ,MAAMplB,GAAGqlB,QAAU4I,GAC9BnQ,EAAKsQ,MAAMhJ,MAAMplB,GAAG4R,QAAUoc,GACzBlQ,EAAKsQ,MAAMhJ,MAAMplB,GAAGqlB,QAAU2I,GAC9BlQ,EAAKsQ,MAAMhJ,MAAMplB,GAAG4R,QAAUqc,IAID,YAAhCnQ,EAAKsQ,MAAMhJ,MAAMplB,GAAG6lB,SACpB,OAMZ,GAAIa,EAAQrB,OAAON,KAAO2B,EAAQ9U,OAAOmT,IAGrC,GAA2B,GAAtB2B,EAAQrB,OAAO5N,KACfiP,EAAQ9U,OAAO6F,KAAOiP,EAAQ9U,OAAOmT,IAAIlB,WAClB,GAAtB6C,EAAQ9U,OAAO6F,KACfiP,EAAQrB,OAAO5N,KAAOiP,EAAQrB,OAAON,IAAIlB,UAAY,CAEjD,IAAI0X,EAAW,CACX,CACI5e,MAAO,gBACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrBkuB,GAAuB,EACvBzS,QAAQpD,IAAI,oBACZoD,QAAQpD,IAAI,gCAAkC/X,GAC9CmC,EAAS8Z,KAAK,QAAS2Y,IAAOxyB,gBAC9Bob,EAAK2c,gBAAgB/T,IAEzBjK,UAAU,GAEd,CACIE,MAAO,gBACPD,OAAQ,SAASZ,EAAKxb,EAAGN,GACrBkuB,GAAuB,EACvBzS,QAAQpD,IAAI,qCACZoD,QAAQpD,IAAI,gCAAkC/X,GAC9CmC,EAAS8Z,KAAK,QAAS2Y,IAAOxyB,gBAC9Bob,EAAKod,QAAQxU,MAIzBwH,GAAuB,EACvB,IAAIsN,EAAkBphB,EAAYmhB,GAClC9f,QAAQpD,IAAI,eACZmjB,EAAgB7rB,MAAMxM,KAAM,CAAC7C,EAAEN,GAAE,EACX,WAAayC,EAAS8Z,KAAK,QAAS2Y,IAAOxyB,wBAG7D44B,GACFxd,EAAKod,QAAQxU,QAGrB4U,GACAxd,EAAKod,QAAQxU,KAMzB+U,EAAgB,SAASn7B,GACtBA,EAAEsC,UAAayzB,GAEH1D,EAASxX,UAAU,WAAWA,UAAU,gBAC9CG,QAAQ4Z,IAAOtyB,SAAU,SAASd,GAAK,OAAOA,EAAEc,SAAWd,EAAE6zB,oBAAqB,IAIzFza,IAAGK,OAAOpY,MAAMmY,QAAQ4Z,IAAOtyB,SAAU,SAASd,GAAwC,OAAnCxB,EAAEq1B,mBAAqBr1B,EAAEsC,SAAiBtC,EAAEsC,SAAWkb,EAAK9E,QAAQiT,aAAc,IAEtIuL,IAILxJ,EAAgB1tB,EAEhBmC,EACC8Z,KAAK,QAAS2Y,IAAOzyB,UACrB8Z,KAAK,KAAMyR,EAAcroB,GACzB4W,KAAK,KAAMyR,EAAcpoB,GACzB2W,KAAK,KAAMyR,EAAcroB,GACzB4W,KAAK,KAAMyR,EAAcpoB,KAM9BkY,EAAK4d,eAAiB,WACpB5d,EAAKkS,WAAY,EACjB4F,EAAIza,UAAU,WACXhb,KAAKq4B,GACR1a,EAAKqZ,MAAM3zB,SAGbsa,EAAK6d,cAAgB,WACnB7d,EAAKkS,WAAY,EACjB4F,EAAIza,UAAU,WACRK,GAAG,iBAAkB,MAC3BsC,EAAKqZ,MAAMyE,QAGb9d,EAAK+d,YAAc,SAAS56B,GAC1B6c,EAAKqZ,MAAMhL,SAASlrB,GACpB6c,EAAKwa,eAGPxa,EAAKge,UAAY,SAAS76B,GACxB6c,EAAKqZ,MAAMC,OAAOn2B,GAClB6c,EAAKwa,eAGPxa,EAAKie,WAAa,SAAS96B,GACzB6c,EAAKqZ,MAAMI,QAAQt2B,GACnB6c,EAAKwa,eAGPxa,EAAKke,sBAAwB,SAAS/6B,GACpC6c,EAAKkR,cAAcC,WAAahuB,EAChC6c,EAAKsU,UAGPtU,EAAKyR,kBAAoB,SAAStuB,GAChC6c,EAAKwR,kBAAkBC,kBAAoBtuB,EAC3C6c,EAAKuV,eAGPvV,EAAK0R,iBAAmB,SAASvuB,GAC/B6c,EAAKwR,kBAAkBE,iBAAmBvuB,EAC1C6c,EAAKuV,eAGPvV,EAAK2R,mBAAqB,SAASxuB,GACjC6c,EAAKwR,kBAAkBG,mBAAqBxuB,EAC5C6c,EAAKuV,eAGPvV,EAAK4R,iBAAmB,SAASzuB,GAC/B6c,EAAKwR,kBAAkBI,iBAAmBzuB,EAC1C6c,EAAKuV,eAGPvV,EAAK6R,aAAe,SAAS1uB,GAC3B6c,EAAKwR,kBAAkBK,aAAe1uB,EACtC6c,EAAKuV,eAGPvV,EAAK8R,uBAAyB,SAAS3uB,GACrC6c,EAAKwR,kBAAkBM,uBAAyB3uB,EAChD6c,EAAKuV,eAGPvV,EAAK+R,oBAAsB,SAAS5uB,GAClC6c,EAAKwR,kBAAkBO,oBAAsB5uB,EAC7C6c,EAAKuV,eAGPvV,EAAKuV,YAAc,WAIfV,EAASxX,UAAU,qBAAqBG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBE,kBAC5FmD,EAASxX,UAAU,sBAAsBG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBE,kBAC7FsD,EAAS3X,UAAU,yBAAyBG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBE,kBAEhGuF,EAAI5Z,UAAU,UAAUG,QAAQ4Z,IAAO7yB,eAAgByb,EAAKwR,kBAAkBG,oBAE9EkD,EAASxX,UAAU,2BAA2BG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBI,kBAElGqF,EAAI5Z,UAAU,4JAA4JG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBK,cAE9NoF,EAAI5Z,UAAU,0BAA0BG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBM,wBAE5FmF,EAAI5Z,UAAU,6BAA6BG,QAAQ4Z,IAAO1yB,aAAcsb,EAAKwR,kBAAkBO,qBAE/FiD,EAAS3X,UAAU,oBAAoBG,QAAQ4Z,IAAO1yB,aAAcsb,EAAK9E,QAAQgT,iBACjF8G,EAAS3X,UAAU,yBAAyBG,QAAQ4Z,IAAO1yB,aAAcsb,EAAK9E,QAAQgT,kBAmB1FlO,EAAKwV,eAAiB,SAAS2I,GAC3B,IAAIC,EAAYD,EAAW5gB,OAAO,YA8BnC,OA5BC6gB,EAAU7gB,OAAO,aAChB8gB,KAAKpJ,GAENmJ,EACC5gB,QAAQ,QAAQ,GAChBA,QAAQ4Z,IAAO5yB,MAAM,GACrBia,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAO1f,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAOzf,IACzC2W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOjM,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOhM,IACzC2W,KAAK,YAAa,SAASjc,GAAK,OAAOA,EAAEulB,WACzCtJ,KAAK,iBAAkB,SAASjc,GAAK,MAAkB,QAAdA,EAAEulB,SAA2B,OAAoB,QAiBrFqW,GAGVpe,EAAKmV,eAAiB,SAASmJ,IAC3BA,EAAcA,EAAY/gB,OAAO,KAChCC,QAAQ4Z,IAAOpyB,UAAU,GACzBwY,QAAQ,SAAS,GACjBiB,KAAK,cAAe,SAASjc,GAAK,OAAOA,EAAEoiB,aAC3CnG,KAAK,YAAa,SAASjc,GACxB,YAAkB,IAAPA,EAAEqF,QAAkC,IAAPrF,EAAEsF,EAC/B,aAAe,CAACtF,EAAEqF,EAAGrF,EAAEsF,GAAK,IAE5B,KAEdwtB,KAAM,SAAS9yB,GAAKA,EAAEsC,SAAWtC,EAAEq1B,oBAAqB,KAGxDx1B,KAAKq4B,GACLhd,GAAG,YAAaigB,GAChBjgB,GAAG,YAAa,SAASlb,MACzBkb,GAAG,UAAW6f,GACd9e,KAAK,MAAO,SAASjc,GAAK,MAAO,IAAMA,EAAEmX,MACzC8E,KAAK,OAAQ,SAASjc,GACnB,MAAO,KAAOA,EAAEykB,IAAIlB,UAAYvjB,EAAEmX,IAAM,KAC3C+D,GAAG,QAAS2f,GACZ3f,GAAG,cAAesC,EAAK8P,iBACvBiF,aACAL,SAAS,KACT6J,KAAK,WAGN,IAAIC,EAAuBF,EAAYhZ,OAAO,SAAS9iB,GACnD,MAAqB,SAAdA,EAAE+iB,UAAqC,WAAd/iB,EAAE+iB,WAGlCH,EAAkBkZ,EAAYhZ,OAAO,SAAS9iB,GAC9C,MAAqB,cAAdA,EAAE+iB,WA0Eb,OAvEAiZ,EAAqBjhB,OAAO,cAC3BkB,KAAK,QAAS,eACdjB,QAAQ4Z,IAAO/yB,aAAa,GAC5Boa,KAAK,IAAK,SAASjc,GAAK,OAAOA,EAAEuF,OAAO,IAEzCqd,EAAgB7H,OAAO,cACtBkB,KAAK,QAAS,eACdjB,QAAQ4Z,IAAO/yB,aAAa,GAC5Boa,KAAK,IAAK,SAASjc,GAAK,OAAOA,EAAEuF,OAAO,IAEzCy2B,EAAqBjhB,OAAO,cAC3BkB,KAAK,QAAS2Y,IAAOjzB,MACrBqZ,QAAQ4Z,IAAOhzB,MAAO,SAAS5B,GAAK,MAAqB,SAAdA,EAAE+iB,WAC7C9G,KAAK,IAAK,SAASjc,GAChB,MAAkB,UAAdA,EAAE+iB,SAA6B,EAExB/iB,EAAEuF,SAGhB0W,KAAK,YAAa,SAASjc,GAAK,OAAOA,EAAE+iB,WACzC9G,KAAK,WAAY,SAASjc,GAAK,OAAOA,EAAEmX,MAEzCyL,EAAgB7H,OAAO,cACtBkB,KAAK,QAAS2Y,IAAOjzB,MACrBsa,KAAK,YAAa,SAASjc,GAAK,OAAOA,EAAE+iB,WACzC9G,KAAK,WAAY,SAASjc,GAAK,OAAOA,EAAEmX,MACxC8E,KAAK,IAAK,SAASjc,GAAK,OAAOA,EAAEuF,SACjCwV,OAAO,aACP8gB,KAAK,SAAS77B,GACX,MAAkB,cAAdA,EAAE+iB,SACK/iB,EAAEoiB,WAAa,IAAMpiB,EAAEmX,IAEvB,KAIfyL,EAAgB7H,OAAO,YACtBkB,KAAK,QAAS2Y,IAAOjzB,MACrBsa,KAAK,YAAa,SAASjc,GAAK,OAAOA,EAAE+iB,WACzC9G,KAAK,WAAY,SAASjc,GAAK,OAAOA,EAAEmX,MACxC4D,OAAO,aACP8gB,KAAK,SAAS77B,GACX,MAAkB,cAAdA,EAAE+iB,SACK/iB,EAAEoiB,WAAa,IAAMpiB,EAAEmX,IAEvB,KAKG2kB,EAAY/gB,OAAO,QACpC8gB,KAAK,SAAS77B,GAAK,OAAOA,EAAEC,OAC5Bgc,KAAK,QAAS2Y,IAAOvyB,WACrB4Z,KAAK,aAAc,SAASjc,GAAK,OAAOA,EAAE+iB,WAQ/BhI,OAAO,aAClB8gB,KAAK,SAAS77B,GACX,MAAkB,cAAdA,EAAE+iB,SACK/iB,EAAEoiB,WAAa,IAAMpiB,EAAEmX,IAEvB,KAKR2kB,GAeXte,EAAKsU,OAAS,WACVtU,EAAKqZ,MAAMhU,MAAMrF,EAAKsQ,MAAMjL,OAC3BiC,MAAMtH,EAAKsQ,MAAMhJ,OAEdtH,EAAKkS,WACPlS,EAAKqZ,MAAM3zB,QAGb,IAAI+4B,EAAWzJ,EAAS3X,UAAU,aACjC1P,KAAKqS,EAAKsQ,MAAMhJ,MAAMhC,OAAOwL,GAAiBmE,GAE/CwJ,EAAShgB,KAAK,QAAS,IACtBjB,QAAQ,QAAQ,GAChBA,QAAQ4Z,IAAO5yB,MAAM,GACrBia,KAAK,YAAa,SAASjc,GAAK,OAAOA,EAAEulB,WAE1C,IAAIoW,EAAaM,EAASnhB,QAC1B0C,EAAKwV,eAAe2I,GAEpBM,EAASrJ,OAAOC,SAIHjY,IAAG4S,MAAMsH,aAAarT,OADtB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAzC,IAGQ2Q,EAASC,EAASxX,UAAU,WAC/B1P,KAAKqS,EAAKsQ,MAAMjL,MAAOyP,GAGpBwJ,EAAc1J,EAAOtX,QAEzB0C,EAAKmV,eAAemJ,GACpB1J,EAAOQ,OAAOC,SAKd,IAEIqJ,EAFAC,EAAY3e,EAAKsQ,MAAMjL,MAAMC,OAAO,SAAS9iB,GAAK,MAAqB,cAAdA,EAAE+iB,UAA0C,SAAd/iB,EAAE+iB,WAIzFmZ,EADA1e,EAAK4e,iBACGH,EAEAzJ,EAAS3X,UAAU,6MAI/BuX,EAAOvX,UAAU,QAChBiY,KAAK9E,GAENkO,EAAMhhB,GAAG,QAASye,GAElBnc,EAAKqZ,MAAM3b,GAAG,OAAQ,WAKlB,IAJA,IAAIoD,EAAI1D,IAAGyhB,KAAKC,SAASH,GACrBz8B,EAAI,EACJyB,EAAIg7B,EAAUhzB,SAETzJ,EAAIyB,GAAGmd,EAAEie,MAAMlF,EAAQ8E,EAAUz8B,KAE1Cw8B,EAAMjgB,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAO1f,IAC9C4W,KAAK,KAAM,SAASjc,GAAM,OAAOA,EAAE+kB,OAAOzf,IAC1C2W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOjM,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOhM,IAG1C8sB,EAAOnW,KAAK,YAAa,SAASjc,GAC9B,MAAO,aAAe,CAACA,EAAEqF,EAAGrF,EAAEsF,GAAK,MAGvC8sB,EAAOnX,OAAO,QACb6X,KAAK9E,KAIVxQ,EAAKqZ,MAAM3b,GAAG,MAAO,WAOjB,IAAK,IAAId,KANTgY,EAAOvX,UAAU,0BAChBiI,OAAO,SAAC9iB,EAAEN,GAAQ,OAAS,GAALA,IACtBozB,KAAK,SAAC9yB,EAAEN,MAIO8d,EAAKoS,KACjB,IAAK,IAAIlwB,EAAI,EAAGA,EAAI8d,EAAKoS,KAAKxV,GAAK6I,UAAU,GAAIvjB,QAO7D8d,EAAKsW,kBAAkBtW,EAAKgS,aAExBhS,EAAKkS,WACPlS,EAAKqZ,MAAM3zB,QAGbsa,EAAKuV,eAGTvV,EAAK4W,UChzEF,SAASoI,IAA4B,IAiBpC5P,EAAQE,EAjBQtB,EAAoB5a,UAAAzH,OAAA,QAAAc,IAAA2G,UAAA,GAAAA,UAAA,GAAJ,GAChC8H,EAAU,CACVsE,MAAS,IACTyf,OAAU,IACVC,iBAAoB,EACpBC,eAAkB,EAElB9V,cAAiB,GACjB+V,sBAAwB,EACxBC,sBAAyB,EACzBC,qBAAuB,EAEvBC,UAAa,SACbC,aAAgB,OAEhBtkB,EAAUtY,OAAO68B,OAAOvkB,EAAS8S,GA8MrC,SAAS0R,EAAMC,GACXA,EAAUrK,KAAK,SAAS3nB,GACpB,IAAIiyB,EAAOxiB,GAAGK,OAAOpY,MAAMkY,OAAO,KACjCC,QAAQ,WAAW,GAIhBgV,EAAK,IAAI9N,EAAS/W,EAAK6hB,SAAU7hB,EAAK2kB,UAAW3kB,EAAKlL,KAAMyY,EAAQmkB,uBAC/DxV,sBACAd,iBACAuB,QAAQ3c,EAAKlL,MAEtBkL,EAAK+lB,SAAWlB,EAIhB,IAAItM,EAAY,GAEhB,GAA0B,WAAtBhL,EAAQqkB,UAIR,IAHA,IACI7M,GADS,IAAI5F,GACY6F,sBAAsBH,EAAG/M,WAE7CvjB,EAAI,EAAGA,EAAIwwB,EAAgBxF,MAAOhrB,IACvCgkB,EAAU7d,KAAK,CAACqqB,EAAgB7qB,EAAE3F,GAAIwwB,EAAgB5qB,EAAE5F,UAG5DgkB,EAAYqE,EAAoBiI,EAAG/M,WAGvC+M,EAAGvM,aAAa,aAAcC,GAI7BkD,UAAUlO,EAAQmkB,sBAAuBnkB,EAAQmO,eAIlD,IAAIwW,EA/OZ,SAAuCC,EAASC,GAG5C,IAAIC,EAAU5iB,GAAGob,OAAOsH,GACpBG,EAAU7iB,GAAGob,OAAOuH,GAGxBC,EAAQ,IAAM9kB,EAAQgkB,iBAAmBhkB,EAAQikB,eACjDc,EAAQ,IAAM/kB,EAAQgkB,iBAAmBhkB,EAAQikB,eAEjDa,EAAQ,IAAM9kB,EAAQgkB,iBAAmBhkB,EAAQikB,eACjDc,EAAQ,IAAM/kB,EAAQgkB,iBAAmBhkB,EAAQikB,eAGjD,IAqBI3qB,EArBA0rB,EAASF,EAAQ,GAAKA,EAAQ,GAC9BG,EAASF,EAAQ,GAAKA,EAAQ,GAQlC,SAASG,EAAiBC,EAAYC,EAAWC,GAC7C,IAAIC,GAAeH,EAAWzc,QAAQ,GAAKyc,EAAWzc,QAAQ,KAC3Cyc,EAAWpc,SAAS,GAAKoc,EAAWpc,SAAS,IAC5Dwc,GAAYH,EAAU,GAAKA,EAAU,IAAME,EAC3CE,GAAcH,EAAS,GAAKA,EAAS,GAAME,GAAY,EAE3D,MAAO,CAACD,YAAeA,EACfxQ,MAAS5S,GAAG4S,MAAMK,SACApM,OAAOqc,GACP1c,MAAM,CAAC2c,EAAS,GAAKG,EAAWH,EAAS,GAAKG,KA0B5E,OAxCaR,EAAShlB,EAAQsE,MACjB2gB,EAASjlB,EAAQ+jB,QAwB1BzqB,EAAM4rB,EAJNhR,EAAShS,GAAG4S,MAAMK,SACjBpM,OAAO+b,GACPpc,MAAM,CAAC,EAAG1I,EAAQsE,QAEYygB,EAAS,CAAC,EAAG/kB,EAAQ+jB,SACpD3P,EAAS9a,EAAIwb,QAObxb,EAAM4rB,EAJN9Q,EAASlS,GAAG4S,MAAMK,SACjBpM,OAAOgc,GACPrc,MAAM,CAAC,EAAG1I,EAAQ+jB,SAEYe,EAAS,CAAC,EAAG9kB,EAAQsE,QACpD4P,EAAS5a,EAAIwb,OAGHZ,EAAOxL,QAAQ,GAAKwL,EAAOnL,SAAS,GACpCqL,EAAO1L,QAAQ,GAAK0L,EAAOrL,SAAS,GAE3C,eAAiBmL,EAAOnL,SAAS,GAAKzP,EAAIgsB,YAAcpR,EAAOxL,QAAQ,IACpE,MAAQ0L,EAAOrL,SAAS,GAAKzP,EAAIgsB,YAAclR,EAAO1L,QAAQ,IAAM,UAC/DpP,EAAIgsB,YAAc,IAmLDG,CACxBnO,EAAGnN,MAAMzE,IAAI,SAASpe,GAAK,OAAOA,EAAEqF,IACpC2qB,EAAGnN,MAAMzE,IAAI,SAASpe,GAAK,OAAOA,EAAEsF,KAExC83B,EAAKnhB,KAAK,YAAaohB,GAEvB,IAAIza,EAAkBoN,EAAGnN,MAAMC,OAAO,SAAS9iB,GAC3C,MAAqB,cAAdA,EAAE+iB,WAGTY,EAAaqM,EAAGnN,MAAMC,OAAO,SAAS9iB,GACtC,MAAqB,SAAdA,EAAE+iB,WAGT+B,EAAQkL,EAAGlL,OAnEvB,SAAqBqY,EAAWrY,GAC5BA,EAAQA,EAAMhC,OAAO,SAAS9iB,GAAK,OAAoB,OAAbA,EAAE+kB,QAAgC,OAAb/kB,EAAEsR,SACxD6rB,EAAUtiB,UAAU,SAC5B1P,KAAK2Z,GACLhK,QACAC,OAAO,YACPkB,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAO1f,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOjM,IACzC4W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAE+kB,OAAOzf,IACzC2W,KAAK,KAAM,SAASjc,GAAK,OAAOA,EAAEsR,OAAOhM,IACzC2W,KAAK,YAAa,SAASjc,GAAK,OAAOA,EAAEulB,WACzCtJ,KAAK,kBAAmB,SAASjc,GAAK,OAAOA,EAAEsmB,gBAC/CtL,QAAQ,QAAQ,GAChBA,QAAQ4Z,IAAO5yB,MAAM,GAwDlBo8B,CAAYhB,EAAMtY,GAhM1B,SAA2BqY,EAAWva,GAElC,IAAIyb,EAAKlB,EACRtiB,UAAU,SACV1P,KAAKyX,GACL9H,QACAC,OAAO,SACPkB,KAAK,YAAa,SAASjc,GACxB,MAAO,aAAeA,EAAEqF,EAAI,IAAMrF,EAAEsF,EAAI,MAG9B+4B,EAAGtjB,OAAO,cACvBkB,KAAK,aAAc,SAACjc,GAAQ,GAAIA,EAAEC,KAAQ,OAAOD,EAAEC,KAAK0L,gBACxDsQ,KAAK,IAAKvD,EAAQgkB,kBAClB1hB,QAAQ,QAAQ,GAChBA,QAAQ4Z,IAAOjzB,MAAM,GAGlB+W,EAAQkkB,sBACeyB,EAAGtjB,OAAO,YAChC8gB,KAAK,SAAS77B,GAAK,OAAOA,EAAEC,OAC5B+a,QAAQ4Z,IAAOvyB,WAAW,GAC1B0Y,OAAO,aACP8gB,KAAK,SAAS77B,GAAK,OAAOA,EAAEs+B,YAAc,IAAMt+B,EAAEmX,MA0KnDonB,CAAkBnB,EAAMxa,GAtKhC,SAAsBua,EAAWxZ,GAG7B,IAAI0a,EAAKlB,EACRtiB,UAAU,aACV1P,KAAKwY,GACL7I,QACAC,OAAO,SACPkB,KAAK,YAAa,SAASjc,GACxB,MAAO,aAAeA,EAAEqF,EAAI,IAAMrF,EAAEsF,EAAI,MAG9B+4B,EAAGtjB,OAAO,cACvBkB,KAAK,IAAKvD,EAAQgkB,kBAClB1hB,QAAQ,QAAQ,GAChBA,QAAQ4Z,IAAOjzB,MAAM,GACrBqZ,QAAQ4Z,IAAOvyB,WAAW,GAERg8B,EAAGtjB,OAAO,YAC5B8gB,KAAK,SAAS77B,GAAK,OAAOA,EAAEC,OAC5Bgc,KAAK,cAAe,UACpBA,KAAK,cAAe,QACpBA,KAAK,oBAAqB,WAC1BjB,QAAQ4Z,IAAOvyB,WAAW,GAgJvBm8B,CAAapB,EAAMzZ,GA7I3B,SAAoBwZ,EAAWl9B,GAC3B,IAAIw+B,EAAYtB,EAAUpiB,OAAO,YAEhCC,QAAQ4Z,IAAO3yB,SAAS,GACxB45B,KAAK57B,GAEFy+B,EAAQhmB,EAAQskB,aAAatf,MAAM,IAAK,GACxCihB,EAAK,GACLC,EAAWH,EAAU98B,OAAOk9B,UAC5BC,EAAW,CAACF,EAAS5hB,MAAO4hB,EAASnC,QACrCsC,EAAW,CAACrmB,EAAQsE,MAAOtE,EAAQ+jB,QAEvC,IAAK,IAAIj7B,IAAK,CAAC,EAAG,GACd,OAAQk9B,EAAMl9B,IACV,IAAK,IACDm9B,EAAGn9B,GAAKs9B,EAASt9B,GAAK,EACtB,MACJ,IAAK,IACDm9B,EAAGn9B,GAAKu9B,EAASv9B,GAAKs9B,EAASt9B,GAAK,EACpC,MACJ,IAAK,MACDm9B,EAAGn9B,GAAKu9B,EAASv9B,GAAK,EAIlCi9B,EAAUxiB,KAAK,IAAK0iB,EAAG,IAAI1iB,KAAK,IAAK0iB,EAAG,IAqHpCK,CAAWpkB,GAAGK,OAAOpY,MAAOsI,EAAKlL,MAE7ByY,EAAQokB,qBApHpB,SAAiCK,EAAWrY,GACxC,IAAIma,EAAY,GACZC,EAAY,GAChBpa,EAAQA,EAAMhC,OAAO,SAAS9iB,GAAK,MAAqB,WAAdA,EAAEulB,UAAuC,aAAdvlB,EAAEulB,UAAyC,SAAdvlB,EAAEulB,WAEpG4X,EAAUtiB,UAAU,qBACnBgY,SAGD,IAAK,IAAInzB,EAAI,EAAGA,EAAIolB,EAAM3b,OAAQzJ,IACN,OAApBolB,EAAMplB,GAAGqlB,QAAuC,OAApBD,EAAMplB,GAAG4R,SAGzC2tB,EAAUna,EAAMplB,GAAGqlB,OAAO3K,KAAO0K,EAAMplB,GAAGqlB,OAC1Cka,EAAUna,EAAMplB,GAAG4R,OAAO8I,KAAO0K,EAAMplB,GAAG4R,OAE1C4tB,EAAUr5B,KAAK,CAACkf,OAAUD,EAAMplB,GAAGqlB,OAAO3K,IAAK9I,OAAUwT,EAAMplB,GAAG4R,OAAO8I,IAAKmL,SAAYT,EAAMplB,GAAG6lB,SAAUe,cAAiBxB,EAAMplB,GAAG4mB,iBAG3I,IAEI6Y,EAFYvkB,GAAGwkB,oBAAoBvc,MAAMoc,GAAWI,MAAMH,GAC7DI,wBAAwB,IAAKC,UAAU,GACxBC,GAEZC,EAAS7kB,GAAG6Z,IAAIiL,OACfr6B,EAAE,SAASrF,GAAG,OAAOA,EAAEqF,IACvBC,EAAE,SAAStF,GAAG,OAAOA,EAAEsF,IACvByvB,YAAY,UAEjB,IAASr1B,EAAI,EAAGA,EAAIy/B,EAAQh2B,OAAQzJ,IAAK,CACrC,IAAIigC,EAAqBR,EAAQz/B,GAIjCy9B,EAAUpiB,OAAO,QAAQkB,KAAK,IAAKwjB,EAAOE,IACzCvkB,MAAM,OAAQ,QACda,KAAK,YAAa,SAASjc,GAAK,OAAOk/B,EAAUx/B,GAAG6lB,WACpDtJ,KAAK,kBAAmB,SAASjc,GAAK,OAAOk/B,EAAUx/B,GAAG4mB,gBAC1DlL,MAAM,iBAAiB,KAgFpBwkB,CAAwBxC,EAAMtY,KAwE1C,OAlEAoY,EAAMlgB,MAAQ,SAAS6iB,GACnB,OAAKjvB,UAAUzH,QACfuP,EAAQsE,MAAQ6iB,EACT3C,GAFuBxkB,EAAQsE,OAK1CkgB,EAAMT,OAAS,SAASoD,GACpB,OAAKjvB,UAAUzH,QACfuP,EAAQ+jB,OAASoD,EACV3C,GAFuBxkB,EAAQ+jB,QAK1CS,EAAMN,qBAAuB,SAASiD,GAClC,OAAKjvB,UAAUzH,QACfuP,EAAQkkB,qBAAuBiD,EACxB3C,GAFuBxkB,EAAQkkB,sBAK1CM,EAAMP,eAAiB,SAASkD,GAC5B,OAAKjvB,UAAUzH,QACfuP,EAAQikB,eAAiBkD,EAClB3C,GAFuBxkB,EAAQikB,gBAK1CO,EAAMR,iBAAmB,SAASmD,GAC9B,OAAKjvB,UAAUzH,QACfuP,EAAQgkB,iBAAmBmD,EACpB3C,GAFuBxkB,EAAQgkB,kBAK1CQ,EAAMrW,cAAgB,SAASgZ,GAC3B,OAAKjvB,UAAUzH,QACfuP,EAAQmO,cAAgBgZ,EACjB3C,GAFuBxkB,EAAQmO,eAK1CqW,EAAMN,qBAAuB,SAASiD,GAClC,OAAKjvB,UAAUzH,QACfuP,EAAQkkB,qBAAuBiD,EACxB3C,GAFuBxkB,EAAQkkB,sBAK1CM,EAAML,sBAAwB,SAASgD,GACnC,OAAKjvB,UAAUzH,QACfuP,EAAQmkB,sBAAwBgD,EACzB3C,GAFuBxkB,EAAQmkB,uBAK1CK,EAAMJ,oBAAsB,SAAS+C,GACjC,OAAKjvB,UAAUzH,QACfuP,EAAQokB,oBAAsB+C,EACvB3C,GAFuBxkB,EAAQokB,qBAK1CI,EAAMH,UAAY,SAAS8C,GACvB,OAAKjvB,UAAUzH,QACfuP,EAAQqkB,UAAY8C,EACb3C,GAFuBxkB,EAAQqkB,WAK1CG,EAAMF,aAAe,SAAS6C,GAC1B,OAAKjvB,UAAUzH,QACfuP,EAAQskB,aAAe6C,EAChB3C,GAFuBxkB,EAAQskB,cAKnCE,ECrWJ,SAAS4C,EAAWtU,GACvB,IAAI9S,EAAU,CACVsE,MAAS,IACTyf,OAAU,IACVC,iBAAoB,EACpBC,eAAkB,EAElB9V,cAAiB,GACjB+V,sBAAwB,EACxBC,sBAAyB,EACzBC,qBAAuB,EAEvBC,UAAa,SACbC,aAAgB,OAGhBtkB,EAAUtY,OAAO68B,OAAOvkB,EAAS8S,GAErC,SAASuU,EAAe5C,GAEpBA,EAAUrK,KAAK,SAAS9yB,GACpB4a,GAAGK,OAAOpY,MACToZ,KAAK,YAAa,SAASjc,GAAK,MAAO,aAAeA,EAAEqF,EAAI,IAAMrF,EAAEsF,EAAI,MACxEyV,OAAO,QACPkB,KAAK,QAAS,SAASjc,GAAK,OAAOwO,KAAK2C,IAAI,EAAGnR,EAAEs4B,MACjDrc,KAAK,SAAU,SAASjc,GAAK,OAAOwO,KAAK2C,IAAI,EAAGnR,EAAEu4B,MAGnD,IAAI2E,EAAQV,EAAQ9jB,GACnBsE,MAAOxO,KAAK2C,IAAI,EAAGnR,EAAEs4B,KACrBmE,OAAQjuB,KAAK2C,IAAI,EAAGnR,EAAEu4B,KAEnB,cAAev4B,GAAG4a,GAAGK,OAAOpY,MAAMhD,KAAKq9B,KAInD,IAAIA,EAAQ,SAASC,GACjBA,EAAUrK,KAAK,SAAS3nB,GACpBgQ,QAAQpD,IAAI,QAAS5M,GAQrB,IAAI60B,EAAUplB,GAAGsR,OAAO8T,UACvB10B,KAAK,CAACoN,EAAQsE,MAAOtE,EAAQ+jB,SAC7BwD,QAAO,GACPt/B,MAAM,SAASX,GAAK,OAAOA,EAAEsL,OAKjBsP,GAAGK,OAAOpY,MAClBkY,OAAO,KACPC,QAAQ,cAAc,GACA8a,MAAM3qB,GAAM0P,UAAU,gBAC5C1P,KAAK60B,EAAQnd,OACb/H,QACAC,OAAO,KACPC,QAAQ,eAAe,GACvBnb,KAAKkgC,MA4ElB,OAxEA7C,EAAMlgB,MAAQ,SAAS6iB,GACnB,OAAKjvB,UAAUzH,QACfuP,EAAQsE,MAAQ6iB,EACT3C,GAFuBxkB,EAAQsE,OAK1CkgB,EAAMT,OAAS,SAASoD,GACpB,OAAKjvB,UAAUzH,QACfuP,EAAQ+jB,OAASoD,EACV3C,GAFuBxkB,EAAQ+jB,QAK1CS,EAAMN,qBAAuB,SAASiD,GAClC,OAAKjvB,UAAUzH,QACfuP,EAAQkkB,qBAAuBiD,EACxB3C,GAFuBxkB,EAAQkkB,sBAK1CM,EAAMP,eAAiB,SAASkD,GAC5B,OAAKjvB,UAAUzH,QACfuP,EAAQikB,eAAiBkD,EAClB3C,GAFuBxkB,EAAQikB,gBAK1CO,EAAMR,iBAAmB,SAASmD,GAC9B,OAAKjvB,UAAUzH,QACfuP,EAAQgkB,iBAAmBmD,EACpB3C,GAFuBxkB,EAAQgkB,kBAK1CQ,EAAMrW,cAAgB,SAASgZ,GAC3B,OAAKjvB,UAAUzH,QACfuP,EAAQmO,cAAgBgZ,EACjB3C,GAFuBxkB,EAAQmO,eAK1CqW,EAAMN,qBAAuB,SAASiD,GAClC,OAAKjvB,UAAUzH,QACfuP,EAAQkkB,qBAAuBiD,EACxB3C,GAFuBxkB,EAAQkkB,sBAK1CM,EAAML,sBAAwB,SAASgD,GACnC,OAAKjvB,UAAUzH,QACfuP,EAAQmkB,sBAAwBgD,EACzB3C,GAFuBxkB,EAAQmkB,uBAK1CK,EAAMJ,oBAAsB,SAAS+C,GACjC,OAAKjvB,UAAUzH,QACfuP,EAAQokB,oBAAsB+C,EACvB3C,GAFuBxkB,EAAQokB,qBAK1CI,EAAMH,UAAY,SAAS8C,GACvB,OAAKjvB,UAAUzH,QACfuP,EAAQqkB,UAAY8C,EACb3C,GAFuBxkB,EAAQqkB,WAK1CG,EAAMF,aAAe,SAAS6C,GAC1B,OAAKjvB,UAAUzH,QACfuP,EAAQskB,aAAe6C,EAChB3C,GAFuBxkB,EAAQskB,cAK1CE,EAAM/H,KAAO,SAAS0K,GAClB,OAAKjvB,UAAUzH,QACfuP,EAAQyc,KAAO0K,EACR3C,GAFuBxkB,EAAQyc,MAKnC+H,EHxGX5S,EAAOhpB,UAAU6uB,sBAAwB,SAASnI,GAC9C,IAKItoB,EALA2F,EAAI,GACPC,EAAI,GACL,GAA0B,IAAtB0iB,EAAW7e,QAAkC,IAAlB6e,EAAW,GACtC,OAAO,EAGXnlB,KAAK6nB,MAAQ1C,EAAW,GACxBnlB,KAAK4nB,MAAQ,GACb,IAAK,IAAIpP,EAAQ,EAAGA,EAAQxY,KAAK6nB,MAAQ,EAAGrP,IACxCxY,KAAK4nB,MAAM5kB,KAAK,IAAIkkB,GAExBlnB,KAAKioB,QAAU,GACf,IAASzP,EAAQ,EAAGA,EAAQxY,KAAK6nB,MAAQ,EAAGrP,IACxCxY,KAAKioB,QAAQjlB,KAAK,IAAI5C,KAE1BJ,KAAKq9B,cAAclY,GACnBnlB,KAAKkoB,QAAU,KACfloB,KAAKs9B,eACLt9B,KAAK+nB,WAAa,EAClB/nB,KAAKgoB,MAAQ,GACb,IAASxP,EAAQ,EAAGA,EAAQxY,KAAK6nB,MAAQ,EAAGrP,IACxCxY,KAAKgoB,MAAMhlB,KAAK,IAAI9C,KAMxB,IAJAF,KAAKu9B,eAAe,GACpBv9B,KAAKw9B,oBACLx9B,KAAKy9B,cAAcz9B,KAAK/D,KAAM,MAEzBY,EAAI,EAAGA,EAAImD,KAAK6nB,MAAOhrB,IACxB2F,EAAEQ,KAAK,IAAMhD,KAAKwoB,kBAAoBxoB,KAAK4nB,MAAM/qB,EAAI,GAAG0G,QACxDd,EAAEO,KAAK,IAAMhD,KAAKwoB,kBAAoBxoB,KAAK4nB,MAAM/qB,EAAI,GAAG4G,QAG5D,MAAO,CACHokB,MAAO7nB,KAAK6nB,MACZrlB,EAAGA,EACHC,EAAGA,IAIXglB,EAAOhpB,UAAU4+B,cAAgB,SAAuBlY,GACpD,IAAItoB,EAAI,KACJ6gC,EAAS,KASb,IANA19B,KAAK4nB,MAAM5kB,KAAK,IAAIkkB,GACpBlnB,KAAK4nB,MAAM,GAAGN,QAAQ,GACtBtnB,KAAK4nB,MAAM,GAAGJ,cAAa,GAC3BxnB,KAAK4nB,MAAM,GAAGpkB,KAAKxD,KAAK0nB,MACxB1nB,KAAK4nB,MAAM,GAAGlkB,KAAK1D,KAAK0nB,MAEnBgW,EAAS,EAAG7gC,EAAI,EAAGA,GAAKmD,KAAK6nB,MAAOhrB,IACrCmD,KAAK4nB,MAAM5kB,KAAK,IAAIkkB,GACpBlnB,KAAK4nB,MAAM/qB,GAAG2qB,cAAa,GAC3BxnB,KAAK4nB,MAAM/qB,GAAG2G,KAAKxD,KAAK0nB,MACxB1nB,KAAK4nB,MAAM/qB,GAAG6G,KAAK1D,KAAK0nB,MACxB1nB,KAAK4nB,MAAM/qB,GAAGyqB,QAAQnC,EAAWtoB,IAC7BsoB,EAAWtoB,GAAKA,GAChB6gC,IAGM,GAAVA,IACA19B,KAAK4nB,MAAM,GAAGN,QAAQtnB,KAAK6nB,OAC3B7nB,KAAK4nB,MAAM5nB,KAAK6nB,OAAOP,QAAQ,KAIvCG,EAAOhpB,UAAU6+B,aAAe,WAC5B,IAEIK,EAFA9gC,EAAI,KACJsqB,EAAO,KAGXwW,EAAM39B,KAAK6nB,MAAQ,EACnB,IAAItlB,EAAO,GACX,IAAK1F,EAAI,EAAGA,EAAI8gC,EAAK9gC,IACjB0F,EAAKS,MAAK,GAGd,IADAhD,KAAK8nB,QAAU,EACVjrB,EAAI,EAAGA,GAAKmD,KAAK6nB,MAAOhrB,IACzB,GAAwC,IAAnCsqB,EAAOnnB,KAAK4nB,MAAM/qB,GAAGwqB,aAAoB9kB,EAAK1F,GAAI,CAOnD,IANAmD,KAAKioB,QAAQjoB,KAAK8nB,SAAS5jB,UAAUrH,GACrCmD,KAAKioB,QAAQjoB,KAAK8nB,SAASnjB,QAAQwiB,GACnC5kB,EAAK1F,IAAK,EACV0F,EAAK4kB,IAAQ,EACbnnB,KAAK4nB,MAAM/qB,GAAGqE,UAAUlB,KAAKioB,QAAQjoB,KAAK8nB,UAC1C9nB,KAAK4nB,MAAMT,GAAMjmB,UAAUlB,KAAKioB,QAAQjoB,KAAK8nB,UACxCjrB,IAAKsqB,IAAQtqB,EAAIsqB,GAAQnnB,KAAK4nB,MAAM/qB,GAAGwqB,WAAaF,EAAMtqB,IAAKsqB,IAChE5kB,EAAK4kB,IAAQ,EACb5kB,EAAK1F,IAAI,EACTmD,KAAK4nB,MAAM/qB,GAAGqE,UAAUlB,KAAKioB,QAAQjoB,KAAK8nB,UAC1C9nB,KAAK4nB,MAAMT,GAAMjmB,UAAUlB,KAAKioB,QAAQjoB,KAAK8nB,UAEjD9nB,KAAKioB,QAAQjoB,KAAK8nB,SAASzjB,UAAUxH,GACrCmD,KAAKioB,QAAQjoB,KAAK8nB,SAAStjB,UAAU2iB,EAAO,GAE5CnnB,KAAK8nB,YAKjBL,EAAOhpB,UAAU8+B,eAAiB,SAAwBK,GACtD,IAAI/gC,EAAI,KACJsqB,EAAO,KACP0W,EAAU,IAAI39B,IACdqlB,EAAK,IAAIrlB,IACT49B,EAAK,IAAIj+B,aACTk+B,EAAK,IAAI39B,IACT49B,EAAM,IAAIvX,EAOd,KANAoX,EAAU79B,KAAKgoB,MAAMhoB,KAAK+nB,eAClBnlB,eAAe,GACvBi7B,EAAQz6B,SAAS,GACjBy6B,EAAQ36B,UAAUlD,KAAK+nB,YACvB8V,EAAQj6B,UAAU,GAEbo6B,EAAMh+B,KAAKkoB,QAAgB,MAAP8V,EAAaA,EAAMA,EAAIlX,UACxCkX,EAAIpX,iBAAmB5mB,KAAK+nB,YAC5B8V,EAAQj6B,UAAUo6B,EAAIr6B,aAC9B9G,EAAI+gC,EACJ,GAC4C,IAAnCzW,EAAOnnB,KAAK4nB,MAAM/qB,GAAGwqB,aACtB0W,EAAK/9B,KAAK4nB,MAAM/qB,GAAGoE,YACdjB,KAAK4nB,MAAMmW,EAAG95B,aAAasjB,gBACxB1qB,GAAKkhC,EAAG95B,aACRjE,KAAK4nB,MAAMmW,EAAG95B,aAAaujB,cAAa,GACxCxnB,KAAK4nB,MAAMmW,EAAG35B,WAAWojB,cAAa,GACtCxnB,KAAK4nB,MAAMmW,EAAGx5B,aAAaijB,cAAa,GACxCxnB,KAAK4nB,MAAMmW,EAAGr5B,WAAW8iB,cAAa,GACtCjC,EAAKvlB,KAAKu9B,eAAeQ,EAAG35B,UAAYpE,KAAK6nB,MAAQkW,EAAG35B,UAAY,EAC1D,IACHvH,GAAKkhC,EAAGx5B,aACfvE,KAAK4nB,MAAMmW,EAAGx5B,aAAaijB,cAAa,GACxCxnB,KAAK4nB,MAAMmW,EAAGr5B,WAAW8iB,cAAa,GACtCxnB,KAAK4nB,MAAMmW,EAAG95B,aAAaujB,cAAa,GACxCxnB,KAAK4nB,MAAMmW,EAAG35B,WAAWojB,cAAa,GACtCjC,EAAKvlB,KAAKu9B,eAAeQ,EAAGr5B,UAAY1E,KAAK6nB,MAAQkW,EAAGr5B,UAAY,EAC1D,IAEV4T,QAAQpD,IAAI,sCAEhB2oB,EAAQj7B,eAAei7B,EAAQl7B,iBAAmB,GAClDm7B,EAAK,IAAIj+B,aACTg+B,EAAQh7B,cAAcg7B,EAAQl7B,iBAAmB,EAAGm7B,GACpDD,EAAQh7B,cAAcg7B,EAAQl7B,iBAAkB,MAChDm7B,EAAG98B,QAAQukB,GACXuY,EAAG58B,UAAU68B,GACVlhC,GAAKkhC,EAAG95B,aACP65B,EAAG18B,SAAS28B,EAAG95B,aACf65B,EAAGx8B,OAAOy8B,EAAGr5B,aAEbo5B,EAAG18B,SAAS28B,EAAGx5B,aACfu5B,EAAGx8B,OAAOy8B,EAAG35B,YAEjB05B,EAAGh8B,aAAY,GACfg8B,EAAG97B,WAAU,GACbujB,EAAG3iB,eAAe2iB,EAAG5iB,iBAAmB,GACxCm7B,EAAK,IAAIj+B,aACT0lB,EAAG1iB,cAAc0iB,EAAG5iB,iBAAmB,EAAGm7B,GAC1CvY,EAAG1iB,cAAc0iB,EAAG5iB,iBAAkB,MACtCm7B,EAAG98B,QAAQ68B,GACXC,EAAG58B,UAAU68B,GACTlhC,GAAKkhC,EAAG95B,aACR65B,EAAG18B,SAAS28B,EAAGx5B,aACfu5B,EAAGx8B,OAAOy8B,EAAG35B,aAEb05B,EAAG18B,SAAS28B,EAAG95B,aACf65B,EAAGx8B,OAAOy8B,EAAGr5B,YAEjBo5B,EAAGh8B,aAAY,GACfg8B,EAAG97B,WAAU,IAEjBnF,EAAIsqB,KAEFtqB,EAAImD,KAAK6nB,QACXhrB,EAAI,SACHA,GAAK+gC,GACd,OAAOC,GAGXpW,EAAOhpB,UAAU++B,kBAAoB,WACjC,IAAIjY,EAAK,IAAIrlB,IACT+9B,EAAU,KACVC,EAAW,KACXrhC,EAAI,KAKR,IAcJ,WACI,IAAI0oB,EAAK,IAAIrlB,IACTrD,EAAI,KACJoN,EAAI,KAER,IAAKpN,EAAI,EAAGA,EAAImD,KAAK+nB,WAAYlrB,IAAK,CAElC,IADA0oB,EAAKvlB,KAAKgoB,MAAMnrB,GACXoN,EAAI,EAAGA,EAAIjK,KAAK+nB,WAAY9d,IAC7BjK,KAAKgoB,MAAM/d,GAAG3G,SAAQ,GAE1BiiB,EAAGniB,SAASd,EAAMijB,MA3BLlnB,KAAK2B,KAAtBm+B,GACAF,EAAU,EACVC,GAAY,EACPrhC,EAAI,EAAGA,EAAImD,KAAK+nB,WAAYlrB,KAC7B0oB,EAAKvlB,KAAKgoB,MAAMnrB,IACT8F,iBAAmBs7B,GACtBC,EAAW3Y,EAAGpiB,WACd86B,EAAU1Y,EAAG5iB,iBACb3C,KAAK/D,KAAOspB,GACLA,EAAGpiB,WAAa+6B,GAChB3Y,EAAG5iB,kBAAoBs7B,IAC9BC,EAAW3Y,EAAGpiB,WACdnD,KAAK/D,KAAOspB,IAgDxBkC,EAAOhpB,UAAUg/B,cAAgB,SAAuBlY,EAAI6Y,GACxD,IAAIC,EAAIC,EAAIC,EAAQC,EAAIC,EAAIpW,EAAU1qB,EAClC+E,EAAQg8B,EAAIC,EAAIC,EAAIC,EAAIC,EAAQC,EAAMvxB,EACtCswB,EAAIkB,EAAQC,EAAKC,EACjBriC,EAAGoN,EAAG3L,EAAG6gC,EACTC,EAAIC,EACJjZ,EAAOkZ,EAASC,EAAOC,EAAUC,EACjCC,EAAMC,EAAsBC,EAC5BC,EACAC,EAAMC,EAAMC,EAAKC,EAAKC,EAAIC,EAAIC,EAAIC,EAAIC,EAAOC,EAAOC,EACpDC,EAAUC,EAAMC,EAAQC,EAAQC,EAChCC,EAAKrL,EAAIC,GAAIqL,GACbC,GAAKC,GAAKC,GAASC,GAASC,GAAUC,GAAKC,GAAIC,GAAKC,GAAKC,GAAIC,GAAIC,GAAKC,GAAIC,GAAIC,GAC9EC,GAAW,EAEf1Z,EAAW,EAAI1c,KAAK+Z,IAAM1lB,KAAK6nB,MAAQ,GACvCoX,EAAM,KACNQ,GAAU,EACV,IAAIuC,GAAS,EAEb,IAAK7C,EAAK,EAAsC,OAAlCrB,EAAKvY,EAAGziB,cAAck/B,KAAkBA,KAAU7C,IAC5Dd,GAAM1yB,KAAK6a,IAAI6B,EAAWyV,EAAG38B,YAC7Bm9B,EAAK3yB,KAAK8W,IAAI4F,EAAWyV,EAAG38B,YAC5Bo9B,GAAM5yB,KAAK6a,IAAI6B,EAAWyV,EAAGz8B,UAE7Bm9B,EADK7yB,KAAK8W,IAAI4F,EAAWyV,EAAGz8B,UAClBi9B,EACVG,EAAKJ,EAAKE,EACV5gC,EAAIgO,KAAK0Y,KAAKma,EAAKA,EAAKC,EAAKA,GAC7BX,EAAGt8B,QAAQg9B,EAAK7gC,GAChBmgC,EAAGp8B,QAAQ+8B,EAAK9gC,GAChBmgC,EAAGl8B,SAAS+J,KAAKs2B,MAAMxD,EAAID,IACvBV,EAAGn8B,WAAa,GAChBm8B,EAAGl8B,SAASk8B,EAAGn8B,WAAa,EAAIgK,KAAK+Z,IAEhB,MAArB0Y,GACOA,EAAkBn9B,aAAe68B,EAAG78B,cAC3Cg+B,EAAMnB,EACN2B,EAASN,GAGjB+C,EAAY,OAAa,CACrBliC,KAAKmiC,iBAAiB5c,EAAIvlB,KAAKmoB,QAC/BzlB,EAAS6iB,EAAG5hB,YAAY3D,KAAKooB,wBACJ,MAArBgW,EACAM,EAAKC,EAAK,GAGVC,GAAM5+B,KAAK4nB,MAAMqX,EAAI99B,YAAYoC,OAASvD,KAAK4nB,MACtCqX,EAAI59B,UAAUkC,QAAU,EACjCs7B,GAAM7+B,KAAK4nB,MAAMqX,EAAI99B,YAAYsC,OAASzD,KAAK4nB,MACtCqX,EAAI59B,UAAUoC,QAAU,EACjCi7B,EAAKE,EAAKl8B,EAASu8B,EAAI19B,UACvBo9B,EAAKE,EAAKn8B,EAASu8B,EAAIx9B,WAWvB69B,GADW,GAAXG,EACU,EAGAA,EAEd3B,EAAKvY,EAAGziB,cAAcw8B,GACtBlZ,EAAQ,EACRsZ,GAAO,EACP,GAaI,IAZAz1B,EAAIq1B,EAAU,GACN,IACJr1B,EAAIsb,EAAG5iB,iBAAmB,GAE9Bu8B,EAAS3Z,EAAGziB,cAAcmH,GACrBjK,KAAKoiC,qBAAqBlD,EAAQpB,IAInCwB,EAAUr1B,EACV6zB,EAAKoB,GAJLQ,GAAO,IAMLtZ,EAAQb,EAAG5iB,iBAAkB,CAI/B,IADA08B,GAAU,EACLF,EAAK,EAAGA,EAAK5Z,EAAG5iB,iBAAkBw8B,KACnCl1B,EAAIk1B,EAAK,IACA5Z,EAAG5iB,mBACRsH,EAAI,GAER6zB,EAAKvY,EAAGziB,cAAcq8B,IAEtBuC,IADA1C,EAASzZ,EAAGziB,cAAcmH,IACdtI,WAAam8B,EAAGn8B,YACnB,IACL+/B,IAAM,EAAI/1B,KAAK+Z,IAEfgc,GAAKrC,IACLA,EAASqC,GACTK,GAAW5C,GAGnBI,EAAQwC,IACRzC,EAAUyC,GAAW,IACNxc,EAAG5iB,mBACd28B,EAAU,IAEdxB,EAAKvY,EAAGziB,cAAcy8B,IACnBv9B,WAAU,GACb09B,GAAO,UAELA,GAGV,IAFAC,GAAuB,EACvBc,EAAWnB,GACHK,GAAsB,CAK1B,IAJAvZ,EAAQ,EACRsZ,GAAO,EACPH,EAAQD,EACRM,GAAS,GACDF,GAUJ,GATA5B,EAAKvY,EAAGziB,cAAcy8B,GAClBA,GAASE,IACTG,GAAS,IAEb31B,EAAIs1B,EAAQ,IACHha,EAAG5iB,mBACRsH,EAAI,GAER+0B,EAASzZ,EAAGziB,cAAcmH,GACtBjK,KAAKoiC,qBAAqBtE,EAAIkB,GAAS,CACvC,KAAM5Y,GAASb,EAAG5iB,iBACd,MAEJ48B,EAAQt1B,OAGRy1B,GAAO,EAQf,IAHAP,EAAKuB,EAAOC,EAFZnB,EAAWx/B,KAAKqiC,eAAe/C,EAASC,EAAOnB,EACvCa,EAAK1Z,GAEbma,GAAO,EACPmB,EAAY,GACJnB,IAEAP,EADA0B,EAAY,EACPH,EAEa,GAAbG,EACArB,EAGAmB,IAEC,IACN7C,EAAKvY,EAAGziB,cAAcq8B,GACG,MAArBf,GAA6Ba,GAAOnB,IACnB,GAAb+C,GACA/B,EAAShB,EAAGn8B,WACFgK,KAAK22B,KAAK,GAAY5/B,GAChCq8B,EAAOjB,EAAGn8B,WACAgK,KAAK22B,KAAK,GAAY5/B,GAChC1C,KAAK4nB,MAAMkW,EAAG38B,YAAYqC,KAClBk7B,EAAKh8B,EAASiJ,KAAK8W,IAAIqc,IAC/B9+B,KAAK4nB,MAAMkW,EAAG38B,YAAYuC,KAClBi7B,EAAKj8B,EAASiJ,KAAK6a,IAAIsY,IAC/B9+B,KAAK4nB,MAAMkW,EAAGz8B,UAAUmC,KAChBk7B,EAAKh8B,EAASiJ,KAAK8W,IAAIsc,IAC/B/+B,KAAK4nB,MAAMkW,EAAGz8B,UAAUqC,KAChBi7B,EAAKj8B,EAASiJ,KAAK6a,IAAIuY,KAE1B8B,EAAY,IACjB52B,EAAIk1B,EAAK,IACA5Z,EAAG5iB,mBACRsH,EAAI,GAER6zB,EAAKvY,EAAGziB,cAAcq8B,GACtBH,EAASzZ,EAAGziB,cAAcmH,GAC1B+2B,GAAMlD,EAAGv8B,UACT0/B,GAAMnD,EAAGr8B,UACTigC,IAAM5D,EAAGn8B,WAAaq9B,EAAOr9B,YAAc,EACvCm8B,EAAGn8B,WAAaq9B,EAAOr9B,aACvB+/B,IAAM/1B,KAAK+Z,IAEf0b,GAAMz1B,KAAK8W,IAAIif,IAEfH,GADM51B,KAAK6a,IAAIkb,IAEfF,IAAOJ,IACPhC,EAAKJ,EAAOr9B,WAAam8B,EAAGn8B,YACnB,IACLy9B,GAAM,EAAIzzB,KAAK+Z,IAIX+b,GAFJ3D,EAAGj8B,aACCu9B,GAAMzzB,KAAK+Z,GAAK,EACX,EAGA,IAIJ,EAET1lB,KAAK4nB,MAAMkW,EAAGz8B,UAAUmC,KAChBxD,KAAK4nB,MAAMoX,EAAO79B,YAAYoC,OACpBk+B,GAAKF,IACvBvhC,KAAK4nB,MAAMkW,EAAGz8B,UAAUqC,KAChB1D,KAAK4nB,MAAMoX,EAAO79B,YAAYsC,OACpBg+B,GAAKD,IACvBxhC,KAAK4nB,MAAMkW,EAAG38B,YAAYqC,KAClBxD,KAAK4nB,MAAMkW,EAAGz8B,UAAUkC,OAAS09B,IACzCjhC,KAAK4nB,MAAMkW,EAAG38B,YAAYuC,KAClB1D,KAAK4nB,MAAMkW,EAAGz8B,UAAUoC,OAASu9B,OAEzC/2B,EAAIk1B,EAAK,GACD,IACJl1B,EAAIsb,EAAG5iB,iBAAmB,GAE9Bm7B,EAAKvY,EAAGziB,cAAcmH,GAEtBi3B,IADAlC,EAASzZ,EAAGziB,cAAcq8B,IACT59B,UACjB4/B,GAAUnC,EAAOv9B,UACjBigC,IAAM5D,EAAGn8B,WAAaq9B,EAAOr9B,YAAc,EACvCm8B,EAAGn8B,WAAaq9B,EAAOr9B,aACvB+/B,IAAM/1B,KAAK+Z,IAEf0b,GAAMz1B,KAAK8W,IAAIif,IAEfH,IADM51B,KAAK6a,IAAIkb,IAEfF,GAAMJ,IACNhC,EAAKJ,EAAOr9B,WAAam8B,EAAGn8B,YACnB,IACLy9B,GAAM,EAAIzzB,KAAK+Z,IAIX+b,GAFJ3D,EAAGj8B,aACCu9B,GAAMzzB,KAAK+Z,GAAK,EACX,EAGA,IAIJ,EAET1lB,KAAK4nB,MAAMoX,EAAO79B,YAAYqC,KACtBxD,KAAK4nB,MAAMkW,EAAGz8B,UAAUkC,OAASk+B,GACvBF,IAClBvhC,KAAK4nB,MAAMoX,EAAO79B,YAAYuC,KACtB1D,KAAK4nB,MAAMkW,EAAGz8B,UAAUoC,OAASg+B,GACvBD,IAClBxhC,KAAK4nB,MAAMoX,EAAO39B,UAAUmC,KACpBxD,KAAK4nB,MAAMoX,EAAO79B,YAAYoC,OACpB49B,IAClBnhC,KAAK4nB,MAAMoX,EAAO39B,UAAUqC,KACpB1D,KAAK4nB,MAAMoX,EAAO79B,YAAYsC,OACpBy9B,OAI1BL,EAAY,GACRF,GAAUpB,EACVoB,GAAU,EAELA,GAAU,KACTA,GAAUpb,EAAG5iB,mBACfg+B,EAAS,GAGjBE,EAAY,IAGRH,GAAQpB,EACRoB,GAAQ,EAEHA,GAAQ,KACPA,EAAO,IACTA,EAAOnb,EAAG5iB,iBAAmB,GAGrCk+B,GAAa,GAEjBnB,GAAgB,GAATgB,IAAyB,GAAXC,EAMzB,IAJAC,EAASrB,EAAQ,IACHha,EAAG5iB,mBACbi+B,EAAS,GAETrB,GAASD,IACCA,GAAWmB,GAAYG,GAAUH,GAuD3C,GAjDA3C,EAAKvY,EAAGziB,cAAcw8B,GACtBN,EAASzZ,EAAGziB,cAAcy8B,GAC1B9J,EAAKz1B,KAAK4nB,MAAMoX,EAAO39B,UAAUkC,OACvBvD,KAAK4nB,MAAMkW,EAAG38B,YAAYoC,OACpCmyB,GAAK11B,KAAK4nB,MAAMoX,EAAO39B,UAAUoC,OACvBzD,KAAK4nB,MAAMkW,EAAG38B,YAAYsC,OACpCq8B,EAAO9/B,KAAK4nB,MAAMkW,EAAG38B,YAAYoC,OAASkyB,EAAK,EAC/CsK,EAAO//B,KAAK4nB,MAAMkW,EAAG38B,YAAYsC,OAASiyB,GAAK,EAE/CwK,EAAKzK,GADLsL,GAAKp1B,KAAK0Y,KAAKoR,EAAKA,EAAKC,GAAKA,KAE9ByK,EAAKzK,GAAKqL,GACVX,EAAK1B,EAAKoB,EACVO,EAAK1B,EAAKoB,EAKVC,GADAM,GAFAF,GADAW,GAAKp1B,KAAK0Y,KAAKoR,EAAKA,EAAKC,GAAKA,KAGjBwK,GADbG,GAAMU,IACiBZ,GACTD,EAAKE,EACnBH,EAAMK,EAAQH,EAAKE,EAEnBL,GADAe,GAAKp1B,KAAK0Y,KAAK2b,EAAMA,EAAMC,EAAMA,GAEjCA,GAAOc,GAKPtL,EAAKz1B,KAAK4nB,MAAMkW,EAAG38B,YAAYoC,OAASm7B,EACxChJ,GAAK11B,KAAK4nB,MAAMkW,EAAG38B,YAAYsC,OAASk7B,GACxC+C,GAAK/1B,KAAKs2B,MAAMvM,GAAID,IACX,IACLiM,IAAM,EAAI/1B,KAAK+Z,IAEnB+P,EAAKz1B,KAAK4nB,MAAMoX,EAAO39B,UAAUkC,OAASm7B,EAC1ChJ,GAAK11B,KAAK4nB,MAAMoX,EAAO39B,UAAUoC,OAASk7B,GAC1CgD,GAAMh2B,KAAKs2B,MAAMvM,GAAID,IACX,IACNkM,IAAO,EAAIh2B,KAAK+Z,IAEhBic,GAAMD,KACNC,IAAO,EAAIh2B,KAAK+Z,IAQpB6a,EAAQ7B,GALJmB,EADA8B,GAAMD,GAAK/1B,KAAK+Z,IACR,EAGD,GAEShjB,EAASs9B,EAC7BQ,EAAQ7B,EAAKkB,EAAOn9B,EAASu9B,EACzBL,EACAlB,GAAM6B,EAAQT,EACdnB,GAAM6B,EAAQT,OAGd,IAAKZ,EAAKG,EAENziC,GADAihC,EAAKvY,EAAGziB,cAAcq8B,IACfh+B,WACPnB,KAAK4nB,MAAM/qB,GAAG2G,KACNxD,KAAK4nB,MAAM/qB,GAAG0G,OAASg9B,EAAQT,GACvC9/B,KAAK4nB,MAAM/qB,GAAG6G,KACN1D,KAAK4nB,MAAM/qB,GAAG4G,OAAS+8B,EAAQT,GACvCljC,EAAIihC,EAAGz8B,SACPrB,KAAK4nB,MAAM/qB,GAAG2G,KACNxD,KAAK4nB,MAAM/qB,GAAG0G,OAASg9B,EAAQT,GACvC9/B,KAAK4nB,MAAM/qB,GAAG6G,KACN1D,KAAK4nB,MAAM/qB,GAAG4G,OAAS+8B,EAAQT,GACnCZ,GAAMI,KAGJJ,GAAM5Z,EAAG5iB,mBACXw8B,EAAK,GAMrBQ,GADAL,EAAUsB,IACwBH,EAEtC,IAAKtB,EAAK,EAAGA,EAAK5Z,EAAG5iB,iBAAkBw8B,IAAM,CA6BzC,GA5BArB,EAAKvY,EAAGziB,cAAcq8B,IACtBl1B,EAAIk1B,EAAK,IACA5Z,EAAG5iB,mBACRsH,EAAI,GAER+0B,EAASzZ,EAAGziB,cAAcmH,GAC1BwrB,EAAKz1B,KAAK4nB,MAAMkW,EAAGz8B,UAAUkC,OAASm7B,EACtChJ,GAAK11B,KAAK4nB,MAAMkW,EAAGz8B,UAAUoC,OAASk7B,EACtC2C,GAAK31B,KAAK0Y,KAAKoR,EAAKA,EAAKC,GAAKA,KAC9BgM,GAAK/1B,KAAKs2B,MAAMvM,GAAID,IACX,IACLiM,IAAM,EAAI/1B,KAAK+Z,IAEnB+P,EAAKz1B,KAAK4nB,MAAMoX,EAAO79B,YAAYoC,OAASm7B,EAC5ChJ,GAAK11B,KAAK4nB,MAAMoX,EAAO79B,YAAYsC,OAASk7B,EAC5C0C,GAAM11B,KAAK0Y,KAAKoR,EAAKA,EAAKC,GAAKA,KAC/BiM,GAAMh2B,KAAKs2B,MAAMvM,GAAID,IACX,IACNkM,IAAO,EAAIh2B,KAAK+Z,IAEhBic,GAAMD,KACNC,IAAO,EAAIh2B,KAAK+Z,IAEpBob,EAAMa,GAAMD,IACZI,GAAM9C,EAAOr9B,WAAam8B,EAAGn8B,aAClB,IACPmgC,IAAO,EAAIn2B,KAAK+Z,IAEhB/Z,KAAKsJ,IAAI6rB,EAAMgB,IAAOn2B,KAAK+Z,GAC3B,GAAIoY,EAAGj8B,aACHyW,QAAQpD,IAAI,oCACFqQ,EAAGtiB,YAAc,+BAE1B,GAAK+7B,EAAO79B,WAAa28B,EAAGz8B,UAAa,EAAG,CAC7Cy8B,EAAGh8B,aAAY,GACf,SAASogC,EAGjB,GAAIpE,EAAGj8B,aACH7B,KAAKuiC,2BAA2BzE,EAAIkB,QAQpC,KALA1gC,EAAI0gC,EAAO79B,WAAa28B,EAAGz8B,UACnB,IACJ/C,GAAK0B,KAAK6nB,MAAQ,GAEtBQ,EAAWyY,EAAMxiC,EACZ2L,EAAI,EAAGA,EAAI3L,EAAG2L,KACfpN,EAAIihC,EAAGz8B,SAAW4I,GACVjK,KAAK6nB,QACThrB,GAAKmD,KAAK6nB,MAAQ,GAGtBkZ,GAAKO,IAAMD,GAAMC,MADjB9zB,EAAIk0B,GAAKz3B,EAAIoe,GACeqZ,IAAMZ,EAClC9gC,KAAK4nB,MAAM/qB,GAAG2G,KAAKk7B,EAAKqC,GAAKp1B,KAAK8W,IAAIjV,IACtCxN,KAAK4nB,MAAM/qB,GAAG6G,KAAKi7B,EAAKoC,GAAKp1B,KAAK6a,IAAIhZ,IAIlD,MAEJ,IAAK2xB,EAAK,EAAGA,EAAK5Z,EAAG5iB,iBAAkBw8B,IAC/BM,GAAUN,IACVrB,EAAKvY,EAAGziB,cAAcq8B,GAEtBn/B,KAAKwiC,gBAAgB1E,GACrB99B,KAAKy9B,cAAcK,EAAG/8B,UAAW+8B,IAMzC,IAHAx/B,EAAI,EACJsjC,GAAK,EACLC,GAAK,EACA1C,EAAK,EAAGA,EAAK5Z,EAAG5iB,iBAAkBw8B,IAYnC,IAXAl1B,EAAIk1B,EAAK,IACA5Z,EAAG5iB,mBACRsH,EAAI,GAER6zB,EAAKvY,EAAGziB,cAAcq8B,GACtBH,EAASzZ,EAAGziB,cAAcmH,GAC1B3L,GAAK,EACLsjC,IAAM5hC,KAAK4nB,MAAMkW,EAAG38B,YAAYoC,OACtBvD,KAAK4nB,MAAMkW,EAAGz8B,UAAUkC,OAClCs+B,IAAM7hC,KAAK4nB,MAAMkW,EAAG38B,YAAYsC,OACtBzD,KAAK4nB,MAAMkW,EAAGz8B,UAAUoC,QAC7Bq6B,EAAGj8B,aACJ,IAAKoI,EAAI6zB,EAAGz8B,SAAW,EAAG4I,GAAK+0B,EAAO79B,WAAY8I,IAC1CA,EAAIjK,KAAK6nB,QACT5d,GAAKjK,KAAK6nB,MAAQ,GAEtBvpB,IACAsjC,IAAM5hC,KAAK4nB,MAAM3d,GAAG1G,OACpBs+B,IAAM7hC,KAAK4nB,MAAM3d,GAAGxG,OAIhC8hB,EAAG/hB,KAAKo+B,GAAKtjC,GACbinB,EAAG7hB,KAAKm+B,GAAKvjC,IAGjBmpB,EAAOhpB,UAAU0jC,iBAAmB,SAA0B5c,EAAI4C,GAC9D,IAAIsa,EAAQC,EAAIlsB,EAAImsB,EAAMC,EAAMlgC,EAAQmgC,EACpChmC,EAAGoN,EAAG3J,EAAKD,EAAOyiC,EAAU,EAC5BhF,EAAK,IAAIj+B,aAAcm/B,EAAS,IAAIn/B,aAGxC,EAAG,CAEC,IADA4iC,EAAS,KACJG,EAAO,EAAKD,EAAO,EAAK9lC,EAAI,EAAGA,EAAI0oB,EAAG5iB,iBAAkB9F,IACzDihC,EAAKvY,EAAGziB,cAAcjG,IACtBoN,EAAIpN,EAAI,IACC0oB,EAAG5iB,mBACRsH,EAAI,GAER+0B,EAASzZ,EAAGziB,cAAcmH,GAC1B3J,EAAMw9B,EAAGz8B,UACThB,EAAQ2+B,EAAO79B,YACHb,IACRD,GAASL,KAAK6nB,MAAQ,IAE1BrR,EAAKwoB,EAAOr9B,WAAam8B,EAAGn8B,aAClB,IACN6U,GAAM,EAAI7K,KAAK+Z,IAanBid,GAAQnsB,GAAM,GANNksB,EALH5E,EAAGj8B,aAIA2U,GAAM7K,KAAK+Z,GAAK,EACX,EAGA,IAPJrlB,EAAQC,GAUQ,GACzBsiC,GAAQpsB,EAAKA,EAAKksB,GAClBG,EAAMrsB,EAAKksB,GACDD,IAAW3E,EAAGj8B,cAAgB6gC,EAAK,IACzCD,EAASI,EACTC,EAAUjmC,IAGlB6F,EAASigC,EAAOC,GAvCR,WAyCJlgC,EAzCI,UA2CJ+/B,EAAS//B,EAASylB,GAClB5C,EAAGziB,cAAcggC,GAAShhC,aAAY,SAErC2gC,EAAS//B,EAASylB,GACvB5C,EAAG5hB,YAAc,EACjBjB,EAAS6iB,EAAG5hB,YAGZ4hB,EAAG3hB,UAAUlB,IAIrB+kB,EAAOhpB,UAAU4jC,eAAiB,SAAwB/C,EAASC,EAAOnB,EAAmBa,EAAK1Z,GAC9F,IAAIa,EAAOjX,EAAKgwB,EAAItiC,EAChB6iC,EAMJ,IAJAtZ,EAAQ,EACRjX,GAAO,EACPgwB,EAAKG,EACLI,GAAO,GACCA,GACAtZ,IAAgC,EAAtBb,EAAG5iB,kBACb2V,QAAQpD,IAAI,qCAES,MAArBkpB,GAA6B7Y,EAAGziB,cAAcq8B,IAAOF,IACrD9vB,EAAMgwB,GAEVO,EAAOP,GAAMI,IACPJ,GAAM5Z,EAAG5iB,mBACXw8B,EAAK,GAGb,IAAY,GAARhwB,EAAW,CACX,IAAKtS,EAAI,EAAGsiC,EAAKG,EAASziC,GAAKupB,EAAQ,GAAK,EAAGvpB,MACrCsiC,GAAM5Z,EAAG5iB,mBACXw8B,EAAK,GAEbhwB,EAAMgwB,EAEV,OAAOhwB,GAGXsY,EAAOhpB,UAAU8jC,2BAA6B,SAAoCzE,EAAIkB,GAClF,IAAIF,EAAQiE,EAAOC,EAAOC,EAAMxN,EAAIC,EAAIwN,EAAIC,EAAIzB,EAAIX,EAAI3B,EAAIgE,EACxD/iC,EAAOC,EAAKhC,EAAG+kC,EAAQC,EACvBC,EAkBJ,GAhBAzE,EAAShB,EAAGn8B,YACZqhC,EAAQD,EAAQ/D,EAAOr9B,YACXm9B,IACRkE,GAAS,EAAIr3B,KAAK+Z,IAEtBud,GAAQnE,EAASkE,GAAS,EAC1B3iC,EAAQy9B,EAAGz8B,UAEX/C,GADAgC,EAAM0+B,EAAO79B,YACHd,GACF,IACJ/B,GAAK0B,KAAK6nB,MAAQ,IAEtBuX,EAAKJ,EAAOr9B,WAAam8B,EAAGn8B,YACnB,IACLy9B,GAAM,EAAIzzB,KAAK+Z,IAEV,GAALpnB,EACA0B,KAAKwjC,yBAAyBnjC,EAAOC,OAEpC,CACDm1B,EAAKz1B,KAAK4nB,MAAMtnB,GAAKiD,OAASvD,KAAK4nB,MAAMvnB,GAAOkD,OAChDmyB,EAAK11B,KAAK4nB,MAAMtnB,GAAKmD,OAASzD,KAAK4nB,MAAMvnB,GAAOoD,OAEhDgyB,GADAsL,EAAKp1B,KAAK0Y,KAAKoR,EAAKA,EAAKC,EAAKA,GAE9BA,GAAMqL,EACFA,GAAM,KAAO3B,GAAMzzB,KAAK+Z,GAAK,KAC7B2d,EAAShjC,EAAQ,GACJL,KAAK6nB,QACdwb,GAAUrjC,KAAK6nB,MAAQ,IAE3Byb,EAAOhjC,EAAM,GACF,IACPgjC,GAAQtjC,KAAK6nB,MAAQ,GAEzB7nB,KAAK4nB,MAAMyb,GAAQ7/B,KAAKxD,KAAK4nB,MAAMvnB,GAAOkD,OAAS,GAAMkyB,GACzDz1B,KAAK4nB,MAAMyb,GAAQ3/B,KAAK1D,KAAK4nB,MAAMvnB,GAAOoD,OAAS,GAAMiyB,GACzD11B,KAAK4nB,MAAM0b,GAAM9/B,KAAKxD,KAAK4nB,MAAMtnB,GAAKiD,OAAS,GAAMkyB,GACrDz1B,KAAK4nB,MAAM0b,GAAM5/B,KAAK1D,KAAK4nB,MAAMtnB,GAAKmD,OAAS,GAAMiyB,GACrDr1B,EAAQgjC,EACR/iC,EAAMgjC,GAEV,GACIC,GAAY,EACZvjC,KAAKwjC,yBAAyBnjC,EAAOC,IACrC+iC,EAAShjC,EAAQ,GACJL,KAAK6nB,QACdwb,GAAUrjC,KAAK6nB,MAAQ,GAE3B4N,EAAKz1B,KAAK4nB,MAAMyb,GAAQ9/B,OAASvD,KAAK4nB,MAAMvnB,GAAOkD,OACnDmyB,EAAK11B,KAAK4nB,MAAMyb,GAAQ5/B,OAASzD,KAAK4nB,MAAMvnB,GAAOoD,QACnDy/B,EAAKv3B,KAAKs2B,MAAMvM,EAAID,IACX,IACLyN,GAAM,EAAIv3B,KAAK+Z,KAEnB0d,EAAMF,EAAKpE,GACD,IACNsE,GAAO,EAAIz3B,KAAK+Z,IAEhB0d,EAAMz3B,KAAK+Z,KACX6d,GAAY,IAEhBD,EAAOhjC,EAAM,GACF,IACPgjC,GAAQtjC,KAAK6nB,MAAQ,GAEzB4N,EAAKz1B,KAAK4nB,MAAM0b,GAAM//B,OAASvD,KAAK4nB,MAAMtnB,GAAKiD,OAC/CmyB,EAAK11B,KAAK4nB,MAAM0b,GAAM7/B,OAASzD,KAAK4nB,MAAMtnB,GAAKmD,QAC/C0/B,EAAKx3B,KAAKs2B,MAAMvM,EAAID,IACX,IACL0N,GAAM,EAAIx3B,KAAK+Z,KAEnB0d,EAAML,EAAQI,GACJ,IACNC,GAAO,EAAIz3B,KAAK+Z,IAEhB0d,EAAMz3B,KAAK+Z,KACX6d,GAAY,GAEZA,IACA7B,EAAK1hC,KAAKyjC,MAAMR,EAAMnE,EAAS,IAC/B9+B,KAAK4nB,MAAMyb,GAAQ7/B,KACXxD,KAAK4nB,MAAMvnB,GAAOkD,OAASoI,KAAK8W,IAAIif,IAC5C1hC,KAAK4nB,MAAMyb,GAAQ3/B,KACX1D,KAAK4nB,MAAMvnB,GAAOoD,OAASkI,KAAK6a,IAAIkb,IAC5CrhC,EAAQgjC,EACR3B,EAAK1hC,KAAK0jC,MAAMT,EAAMD,EAAQ,IAC9BhjC,KAAK4nB,MAAM0b,GAAM9/B,KAAKxD,KAAK4nB,MAAMtnB,GAAKiD,OAASoI,KAAK8W,IAAIif,IACxD1hC,KAAK4nB,MAAM0b,GAAM5/B,KAAK1D,KAAK4nB,MAAMtnB,GAAKmD,OAASkI,KAAK6a,IAAIkb,IACxDphC,EAAMgjC,EACNhlC,GAAK,SAEJilC,GAAajlC,EAAI,KAIlCmpB,EAAOhpB,UAAU+kC,yBAA2B,SAAkCnjC,EAAOC,GACjF,IAAIm1B,EAAIC,EAAIqL,EAAIjB,EAAMC,EAAMvB,EAAIC,EAAIuB,EAAKC,EAAKC,EAAIC,EAAI3yB,EAClD1Q,EAAGmN,EAAGpN,EASV,GAPA44B,EAAKz1B,KAAK4nB,MAAMtnB,GAAKiD,OAASvD,KAAK4nB,MAAMvnB,GAAOkD,OAChDmyB,EAAK11B,KAAK4nB,MAAMtnB,GAAKmD,OAASzD,KAAK4nB,MAAMvnB,GAAOoD,OAChDs9B,EAAKp1B,KAAK0Y,KAAKoR,EAAKA,EAAKC,EAAKA,IAC9B54B,EAAIwD,EAAMD,GACF,IACJvD,GAAKkD,KAAK6nB,MAAQ,GAElBkZ,GAAMjkC,EAGN,IAFA24B,GAAMsL,EACNrL,GAAMqL,EACD92B,EAAI,EAAGA,EAAInN,EAAGmN,KACfpN,EAAIwD,EAAQ4J,GACJjK,KAAK6nB,QACThrB,GAAKmD,KAAK6nB,MAAQ,GAEtB7nB,KAAK4nB,MAAM/qB,GAAG2G,KACNxD,KAAK4nB,MAAMvnB,GAAOkD,OAASkyB,EAAKxrB,EAAInN,GAC5CkD,KAAK4nB,MAAM/qB,GAAG6G,KACN1D,KAAK4nB,MAAMvnB,GAAOoD,OAASiyB,EAAKzrB,EAAInN,QAiBhD,IAbAkD,KAAK2jC,oBAAqB7mC,EAAI,EAAIikC,GAClCtL,GAAMsL,EACNrL,GAAMqL,EACNjB,EAAO9/B,KAAK4nB,MAAMvnB,GAAOkD,OAASkyB,EAAKsL,EAAK,EAC5ChB,EAAO//B,KAAK4nB,MAAMvnB,GAAOoD,OAASiyB,EAAKqL,EAAK,EAC5CvC,EAAK9I,EACL+I,GAAMhJ,EACNuK,EAAMF,EAAO9/B,KAAKsoB,GAAKkW,EACvByB,EAAMF,EAAO//B,KAAKsoB,GAAKmW,EACvByB,EAAKlgC,KAAK4nB,MAAMvnB,GAAOkD,OAASy8B,EAChCG,EAAKngC,KAAK4nB,MAAMvnB,GAAOoD,OAASw8B,EAChCc,EAAKp1B,KAAK0Y,KAAK6b,EAAKA,EAAKC,EAAKA,GAC9B3yB,EAAI7B,KAAKs2B,MAAM9B,EAAID,GACdj2B,EAAI,EAAGA,EAAInN,EAAGmN,KACfpN,EAAIwD,EAAQ4J,GACJjK,KAAK6nB,QACThrB,GAAKmD,KAAK6nB,MAAQ,GAEtB7nB,KAAK4nB,MAAM/qB,GAAG2G,KAAKw8B,EAAMe,EAAKp1B,KAAK8W,IAAIjV,EAAIvD,EAAIjK,KAAKqoB,WACpDroB,KAAK4nB,MAAM/qB,GAAG6G,KAAKu8B,EAAMc,EAAKp1B,KAAK6a,IAAIhZ,EAAIvD,EAAIjK,KAAKqoB,YAKhEZ,EAAOhpB,UAAUklC,oBAAsB,SAA6BrlC,EAAG0K,GACnE,IAAI46B,EAAGC,EAAKC,EAAMnmC,EAAGomC,EAAMC,EAAOj/B,EAC9Bk/B,EAIJH,IAFAD,GAAOvlC,EAAI,GAAOqN,KAAK+Z,IAET1c,GAAK1K,EAAI,SAAW0K,GAC9BA,EAAI,IAEJ86B,EAAO,GAEXG,EAAO,EACP,GACIL,GAAKC,EAAMC,GAAQ,EAEnBC,EAAO,EAAM,KADbpmC,EAAIgO,KAAK0Y,KAAKuf,EAAIA,EAAI56B,EAAIA,EAAI,IACNrL,GACpBgO,KAAKsJ,IAAI8uB,GAAQ,GACjBzrB,QAAQpD,IAAI,6CAA+C6uB,EACzC,IAAMpmC,IAI5BoH,GAFAi/B,EAAQr4B,KAAKu4B,KAAKH,KAELzlC,EAAI,GAAK,EADhBqN,KAAKu4B,KAAKN,EAAIjmC,GACY,EAAIgO,KAAK+Z,IACjC,EACJoe,EAAOF,EAGPC,EAAMD,QAELj4B,KAAKsJ,IAAIlQ,GAAK,QAAYk/B,EAAOjkC,KAAK2nB,SAC3Csc,GAAQjkC,KAAK2nB,UACTwc,wBACA7rB,QAAQpD,IAAI,2CACZivB,uBAAwB,GAE5BP,EAAI,EACJI,EAAQ,GAEZhkC,KAAKsoB,GAAKsb,EACV5jC,KAAKqoB,SAAW2b,GAGpBvc,EAAOhpB,UAAU+jC,gBAAkB,SAAyB1E,GACxD,IAAIhhC,EAAGuD,EAAOC,EAAKzD,EAAGsqB,EAClB4W,EAiBJ,IAfAA,EAAKD,EAAG78B,YACRnE,EAAI,EACAghC,EAAG38B,YAAc48B,EAAG95B,aACpB5D,EAAQ09B,EAAG95B,YACX3D,EAAMy9B,EAAG35B,YAGT/D,EAAQ09B,EAAGx5B,YACXjE,EAAMy9B,EAAGr5B,YAET1E,KAAK4nB,MAAMkW,EAAG38B,YAAYoC,OAASvD,KAAK0nB,KAAO,KACxC1nB,KAAK4nB,MAAMkW,EAAGz8B,UAAUkC,OAASvD,KAAK0nB,KAAO,MACpDpP,QAAQpD,IACA,kEAEPrY,EAAIwD,EAAQ,EAAGxD,GAAKyD,EAAKzD,IAC1BC,IACAkD,KAAK4nB,MAAM/qB,GAAG2G,KACNxD,KAAK4nB,MAAMkW,EAAG38B,YAAYoC,OAASvD,KAAKuoB,aAAezrB,EAC7CghC,EAAGv8B,WACrBvB,KAAK4nB,MAAM/qB,GAAG6G,KACN1D,KAAK4nB,MAAMkW,EAAG38B,YAAYsC,OAASzD,KAAKuoB,aAAezrB,EAC7CghC,EAAGr8B,WACrB0lB,EAAOnnB,KAAK4nB,MAAM/qB,GAAGwqB,UACrBrnB,KAAK4nB,MAAMT,GAAM3jB,KACTxD,KAAK4nB,MAAMkW,EAAGz8B,UAAUkC,OAASvD,KAAKuoB,aAAezrB,EAC3CghC,EAAGv8B,WACrBvB,KAAK4nB,MAAMT,GAAMzjB,KACT1D,KAAK4nB,MAAMkW,EAAGz8B,UAAUoC,OAASzD,KAAKuoB,aAAezrB,EAC3CghC,EAAGr8B,YAK7BgmB,EAAOhpB,UAAUglC,MAAQ,SAAe3O,EAAIE,GACxC,OAASF,EAAOE,EAAQF,EAAOE,GAGnCvN,EAAOhpB,UAAUilC,MAAQ,SAAe5O,EAAIE,GACxC,OAASF,EAAOE,EAAQF,EAAOE,GAGnCvN,EAAOhpB,UAAU2jC,qBAAuB,SAA8BtE,EAAIkB,GACtE,QAAIlB,EAAGj8B,cAGEi8B,EAAGz8B,SAAW,GAAK29B,EAAO79B,YI9jCvCxE,EAAAQ,EAAAyC,EAAA,mCAAA6oB,IAAA9rB,EAAAQ,EAAAyC,EAAA,4BAAA+5B,IAAAh9B,EAAAQ,EAAAyC,EAAA,+BAAAq9B","file":"fornac.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fornac\"] = factory(require(\"d3\"));\n\telse\n\t\troot[\"fornac\"] = factory(root[\"d3\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fornacPlot\":\"fornac-fornacPlot\",\"node\":\"fornac-node\",\"label\":\"fornac-label\",\"outlineNode\":\"fornac-outlineNode\",\"protein\":\"fornac-protein\",\"hiddenOutline\":\"fornac-hiddenOutline\",\"link\":\"fornac-link\",\"rnaName\":\"fornac-rnaName\",\"transparent\":\"fornac-transparent\",\"dragLine\":\"fornac-dragLine\",\"dragLineHidden\":\"fornac-dragLineHidden\",\"nodeLabel\":\"fornac-nodeLabel\",\"selected\":\"fornac-selected\",\"brush\":\"fornac-brush\",\"noselect\":\"fornac-noselect\"};\n    if(module.hot) {\n      // 1558628946803\n      var cssReload = require(\"/home/jango/Git/fornac/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"locals\":true});\n      module.hot.dispose(cssReload);\n      \n    }\n  ","// The MIT License (MIT)\n//\n// Copyright (c) 2014 Jonas Finnemann Jensen\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nmodule.exports = require('./slugid');\n","import {Loop} from './loop.js';\nimport {Region} from './region.js';\n\nexport function Connection() {\n\tthis.loop = new Loop();\n\tthis.region = new Region();\n\t// Start and end form the 1st base pair of the region.\n\tthis.start = null;\n    this.end = null;\n\tthis.xrad = null;\n    this.yrad = null;\n    this.angle = null;\n\t// True if segment between this connection and the\n\t// next must be extruded out of the circle\n\tthis.extruded = null;\n\t// True if the extruded segment must be drawn long.\n\tthis.broken = null;\n\n\tthis._isNull = false;\n}\n\nConnection.prototype.isNull = function(){\n\treturn this._isNull;\n}\n\nConnection.prototype.setNull = function(isNull){\n\tthis._isNull = isNull;\n}\n\nConnection.prototype.getLoop = function(){\n\treturn this.loop;\n}\n\nConnection.prototype.setLoop = function(loop) {\n\tthis.loop = loop;\n}\n\nConnection.prototype.getRegion = function(){\n\treturn this.region;\n}\n\nConnection.prototype.setRegion = function(region){\n\tthis.region = region;\n}\n\nConnection.prototype.getStart = function(){\n\treturn this.start;\n}\n\nConnection.prototype.setStart = function(start) {\n\tthis.start = start;\n}\n\nConnection.prototype.getEnd = function(){\n\treturn this.end;\n}\n\nConnection.prototype.setEnd = function(end){\n\tthis.end = end;\n}\n\nConnection.prototype.getXrad = function(){\n\treturn this.xrad;\n}\n\nConnection.prototype.setXrad = function(xrad){\n\tthis.xrad = xrad;\n}\n\nConnection.prototype.getYrad = function(){\n\treturn this.yrad;\n}\n\nConnection.prototype.setYrad = function(yrad) {\n\tthis.yrad = yrad;\n}\n\nConnection.prototype.getAngle = function(){\n\treturn this.angle;\n}\n\nConnection.prototype.setAngle = function(angle){\n\tthis.angle = angle;\n}\n\nConnection.prototype.isExtruded = function(){\n\treturn this.extruded;\n}\n\nConnection.prototype.setExtruded = function(extruded){\n\tthis.extruded = extruded;\n}\n\nConnection.prototype.isBroken = function(){\n\treturn this.broken;\n}\n\nConnection.prototype.setBroken = function(broken){\n\tthis.broken = broken;\n}\n","import {Connection} from './connection.js';\n\nexport function Loop() {\n\tthis.nconnection = null;\n\tthis.connections = [];\n\tthis._connections = [];\n\tthis.number = null;\n\tthis.depth = null;\n\tthis.mark = null;\n\tthis.x = null;\n    this.y = null;\n    this.radius = null;\n}\n\nLoop.prototype.getNconnection = function() {\n\treturn this.nconnection;\n}\n\nLoop.prototype.setNconnection = function(nconnection) {\n\tthis.nconnection = nconnection;\n}\n\nLoop.prototype.setConnection = function(i, c){\n\tif (c != null){\n\t\tthis._connections[i] = c;\n    }\n\telse {\n\t\tif (!this._connections[i]){\n\t\t\tthis._connections[i] = new Connection();\n\t\t}\n\t\tthis._connections[i].setNull(true);\n\t}\n}\n\nLoop.prototype.getConnection = function(i){\n\tvar Connection = require(\"./connection\");\n\tif (!this._connections[i]){\n        this._connections[i] = new Connection();\n    }\n\tvar c = this._connections[i];\n\tif (c.isNull()){\n\t\treturn null;\n    }\n\telse {\n\t\treturn c;\n    }\n}\n\nLoop.prototype.addConnection = function(i, c){\n\tthis._connections.push(c);\n}\n\nLoop.prototype.getNumber = function(){\n\treturn this.number;\n}\n\nLoop.prototype.setNumber = function(number){\n\tthis.number = number;\n}\n\nLoop.prototype.getDepth = function(){\n\treturn this.depth;\n}\n\nLoop.prototype.setDepth = function(depth){\n\tthis.depth = depth;\n}\n\nLoop.prototype.isMark = function(){\n\treturn this.mark;\n}\n\nLoop.prototype.setMark = function(mark){\n\tthis.mark = mark;\n}\n\nLoop.prototype.getX = function(){\n\treturn this.x;\n}\n\nLoop.prototype.setX = function(x){\n\tthis.x = x;\n}\n\nLoop.prototype.getY = function(){\n\treturn this.y;\n}\n\nLoop.prototype.setY = function(y){\n\tthis.y = y;\n}\n\nLoop.prototype.getRadius = function(){\n\treturn this.radius;\n}\n\nLoop.prototype.setRadius = function(radius){\n\tthis.radius = radius;\n}\n","export function Region() {\n\tthis._start1 = null;\n    this._end1 = null;\n    this._start2 = null;\n    this._end2 = null;\n}\n\nRegion.prototype.getStart1 = function(){\n\treturn this._start1;\n}\n\nRegion.prototype.setStart1 = function(start1){\n\tthis._start1 = start1;\n}\n\nRegion.prototype.getEnd1 = function(){\n\treturn this._end1;\n}\n\nRegion.prototype.setEnd1 = function(end1){\n\tthis._end1 = end1;\n}\n\nRegion.prototype.getStart2 = function(){\n\treturn this._start2;\n}\n\nRegion.prototype.setStart2 = function(start2){\n\tthis._start2 = start2;\n}\n\nRegion.prototype.getEnd2 = function(){\n\treturn this._end2;\n}\n\nRegion.prototype.setEnd2 = function(end2){\n\tthis._end2 = end2;\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = __webpack_public_path__ + \"fa9b45d63b40299e0188927ca7d381a3.svg\";","// The MIT License (MIT)\n//\n// Copyright (c) 2014 Jonas Finnemann Jensen\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nvar uuid = require('uuid');\n\n/**\n * Returns the given uuid as a 22 character slug. This can be a regular v4\n * slug or a \"nice\" slug.\n */\nexports.encode = function(uuid_) {\n  var bytes   = uuid.parse(uuid_);\n  var base64  = (new Buffer(bytes)).toString('base64');\n  var slug = base64\n              .replace(/\\+/g, '-')  // Replace + with - (see RFC 4648, sec. 5)\n              .replace(/\\//g, '_')  // Replace / with _ (see RFC 4648, sec. 5)\n              .substring(0, 22);    // Drop '==' padding\n  return slug;\n};\n\n/**\n * Returns the uuid represented by the given v4 or \"nice\" slug\n */\nexports.decode = function(slug) {\n  var base64 = slug\n                  .replace(/-/g, '+')\n                  .replace(/_/g, '/')\n                  + '==';\n  return uuid.unparse(new Buffer(base64, 'base64'));\n};\n\n/**\n * Returns a randomly generated uuid v4 compliant slug\n */\nexports.v4 = function() {\n  var bytes   = uuid.v4(null, new Buffer(16));\n  var base64  = bytes.toString('base64');\n  var slug = base64\n              .replace(/\\+/g, '-')  // Replace + with - (see RFC 4648, sec. 5)\n              .replace(/\\//g, '_')  // Replace / with _ (see RFC 4648, sec. 5)\n              .substring(0, 22);    // Drop '==' padding\n  return slug;\n};\n\n/** \n * Returns a randomly generated uuid v4 compliant slug which conforms to a set\n * of \"nice\" properties, at the cost of some entropy. Currently this means one\n * extra fixed bit (the first bit of the uuid is set to 0) which guarantees the\n * slug will begin with [A-Za-f]. For example such slugs don't require special\n * handling when used as command line parameters (whereas non-nice slugs may\n * start with `-` which can confuse command line tools).\n *\n * Potentially other \"nice\" properties may be added in future to further\n * restrict the range of potential uuids that may be generated.\n */\nexports.nice = function() {\n  var bytes   = uuid.v4(null, new Buffer(16));\n  bytes[0] = bytes[0] & 0x7f;  // unset first bit to ensure [A-Za-f] first char\n  var base64  = bytes.toString('base64');\n  var slug = base64\n              .replace(/\\+/g, '-')  // Replace + with - (see RFC 4648, sec. 5)\n              .replace(/\\//g, '_')  // Replace / with _ (see RFC 4648, sec. 5)\n              .substring(0, 22);    // Drop '==' padding\n  return slug;\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n","\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","import './d3-context-menu.css';\nimport ArrowIcon from './img/play.svg';\n\nimport d3 from 'd3';\nimport slugid from 'slugid';\n\nexport function contextMenu(menu, opts) {\n    let previouslyMouseUp = false;\n    let clickAway = () => {};\n    let uid = slugid.nice();\n    let rootElement = null;\n    let orientation = 'right';   // display the menu to the right of the mouse click\n                                 // or parent elemement\n    let initialPos = null;\n    let parentStart = null;\n\n    var openCallback,\n        closeCallback;\n\n    if (typeof opts === 'function') {\n        openCallback = opts;\n    } else {\n        opts = opts || {};\n        openCallback = opts.onOpen;\n        closeCallback = opts.onClose;\n    }\n\n    if ('rootElement' in opts)\n        rootElement = opts['rootElement']\n\n    if ('pos' in opts) {\n        // do we want to place this menu somewhere specific?\n        initialPos = opts.pos;\n    }\n\n    if ('orientation' in opts) {\n        orientation = opts.orientation;\n    }\n\n    if ('parentStart' in opts) {\n        parentStart = opts.parentStart;\n    }\n\n    // create the div element that will hold the context menu\n    d3.selectAll('.d3-context-menu-' + uid).data([1])\n        .enter()\n        .append('div')\n        .classed('d3-context-menu', true)\n        .classed('d3-context-menu-' + uid, true)\n\n    // close menu\n    d3.select('body').on('click.d3-context-menu-' + uid, function() {\n        if (previouslyMouseUp) {\n            previouslyMouseUp = false;\n            return;\n        }\n       console.log('body click close');\n\n        d3.select('.d3-context-menu-' + uid).style('display', 'none');\n       orientation = 'right';\n\n        if (closeCallback) {\n            closeCallback();\n        }\n    });\n\n    // this gets executed when a contextmenu event occurs\n    return function(data, index, pMouseUp=false,\n                    clickAwayFunc = function() { } ) {\n        var elm = this;\n        var contextMenuPos = null;\n        let mousePos = null;\n        let currentThis = this;\n\n        if (rootElement == null)\n            mousePos = d3.mouse(this);\n        else\n            mousePos = d3.mouse(rootElement); // for recursive menus, we need the mouse\n                                              // position relative to another element\n\n        clickAway = clickAwayFunc;\n        let openChildMenuUid = null;\n\n        previouslyMouseUp = pMouseUp;\n\n        d3.selectAll('.d3-context-menu-' + uid).html('');\n        var list = d3.selectAll('.d3-context-menu-' + uid)\n            .on('contextmenu', function(d) {\n                console.log('context-menu close');\n                d3.select('.d3-context-menu-' + uid).style('display', 'none'); \n                orientation = 'right';\n\n                d3.event.preventDefault();\n                d3.event.stopPropagation();\n            })\n            .append('ul');\n\n        list.selectAll('li').data(typeof menu === 'function' ? menu(data) : menu).enter()\n            .append('li')\n            .attr('class', function(d) {\n                console.log('d:', d);\n                var ret = '';\n                if (d.divider) {\n                    ret += ' is-divider';\n                }\n                if (d.disabled) {\n                    ret += ' is-disabled';\n                }\n                if (!d.action) {\n                    ret += ' is-header';\n                }\n                if ('children' in d) {\n                    ret += ' d3-context-menu-recursive';\n                }\n                return ret;\n            })\n            .html(function(d) {\n                if (d.divider) {\n                    return '<hr>';\n                }\n                if (!d.title) {\n                    console.error('No title attribute set. Check the spelling of your options.');\n                }\n                return (typeof d.title === 'string') ? d.title : d.title(data);\n            })\n            .on('click', function(d, i) {\n                if (d.disabled) return; // do nothing if disabled\n                if (!d.action) return; // headers have no \"action\"\n                d.action(elm, data, index, mousePos);\n                console.log('click close');\n\n                // close all context menus\n                d3.selectAll('.d3-context-menu').style('display', 'none');\n                orientation = 'right';\n\n                if (closeCallback) {\n                    closeCallback();\n                }\n            })\n            .on('mouseenter', function(d, i) {\n                d3.select(this)\n                    .classed('d3-context-menu-selected', true)\n\n                if (openChildMenuUid != null) {\n                    // there's a child menu open\n\n                    // unselect all items\n                    d3.select('.d3-context-menu-' + uid)\n                        .selectAll('li')\n                        .classed('d3-context-menu-selected', false);\n\n                    if (typeof d.children == 'undefined') {\n                        console.log(\"no children close\");\n                        // no children, so hide any open child menus\n                        d3.select('.d3-context-menu-' + openChildMenuUid)\n                        .style('display', 'none');\n\n                        openChildMenuUid = null;\n                        return;\n                    }\n\n                    if (d.childUid == openChildMenuUid) {\n                        // the correct child menu is already open\n                        return;\n\n                    } else {\n                        // need to open a different child menu\n                        console.log('open different child menu close');\n                        \n                        // close the already open one\n                        d3.select('.d3-context-menu-' + openChildMenuUid)\n                        .style('display', 'none');\n\n                        openChildMenuUid = null;\n\n                    }\n                }             \n\n                // there should be no menu open right now\n                if (typeof d.children != 'undefined') {\n                    let boundingRect = this.getBoundingClientRect();\n\n                    let childrenContextMenu = null\n                    if (orientation == 'left') {\n                        childrenContextMenu = contextMenu(d.children, {'rootElement': currentThis,\n                              'pos': [ boundingRect.left + window.pageXOffset,\n                                    boundingRect.top - 2 + window.pageYOffset],\n                        'orientation': 'left'});\n                    } else {\n                        childrenContextMenu = contextMenu(d.children, \n                                      {\n                                          'pos': [ boundingRect.left + boundingRect.width + window.pageXOffset,\n                                                boundingRect.top - 2 + window.pageYOffset],\n                                       'rootElement': currentThis,\n                                    'parentStart': [boundingRect.left + window.pageXOffset,\n                                      boundingRect.top - 2 + window.pageYOffset]});\n                    }\n\n                    d.childUid = childrenContextMenu.apply(this, [data,i,true,\n                                                           function() { }]);\n                    openChildMenuUid = d.childUid;\n                }\n\n\n                d3.select(this)\n                    .classed('d3-context-menu-selected', true)\n            \n            })\n            .on('mouseleave', function(d, i) {\n\n                if (openChildMenuUid == null) {\n                    d3.select(this)\n                        .classed('d3-context-menu-selected', false);\n                }\n            });\n\n            list.selectAll('.d3-context-menu-recursive')\n            .append('img')\n            .attr('src', ArrowIcon)\n            .attr('width', '14px')\n            .attr('height', '14px')\n            .style('position', 'absolute')\n            .style('right', '5px')\n            ;\n\n        // the openCallback allows an action to fire before the menu is displayed\n        // an example usage would be closing a tooltip\n        if (openCallback) {\n            if (openCallback(data, index) === false) {\n                return uid;\n            }\n        }\n\n        let contextMenuSelection = d3.select('.d3-context-menu-' + uid)\n            .style('display', 'block');\n\n        if (initialPos == null) {\n            d3.select('.d3-context-menu-' + uid)\n            .style('left', (d3.event.pageX - 2) + 'px')\n            .style('top', (d3.event.pageY - 2) + 'px')\n        } else {\n            d3.select('.d3-context-menu-' + uid)\n            .style('left', initialPos[0] + 'px')\n            .style('top', initialPos[1] + 'px')\n        }\n\n        // check if the menu disappears off the side of the window\n        let boundingRect = contextMenuSelection.node().getBoundingClientRect();\n\n        if (boundingRect.left + boundingRect.width > window.innerWidth || orientation == 'left') {\n            orientation = 'left';\n\n            // menu goes of the end of the window, position it the other way\n            if (initialPos == null) {\n                // place the menu where the user clicked\n                d3.select('.d3-context-menu-' + uid)\n                .style('left', (d3.event.pageX - 2 - boundingRect.width) + 'px')\n                .style('top', (d3.event.pageY - 2) + 'px')\n            } else {\n                if (parentStart != null) {\n                    d3.select('.d3-context-menu-' + uid)\n                    .style('left', (parentStart[0] - boundingRect.width) + 'px')\n                    .style('top', parentStart[1] + 'px')\n                } else {\n                    d3.select('.d3-context-menu-' + uid)\n                    .style('left', (initialPos[0] - boundingRect.width) + 'px')\n                    .style('top', initialPos[1] + 'px')\n                }\n            }\n            \n        }\n\n        // display context menu\n\n        if (previouslyMouseUp)\n            return uid;\n\n        d3.event.preventDefault();\n        d3.event.stopPropagation();\n        //d3.event.stopImmediatePropagation();\n        //\n        return uid;\n    };\n};\n","var numberSort = function(a,b) { return a - b; };\n\nexport function arraysEqual(a, b) {\n    // courtesy of \n    // http://stackoverflow.com/questions/3115982/how-to-check-if-two-arrays-are-equal-with-javascript\n  if (a === b) return true;\n  if (a === null || b === null) return false;\n  if (a.length != b.length) return false;\n\n  // If you don't care about the order of the elements inside\n  // the array, you should sort both arrays here.\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nexport function RNAUtilities() {\n    var self = this;\n\n    // the brackets to use when constructing dotbracket strings\n    // with pseudoknots\n    self.bracketLeft =  \"([{<ABCDEFGHIJKLMNOPQRSTUVWXYZ\".split(\"\");\n    self.bracketRight = \")]}>abcdefghijklmnopqrstuvwxyz\".split(\"\");\n\n    self.inverseBrackets = function(bracket) {\n        var res = {};\n        for (var i = 0; i < bracket.length; i++) {\n            res[bracket[i]] = i;\n        }\n        return res;\n    };\n\n    self.maximumMatching = function maximumMatching(pt){\n        // Courtesy of the great Ronny Lorenz\n\n        var n = pt[0];\n        var TURN = 0;    //minimal number of nucleotides in the hairpin\n\n        /* array init */\n        var mm = new Array(n + 1);\n        for(var i = 0; i <= n; i++){\n            mm[i] = new Array(n + 1);\n            for(var j = i; j <= n; j++)\n            mm[i][j] = 0;\n        }\n        var maximum = 0;\n\n        /* actual computation */\n        for(var i = n - TURN - 1; i > 0; i--)\n\n        for(var j = i + TURN + 1; j <= n; j++){\n            maximum = mm[i][j-1];\n\n            for(var l = j - TURN - 1; l >= i; l--) {\n                if(pt[l] === j) {\n\n                    // we have a base pair here\n                    maximum = Math.max(maximum, ((l > i) ? mm[i][l-1] : 0) + 1 + ((j - l - 1 > 0) ? mm[l+1][j-1] : 0));\n                }\n            }\n\n            mm[i][j] = maximum;\n        }\n\n        maximum = mm[1][n];\n\n        return mm;\n    };\n\n    self.backtrackMaximumMatching = function(mm, oldPt) {\n      var pt = Array.apply(null, \n                           Array(mm.length)).map(function() { return 0 }); \n                           //create an array containing zeros\n\n      self.mmBt(mm, pt, oldPt, 1, mm.length-1);\n      return pt;\n    }\n\n    self.mmBt = function(mm, pt, oldPt, i, j){\n        // Create a pairtable from the backtracking\n      var maximum = mm[i][j];\n      var TURN = 0;\n\n      if(j - i - 1 < TURN) return;    /* no more pairs */\n\n      if(mm[i][j-1] == maximum){      /* j is unpaired */\n        self.mmBt(mm, pt, oldPt, i, j-1);\n        return;\n      }\n\n      for(var q = j - TURN - 1; q >= i; q--){  /* j is paired with some q */\n        if (oldPt[j] !== q)\n            continue;\n\n        var leftPart     = (q > i) ? mm[i][q-1] : 0;\n        var enclosedPart = (j - q - 1 > 0) ? mm[q+1][j-1] : 0;\n\n        if(leftPart + enclosedPart + 1 == maximum) {\n            // there's a base pair between j and q\n            pt[q] = j;\n            pt[j] = q;\n\n            if(i < q) \n                self.mmBt(mm, pt, oldPt, i, q - 1);\n\n            self.mmBt(mm, pt, oldPt, q + 1, j - 1);\n            return;\n        }\n      }\n\n      //alert(i + \",\" + j + \": backtracking failed!\");\n      console.log('FAILED!!!' + i + ',' + j + ': backtracking failed!');\n\n    };\n\n    self.dotbracketToPairtable = function(dotbracket) {\n        // create an array and initialize it to 0\n        var pt = Array.apply(null, new Array(dotbracket.length + 1)).map(Number.prototype.valueOf,0);\n        \n        //  the first element is always the length of the RNA molecule\n        pt[0] = dotbracket.length;\n\n        // store the pairing partners for each symbol\n        var stack = {};\n        for (var i = 0; i < self.bracketLeft.length; i++) {\n            stack[i] = [];\n        }\n\n        // lookup the index of each symbol in the bracket array\n        var inverseBracketLeft = self.inverseBrackets(self.bracketLeft);\n        var inverseBracketRight = self.inverseBrackets(self.bracketRight);\n\n        for (var i = 0; i < dotbracket.length; i++) {\n            var a = dotbracket[i];\n            var ni = i + 1;\n\n            if (a == '.' || a == 'o') {\n                // unpaired\n                pt[ni] = 0;\n            } else {\n                if (a in inverseBracketLeft) {\n                    // open pair?\n                    stack[inverseBracketLeft[a]].push(ni);\n                } else if (a in inverseBracketRight){\n                    // close pair?\n                    var j = stack[inverseBracketRight[a]].pop();\n\n                    pt[ni] = j;\n                    pt[j] = ni;\n                } else {\n                    throw \"Unknown symbol in dotbracket string\";\n                }\n            }\n        }\n\n        for (var key in stack) {\n            if (stack[key].length > 0) {\n                throw \"Unmatched base at position \" + stack[key][0];\n            }\n        }\n\n        return pt;\n    };\n\n    self.insertIntoStack = function(stack, i, j) {\n        var k = 0;\n        while (stack[k].length > 0 && stack[k][stack[k].length - 1] < j) {\n            k += 1;\n        }\n\n        stack[k].push(j);\n        return k;\n    };\n\n    self.deleteFromStack = function(stack, j) {\n        var k = 0;\n        while (stack[k].length === 0 || stack[k][stack[k].length-1] != j) {\n            k += 1;\n        }\n        stack[k].pop();\n        return k;\n    };\n\n    self.pairtableToDotbracket = function(pt) {\n        // store the pairing partners for each symbol\n        var stack = {};\n        for (var i = 0; i < pt[0]; i++) {\n            stack[i] = [];\n        }\n\n        var seen = {};\n        var res = \"\";\n        var i;\n        for (var i = 1; i < pt[0] + 1; i++) {\n            if (pt[i] !== 0 && pt[i] in seen) {\n                throw \"Invalid pairtable contains duplicate entries\";\n            }\n            seen[pt[i]] = true;\n\n            if (pt[i] === 0) {\n                res += '.';\n            } else {\n                if (pt[i] > i) {\n                    res += self.bracketLeft[self.insertIntoStack(stack, i, pt[i])];\n                } else {\n                    res += self.bracketRight[self.deleteFromStack(stack, i)];\n                }\n            }\n        }\n\n        return res;\n    };\n\n    self.findUnmatched = function(pt, from, to) {\n        /*\n         * Find unmatched nucleotides in this molecule.\n         */\n        var toRemove = [];\n        var unmatched = [];\n\n        var origFrom = from;\n        var origTo = to;\n        var i;\n\n        for (var i = from; i <= to; i++)\n            if (pt[i] !== 0 && (pt[i] < from || pt[i] > to))\n                unmatched.push([i,pt[i]]);\n\n        for (var i = origFrom; i <= origTo; i++) {\n            while (pt[i] === 0 && i <= origTo) i++;\n\n            to = pt[i];\n\n            while (pt[i] === to) {\n                i++;\n                to--;\n            }\n            \n            toRemove = toRemove.concat(self.findUnmatched(pt, i, to));\n        }\n\n        if (unmatched.length > 0)\n            toRemove.push(unmatched);\n\n        return toRemove;\n    };\n\n    self.removePseudoknotsFromPairtable = function(pt) {\n        /* Remove the pseudoknots from this structure in such a fashion\n         * that the least amount of base-pairs need to be broken\n         *\n         * The pairtable is manipulated in place and a list of tuples\n         * indicating the broken base pairs is returned.\n         */\n\n        var mm = self.maximumMatching(pt);\n        var newPt = self.backtrackMaximumMatching(mm, pt);\n        var removed = [];\n\n        for (var i = 1; i < pt.length; i++) {\n            if (pt[i] < i)\n                continue;\n\n            if (newPt[i] != pt[i])  {\n                removed.push([i, pt[i]]);\n                pt[pt[i]] = 0;\n                pt[i] = 0;\n            }\n        }\n\n        return removed;\n    };\n\n    self.ptToElements = function(pt, level, i, j, dotBracketBreaks) {\n        /* Convert a pair table to a list of secondary structure \n         * elements:\n         *\n         * [['s',1,[2,3]]\n         *\n         * The 's' indicates that an element can be a stem. It can also be\n         * an interior loop ('i'), a hairpin loop ('h') or a multiloop ('m')\n         *\n         * The second number (1 in this case) indicates the depth or\n         * how many base pairs have to be broken to get to this element.\n         *\n         * Finally, there is the list of nucleotides which are part of\n         * of this element.\n         */\n        var elements = [];\n        var u5 = [i-1];\n        var u3 = [j+1];\n\n        if (arguments.length < 5)\n            dotBracketBreaks = [];\n\n        if (i > j)\n            return [];\n            \n            //iterate over the unpaired regions on either side\n            //this is either 5' and 3' unpaired if level == 0\n            //or an interior loop or a multiloop\n            for (; pt[i] === 0; i++) { u5.push(i); }\n            for (; pt[j] === 0; j--) { u3.push(j); }\n\n            if (i > j) {\n                //hairpin loop or one large unpaired molecule\n                u5.push(i);\n                if (level === 0)\n                    return [['e',level, u5.sort(numberSort)]];\n                else {\n                    // check to see if we have chain breaks due\n                    // to multiple strands in the input\n                    var external = false;\n                    var left = [];\n                    var right = [];\n                    for (var k = 0; k < u5.length; k++) {\n                        if (external)\n                            right.push(u5[k]);\n                        else\n                            left.push(u5[k]);\n\n                        if (dotBracketBreaks.indexOf(u5[k]) >= 0)\n                            external = true;\n                    }\n\n                    if (external) {\n                        return [['h',level, u5.sort(numberSort)]];\n                    }\n                    else\n                        // if not, this is a simple hairpin loop\n                        return [['h',level, u5.sort(numberSort)]];\n                }\n            }\n\n            if (pt[i] != j) {\n                //multiloop\n                var m = u5;\n                var k = i;\n\n                // the nucleotide before and the starting nucleotide\n                m.push(k);\n                while (k <= j) {\n                    // recurse into a stem\n                    elements = elements.concat(self.ptToElements(pt, level, k, pt[k], dotBracketBreaks));\n\n                    // add the nucleotides between stems\n                    m.push(pt[k]);\n                    k = pt[k] + 1;\n                    for (; pt[k] === 0 && k <= j; k++) { m.push(k);}\n                    m.push(k);\n                }\n                m.pop();\n                m = m.concat(u3);\n                \n                if (m.length > 0) {\n                    if (level === 0)\n                        elements.push(['e', level, m.sort(numberSort)]);\n                    else\n                        elements.push(['m', level, m.sort(numberSort)]);\n                }\n                \n                return elements;\n            }\n\n            if (pt[i] === j) {\n                //interior loop\n                u5.push(i);\n                u3.push(j);\n\n                var combined = u5.concat(u3);\n                if (combined.length > 4) {\n                    if (level === 0)\n                        elements.push(['e',level, u5.concat(u3).sort(numberSort)]);\n                    else\n                        elements.push(['i',level, u5.concat(u3).sort(numberSort)]);\n                }\n            } \n\n            var s = [];\n            //go through the stem\n            while (pt[i] === j && i < j) {\n                //one stem\n                s.push(i);\n                s.push(j);\n\n                i += 1;\n                j -= 1;\n\n                level += 1;\n            }\n\n            u5 = [i-1];\n            u3 = [j+1];\n            elements.push(['s', level, s.sort(numberSort)]);\n\n        return elements.concat(self.ptToElements(pt, level, i, j, dotBracketBreaks));\n    };\n\n}\n\nexport var rnaUtilities = new RNAUtilities();\n\nexport function ColorScheme(colorsText) {\n    var self = this;\n    self.colorsText = colorsText;\n\n    self.parseRange = function(rangeText) {\n        //parse a number range such as 1-10 or 3,7,9 or just 7\n        var parts = rangeText.split(',')\n        var nums = [];\n\n        for (var i = 0; i < parts.length; i++) {\n            //could be 1 or 10-11  or something like that\n            var parts1 = parts[i].split('-');\n\n            if (parts1.length == 1)\n                nums.push(parseInt(parts1[0]));\n            else if (parts1.length == 2) {\n                var from = parseInt(parts1[0]);\n                var to = parseInt(parts1[1]);\n\n                // add each number in this range\n                for (var j = from; j <= to; j++) \n                    nums.push(j)\n            } else {\n                console.log('Malformed range (too many dashes):', rangeText);\n            }\n        }\n\n        return nums;\n    }\n\n    self.parseColorText = function(colorText) {\n        /* Parse the text of an RNA color string. Instructions and description\n         * of the format are given below.\n         *\n         * The return is a json double dictionary indexed first by the \n         * molecule name, then by the nucleotide. This is then applied\n         * by force.js to the RNAs it is displaying. When no molecule\n         * name is specified, the color is applied to all molecules*/\n        var lines = colorText.split('\\n');\n        var currMolecule = '';\n        var counter = 1;\n        var colorsJson = {colorValues: {'':{}}, range:['white', 'steelblue']};\n        var domainValues = [];\n\n\n        for (var i = 0; i < lines.length; i++) {\n\n            if (lines[i][0] == '>') {\n                // new molecule\n                currMolecule = lines[i].trim().slice(1);\n                counter = 1;\n\n                colorsJson.colorValues[currMolecule] = {};\n                continue;\n            }\n\n            let words = lines[i].trim().split(/[\\s]+/);\n\n            for (var j = 0; j < words.length; j++) {\n                if (isNaN(words[j])) {\n                    if (words[j].search('range') === 0) {\n                        //there's a color scale in this entry\n                        let parts = words[j].split('=');\n                        let partsRight = parts[1].split(':')\n                        colorsJson.range = [partsRight[0], partsRight[1]];\n                        continue;\n                    }\n\n                    if (words[j].search('domain') == 0) {\n                        //there's a color scale in this entry\n                        let parts = words[j].split('=');\n                        let partsRight = parts[1].split(':')\n                        colorsJson.domain = [partsRight[0], partsRight[1]];\n                        continue;\n                    }\n\n                    // it's not a number, should be a combination \n                    // of a number (nucleotide #) and a color\n                    let parts = words[j].split(':');\n                    let nums = self.parseRange(parts[0]);\n                    let color = parts[1]\n\n                    for (var k = 0; k < nums.length; k++) {\n                        if (isNaN(color)) {\n                            colorsJson.colorValues[currMolecule][nums[k]] = color;\n                        } else {\n                            colorsJson.colorValues[currMolecule][nums[k]] = +color;\n                            domainValues.push(Number(color));\n                        }\n                    }\n                } else {\n                    //it's a number, so we add it to the list of values\n                    //seen for this molecule\n                    colorsJson.colorValues[currMolecule][counter] = Number(words[j]);\n                    counter += 1;\n\n                    domainValues.push(Number(words[j]));\n                }\n            }\n        }\n\n        if (!('domain' in colorsJson))\n            colorsJson.domain = [Math.min.apply(null, domainValues), Math.max.apply(null, domainValues)];\n\n        self.colorsJson = colorsJson;\n\n        return self;\n    };\n\n    self.normalizeColors = function() {\n        /* \n         * Normalize the passed in values so that they range from\n         * 0 to 1\n         */\n        var value;\n\n        for (var moleculeName in self.colorsJson) {\n            var minNum = Number.MAX_VALUE;\n            var maxNum = Number.MIN_VALUE;\n\n            // iterate once to find the min and max values;\n            for (var resnum in self.colorsJson.colorValues[moleculeName]) {\n                value = self.colorsJson.colorValues[moleculeName][resnum];\n                if (typeof value == 'number') {\n                    if (value < minNum)\n                        minNum = value;\n                    if (value > maxNum)\n                        maxNum = value;\n                }\n            }\n\n            // iterate again to normalize\n            for (resnum in self.colorsJson.colorValues[moleculeName]) {\n                value = self.colorsJson.colorValues[moleculeName][resnum];\n                if (typeof value == 'number') {\n                    self.colorsJson.colorValues[moleculeName][resnum] = (value - minNum ) / (maxNum - minNum);\n                }\n            }\n        }\n\n        return self;\n    };\n\n    self.parseColorText(self.colorsText);\n    return self;\n}\n","import {arraysEqual,RNAUtilities,rnaUtilities} from './rnautils.js';\nimport slugid from 'slugid';\n\nvar numberSort = function(a,b) { return a - b; };\n\nif (typeof(String.prototype.trim) === 'undefined') {\n    String.prototype.trim = function() {\n        return String(this).replace(/^\\s+|\\s+$/g, '');\n    };\n}\n\nexport function ProteinGraph(structName, size, uid) {\n    var self = this;\n\n    self.type = 'protein';\n    self.size = size;\n    self.nodes = [{'name': 'P',\n                   'num': 1,\n                   'radius': 3 *  Math.sqrt(size),\n                   'rna': self,\n                   'nodeType': 'protein',\n                   'structName': structName,\n                   'elemType': 'p',\n                   'size': size,\n                   'uid': slugid.nice()}];\n\n    self.links = [];\n    self.uid = slugid.nice();\n\n    self.addUids = function(uids) {\n        for (let i = 0; i < uids.length; i++)\n            self.nodes[i].uid = uids[i];\n\n        return self;\n    };\n\n    self.getUids = function() {\n        /* Get the positions of each node so that they\n         * can be passed to elementsToJson later\n         */\n        uids = [];\n        for (let i = 0; i < self.dotbracket.length; i++)\n            uids.push(self.nodes[i].uid);\n\n        return uids;\n    };\n\n}\n\nexport function RNAGraph(seq = '', dotbracket = '', structName = '', startNumber = 1) {\n    var self = this;\n\n    self.type = 'rna';\n    self.circularizeExternal = false;\n    self.seq = seq;\n    self.dotbracket = dotbracket;  //i.e. ..((..))..\n    self.structName = structName;\n    self.circular = false;\n\n    if (self.dotbracket.slice(-1) == '*') {\n        //circular RNA\n        self.dotbracket = self.dotbracket.slice(0, -1);\n        self.circular = true;\n    }\n\n    self.uid = slugid.nice();\n\n    self.elements = [];            //store the elements and the\n                                   //nucleotides they contain\n    self.pseudoknotPairs = [];\n    self.nucsToNodes = {};\n\n    self.addUids = function(uids) {\n        let nucleotideNodes = self.nodes.filter(function(d) { return d.nodeType == 'nucleotide'; });\n\n        for (let i = 0; i < uids.length && i < nucleotideNodes.length; i++) {\n            nucleotideNodes[i].uid = uids[i];\n        }\n\n        return self;\n    };\n\n    self.computePairtable = function() {\n        self.pairtable = rnaUtilities.dotbracketToPairtable(self.dotbracket);\n    };\n\n    self.removeBreaks = function(targetString) {\n        // Remove all chain breaks (denoted with a '&', which indicate\n        // that the input represents more than one strand)\n        var breaks = [];\n        var breakIndex = -1;\n\n        while ((breakIndex = targetString.indexOf('&')) >= 0) {\n            breaks.push(breakIndex);\n            targetString = targetString.substring(0, breakIndex) + targetString.substring(breakIndex+1, targetString.length);\n\n        }\n\n        return {targetString: targetString,  breaks: breaks};\n    };\n\n    var ret = self.removeBreaks(self.dotbracket);\n    self.dotbracket = ret.targetString;\n    self.dotBracketBreaks = ret.breaks;\n\n    ret = self.removeBreaks(self.seq);\n    self.seq = ret.targetString;\n    self.seqBreaks = ret.breaks;\n\n    self.rnaLength = self.dotbracket.length;\n\n    if (!arraysEqual(self.dotBracketBreaks, self.seqBreaks)) {\n        console.log('WARNING: Sequence and structure breaks not equal');\n        console.log('WARNING: Using the breaks in the structure');\n    }\n\n    self.computePairtable();\n\n    self.addPositions = function(nodeType, positions) {\n        let labelNodes = self.nodes.filter(function(d) { return d.nodeType == nodeType; });\n\n        for  (let i = 0; i < labelNodes.length; i++) {\n            labelNodes[i].x = positions[i][0];\n            labelNodes[i].y = positions[i][1];\n        }\n\n        return self;\n    };\n\n    self.breakNodesToFakeNodes = function() {\n        // convert all the nodes following breaks to fake nodes\n        let labelNodes = self.nodes.filter(function(d) { return d.nodeType == 'nucleotide'; });\n\n        // if a node was an artifical break node, convert it to a middle\n        for (let i = 0; i < labelNodes.length; i++) {\n            if (self.dotBracketBreaks.indexOf(i) >= 0) {\n                labelNodes[i].nodeType = 'middle';\n                labelNodes[i+1].nodeType = 'middle';\n            }\n        }\n\n        for (let i = 0; i < self.elements.length; i++) {\n            var broken = false;\n\n            // change the elemType of the other nodes in the element containing\n            // the break\n            for (let j = 0; j < self.elements[i][2].length; j++) {\n                if (self.dotBracketBreaks.indexOf(self.elements[i][2][j]) >= 0)\n                    broken = true;\n            }\n\n            if (broken) {\n                self.elements[i][2].map(function(x) {\n                    if (x == 0)\n                        return;\n                    self.nodes[x-1].elemType = 'e';\n                });\n            } else {\n                self.elements[i][2].map(function(x) {\n                    if (x == 0)\n                        return;\n                    self.nodes[x-1].elemType = self.elements[i][0];\n                });\n            }\n        }\n        return self;\n    };\n\n    self.getPositions = function(nodeType) {\n        var positions = [];\n        let nucleotideNodes = self.nodes.filter(function(d) { return d.nodeType == nodeType; });\n\n        for (let i = 0; i < nucleotideNodes.length; i++)\n            positions.push([nucleotideNodes[i].x, nucleotideNodes[i].y]);\n\n        return positions;\n    };\n\n    self.getUids = function() {\n        /* Get the positions of each node so that they\n         * can be passed to elementsToJson later\n         */\n        var uids = [];\n        for (let i = 0; i < self.dotbracket.length; i++)\n            uids.push(self.nodes[i].uid);\n\n        return uids;\n    };\n\n    self.reinforceStems = function() {\n        var pt = self.pairtable;\n        let relevantElements = self.elements.filter( function(d) {\n            return d[0] == 's' && d[2].length >= 4;\n        });\n\n        for (let i = 0; i < relevantElements.length; i++) {\n            let allNucs = relevantElements[i][2];\n            let nucs = allNucs.slice(0, allNucs.length / 2);\n\n            for (let j = 0; j < nucs.length-1; j++) {\n                self.addFakeNode([nucs[j], nucs[j+1], pt[nucs[j+1]], pt[nucs[j]]]);\n            }\n        }\n\n        return self;\n    };\n\n    self.reinforceLoops = function() {\n        /*\n         * Add a set of fake nodes to enforce the structure\n         */\n        var filterNucs = function(d) {\n            return d !== 0 && d <= self.dotbracket.length;\n        };\n\n        for (let i = 0; i < self.elements.length; i++) {\n            if (self.elements[i][0] == 's' || (!self.circularizeExternal && self.elements[i][0] == 'e'))\n                continue;\n\n            var nucs = self.elements[i][2].filter(filterNucs);\n\n            if (self.elements[i][0] == 'e') {\n                var newNode1 = {'name': '',\n                    'num': -3,\n                    //'radius': 18 * radius -6,\n                    'radius': 0,\n                    'rna': self,\n                    'nodeType': 'middle',\n                    'elemType': 'f',\n                    'nucs': [],\n                    'x': self.nodes[self.rnaLength-1].x,\n                    'y': self.nodes[self.rnaLength-1].y,\n                    'px': self.nodes[self.rnaLength-1].px,\n                    'py': self.nodes[self.rnaLength-1].py,\n                    'uid': slugid.nice() };\n                var newNode2 = {'name': '',\n                    'num': -2,\n                    //'radius': 18 * radius -6,\n                    'radius': 0,\n                    'rna': self,\n                    'nodeType': 'middle',\n                    'elemType': 'f',\n                    'nucs': [],\n                    'x': self.nodes[0].x,\n                    'y': self.nodes[0].y,\n                    'px': self.nodes[0].px,\n                    'py': self.nodes[0].py,\n                    'uid': slugid.nice() };\n\n                    nucs.push(self.nodes.length+1);\n                    nucs.push(self.nodes.length+2);\n                    self.nodes.push(newNode1);\n                    self.nodes.push(newNode2);\n            }\n\n\n            self.addFakeNode(nucs);\n        }\n\n        return self;\n    };\n\n    self.updateLinkUids = function() {\n        for (let i = 0; i < self.links.length; i++) {\n            self.links[i].uid = self.links[i].source.uid + self.links[i].target.uid;\n        }\n\n        return self;\n    };\n\n    self.addFakeNode = function(nucs) {\n        var linkLength = 18; //make sure this is consistent with the value in force.js\n        var nodeWidth = 6;\n        var angle = (3.1415 * 2) / (2 * nucs.length);\n        var radius =  linkLength / (2 * Math.tan(angle));\n\n        var fakeNodeUid = '';\n\n        for (var i = 0; i < nucs.length; i++)\n            fakeNodeUid += self.nodes[nucs[i]-1].uid;\n\n        var newNode = {'name': '',\n                         'num': -1,\n                         //'radius': 18 * radius -6,\n                         'radius': radius,\n                         'rna': self,\n                         'nodeType': 'middle',\n                         'elemType': 'f',\n                         'nucs': nucs,\n                         'uid': fakeNodeUid };\n        self.nodes.push(newNode);\n\n        var newX = 0;\n        var newY = 0;\n        var coordsCounted = 0;\n\n        angle = (nucs.length - 2) * 3.14159 / (2 * nucs.length);\n        radius = 0.5 / Math.cos(angle);\n\n        for (var j = 0; j < nucs.length; j++) {\n            if (nucs[j] === 0 || nucs[j] > self.dotbracket.length)\n                continue;\n\n            //link to the center node\n            self.links.push({'source': self.nodes[nucs[j] - 1],\n                             'target': self.nodes[self.nodes.length-1],\n                             'linkType': 'fake',\n                             'value': radius,\n                             'uid': slugid.nice() });\n\n            if (nucs.length > 4) {\n                //link across the loop\n                self.links.push({'source': self.nodes[nucs[j] - 1],\n                                 'target': self.nodes[nucs[(j + Math.floor(nucs.length / 2)) % nucs.length] - 1],\n                                 'linkType': 'fake',\n                                 'value': radius * 2,\n                                 'uid': slugid.nice() });\n            }\n\n            var ia = ((nucs.length - 2) * 3.14159) / nucs.length;\n            var c = 2 * Math.cos(3.14159 / 2 - ia / 2);\n            //link to over-neighbor\n            self.links.push({'source': self.nodes[nucs[j] - 1],\n                             'target': self.nodes[nucs[(j + 2) % nucs.length] - 1],\n                             'linkType': 'fake',\n                             'value': c});\n\n            // calculate the mean of the coordinats in this loop\n            // and place the fake node there\n            var fromNode = self.nodes[nucs[j]-1];\n            if ('x' in fromNode) {\n                newX += fromNode.x;\n                newY += fromNode.y;\n\n                coordsCounted += 1;\n            }\n        }\n\n        if (coordsCounted > 0) {\n            // the nucleotides had set positions so we can calculate the position\n            // of the fake node\n            newNode.x = newX / coordsCounted;\n            newNode.y = newY / coordsCounted;\n            newNode.px = newNode.x;\n            newNode.py = newNode.y;\n        }\n\n        return self;\n    };\n\n    self.connectFakeNodes = function() {\n        var linkLength = 18;\n\n        // We want to be able to connect all of the fake nodes\n        // and create a structure consisting of just them\n        var filterOutNonFakeNodes = function(d) {\n            return d.nodeType == 'middle';\n        }\n\n        var nucsToNodes = {};\n        var fakeNodes = self.nodes.filter(filterOutNonFakeNodes);\n        var linked = {};\n\n        // initialize the nucleotides to nodes\n        for (var i = 1; i <= self.nodes.length; i++)\n            nucsToNodes[i] = [];\n\n        for (var i = 0; i < fakeNodes.length; i++) {\n            var thisNode = fakeNodes[i];\n\n            // each fake node represents a certain set of nucleotides (thisNode.nucs)\n            for (var j = 0; j < thisNode.nucs.length; j++) {\n                var thisNuc = thisNode.nucs[j];\n\n                // check to see if this nucleotide has been seen in another fake node\n                // if it has, then we add a link between the two nodes\n                for (var k = 0; k < nucsToNodes[thisNuc].length; k++) {\n                    if (JSON.stringify([nucsToNodes[thisNuc][k].uid, thisNode.uid].sort()) in linked)\n                        continue; //already linked\n\n                    var distance = nucsToNodes[thisNuc][k].radius + thisNode.radius;\n\n                    self.links.push({'source': nucsToNodes[thisNuc][k],\n                                      'target': thisNode,\n                                      'value': distance / linkLength,\n                                      'linkType': 'fake_fake'});\n\n                    // note that we've already seen this link\n                    linked[JSON.stringify([nucsToNodes[thisNuc][k].uid, thisNode.uid].sort())] = true;\n                }\n\n                nucsToNodes[thisNuc].push(thisNode);\n            }\n        }\n\n        return self;\n\n    };\n\n    self.addExtraLinks = function(extraLinks) {\n        if (typeof extraLinks == 'undefined')\n            return self;\n\n        for (var i = 0; i < extraLinks.length; i++) {\n            var source = self.getNodeFromNucleotides(extraLinks[i].from);\n            var target = self.getNodeFromNucleotides(extraLinks[i].to);\n\n            var newLink = {'source': source, 'target': target, 'linkType': 'extra',\n                'extraLinkType': extraLinks[i].linkType, 'uid': slugid.nice() };\n\n                self.links.push(newLink);\n        }\n\n        return self;\n    }\n\n\n    self.elementsToJson = function() {\n        /* Convert a set of secondary structure elements to a json\n         * representation of the graph that can be used with d3's\n         * force-directed layout to generate a visualization of\n         * the structure.\n         */\n        var pt = self.pairtable;\n        var elements = self.elements;\n\n        self.nodes = [];\n        self.links = [];\n\n        //create a reverse lookup so we can find out the type\n        //of element that a node is part of\n        var elemTypes = {};\n\n        //sort so that we count stems last\n        self.elements.sort();\n\n        for (let i = 0; i < self.elements.length; i++) {\n            var nucs = self.elements[i][2];\n            for (let j = 0; j < nucs.length; j++) {\n                elemTypes[nucs[j]] = self.elements[i][0];\n            }\n        }\n\n        for (let i = 1; i <= pt[0]; i++) {\n            var nodeName = self.seq[i-1];\n\n            if (self.dotBracketBreaks.indexOf(i-1) >= 0 ||\n                self.dotBracketBreaks.indexOf(i-2) >= 0) {\n                nodeName = '';\n            }\n\n            //create a node for each nucleotide\n            self.nodes.push({'name': nodeName,\n                             'num': startNumber + i - 1,\n                             'radius': 5,\n                             'rna': self,\n                             'nodeType': 'nucleotide',\n                             'structName': self.structName,\n                             'elemType': elemTypes[i],\n                             'uid': slugid.nice(),\n                             'linked': false});\n        }\n\n        for (let i = 0; i < self.nodes.length; i++) {\n            if (i === 0)\n                self.nodes[i].prevNode = null;\n            else {\n                self.nodes[i].prevNode = self.nodes[i-1];\n            }\n\n            if (i == self.nodes.length-1)\n                self.nodes[i].nextNode = null;\n            else {\n                self.nodes[i].nextNode = self.nodes[i+1];\n            }\n        }\n\n        for (let i = 1; i <= pt[0]; i++) {\n\n            if (pt[i] !== 0) {\n                // base-pair links\n                self.links.push({'source': self.nodes[i-1],\n                                 'target': self.nodes[pt[i]-1],\n                                 'linkType': 'basepair',\n                                 'value': 1,\n                                 'uid': slugid.nice() });\n            }\n\n            if (i > 1) {\n                // backbone links\n                if (self.dotBracketBreaks.indexOf(i-1) === -1 &&\n                    self.dotBracketBreaks.indexOf(i-2) == -1 &&\n                    self.dotBracketBreaks.indexOf(i-3) == -1) {\n                    // there is no break in the strands here\n                    // we can add a backbone link\n                    self.links.push({'source': self.nodes[i-2],\n                                    'target': self.nodes[i-1],\n                                    'linkType': 'backbone',\n                                    'value': 1,\n                                    'uid': slugid.nice() });\n                    self.nodes[i-1].linked = true;\n                }\n            }\n        }\n\n        //add the pseudoknot links\n        for (let i = 0; i < self.pseudoknotPairs.length; i++) {\n            self.links.push({'source': self.nodes[self.pseudoknotPairs[i][0]-1],\n                            'target': self.nodes[self.pseudoknotPairs[i][1]-1],\n                            'linkType': 'pseudoknot',\n                            'value': 1,\n                            'uid': slugid.nice()});\n        }\n\n        if (self.circular) {\n            self.links.push({'source': self.nodes[0],\n                            'target': self.nodes[self.rnaLength-1],\n                            'linkType': 'backbone',\n                            'value': 1,\n                            'uid': slugid.nice() });\n\n        }\n\n        return self;\n    };\n\n    self.ptToElements = function(pt, level, i, j) {\n        /* Convert a pair table to a list of secondary structure\n         * elements:\n         *\n         * [['s',1,[2,3]]\n         *\n         * The 's' indicates that an element can be a stem. It can also be\n         * an interior loop ('i'), a hairpin loop ('h') or a multiloop ('m')\n         *\n         * The second number (1 in this case) indicates the depth or\n         * how many base pairs have to be broken to get to this element.\n         *\n         * Finally, there is the list of nucleotides which are part of\n         * of this element.\n         */\n        var elements = [];\n        var u5 = [i-1];\n        var u3 = [j+1];\n\n        if (i > j)\n            return [];\n\n            //iterate over the unpaired regions on either side\n            //this is either 5' and 3' unpaired if level == 0\n            //or an interior loop or a multiloop\n            for (; pt[i] === 0; i++) { u5.push(i); }\n            for (; pt[j] === 0; j--) { u3.push(j); }\n\n            if (i > j) {\n                //hairpin loop or one large unpaired molecule\n                u5.push(i);\n                if (level === 0)\n                    return [['e',level, u5.sort(numberSort)]];\n                else {\n                    // check to see if we have chain breaks due\n                    // to multiple strands in the input\n                    var external = false;\n                    var left = [];\n                    var right = [];\n                    for (var k = 0; k < u5.length; k++) {\n                        if (external)\n                            right.push(u5[k]);\n                        else\n                            left.push(u5[k]);\n\n                        if (self.dotBracketBreaks.indexOf(u5[k]) >= 0)\n                            external = true;\n                    }\n\n                    if (external) {\n                        return [['h',level, u5.sort(numberSort)]];\n                    }\n                    else\n                        // if not, this is a simple hairpin loop\n                        return [['h',level, u5.sort(numberSort)]];\n                }\n            }\n\n            if (pt[i] != j) {\n                //multiloop\n                var m = u5;\n                var k = i;\n\n                // the nucleotide before and the starting nucleotide\n                m.push(k);\n                while (k <= j) {\n                    // recurse into a stem\n                    elements = elements.concat(self.ptToElements(pt, level, k, pt[k]));\n\n                    // add the nucleotides between stems\n                    m.push(pt[k]);\n                    k = pt[k] + 1;\n                    for (; pt[k] === 0 && k <= j; k++) { m.push(k);}\n                    m.push(k);\n                }\n                m.pop();\n                m = m.concat(u3);\n\n                if (m.length > 0) {\n                    if (level === 0)\n                        elements.push(['e', level, m.sort(numberSort)]);\n                    else\n                        elements.push(['m', level, m.sort(numberSort)]);\n                }\n\n                return elements;\n            }\n\n            if (pt[i] === j) {\n                //interior loop\n                u5.push(i);\n                u3.push(j);\n\n                var combined = u5.concat(u3);\n                if (combined.length > 4) {\n                    if (level === 0)\n                        elements.push(['e',level, u5.concat(u3).sort(numberSort)]);\n                    else\n                        elements.push(['i',level, u5.concat(u3).sort(numberSort)]);\n                }\n            }\n\n            var s = [];\n            //go through the stem\n            while (pt[i] === j && i < j) {\n                //one stem\n                s.push(i);\n                s.push(j);\n\n                i += 1;\n                j -= 1;\n\n                level += 1;\n            }\n\n            u5 = [i-1];\n            u3 = [j+1];\n            elements.push(['s', level, s.sort(numberSort)]);\n\n        return elements.concat(self.ptToElements(pt, level, i, j));\n    };\n\n    self.addLabels = function(startNumber = 1, labelInterval = 10) {\n        if (labelInterval === 0)\n            return self;\n\n        for (let i = 1; i <= self.rnaLength; i++) {\n            // add labels\n            if (i % labelInterval === 0) {\n                //create a node for each label\n                let newX, newY;\n\n                let thisNode = self.nodes[i-1];\n                let prevNode, nextNode;\n                let prevVec, nextVec;\n\n                if (self.rnaLength == 1) {\n                    nextVec = [thisNode.x - 15, thisNode.y];\n                    prevVec = [thisNode.x - 15, thisNode.y];\n                } else {\n                    // if we're labelling the first node, then label it in relation to the last\n                    if (i == 1)\n                        prevNode = self.nodes[self.rnaLength - 1];\n                    else\n                        prevNode = self.nodes[i - 2];\n\n                    // if we're labelling the last node, then label it in relation to the first\n                    if (i == self.rnaLength)\n                        nextNode = self.nodes[0];\n                    else\n                        nextNode = self.nodes[i];\n\n                    // this nucleotide and its neighbors are paired\n                    if (self.pairtable[nextNode.num - startNumber+1] !== 0 &&\n                        self.pairtable[prevNode.num - startNumber+1] !== 0 &&\n                        self.pairtable[thisNode.num - startNumber+1] !== 0) {\n\n                        prevNode = nextNode = self.nodes[self.pairtable[thisNode.num - startNumber+1]-1];\n                    }\n\n                    // this node is paired but at least one of its neighbors is unpaired\n                    // place the label in the direction of the two neighbors\n                    if (self.pairtable[thisNode.num - startNumber+1] !== 0 && (\n                        self.pairtable[nextNode.num - startNumber+1] === 0 ||\n                        self.pairtable[prevNode.num - startNumber+1] === 0)) {\n                        nextVec = [thisNode.x - nextNode.x, thisNode.y - nextNode.y];\n                        prevVec = [thisNode.x - prevNode.x, thisNode.y - prevNode.y];\n\n                    } else {\n                        nextVec = [nextNode.x - thisNode.x, nextNode.y - thisNode.y];\n                        prevVec = [prevNode.x - thisNode.x, prevNode.y - thisNode.y];\n                    }\n                }\n\n                var combinedVec = [nextVec[0] + prevVec[0], nextVec[1] + prevVec[1]];\n                var vecLength = Math.sqrt(combinedVec[0] * combinedVec[0] + combinedVec[1] * combinedVec[1]);\n                var normedVec = [combinedVec[0] / vecLength, combinedVec[1] / vecLength];\n                var offsetVec = [-15 * normedVec[0], -15 * normedVec[1]];\n\n                newX = self.nodes[i-1].x + offsetVec[0];\n                newY = self.nodes[i-1].y + offsetVec[1];\n\n                var newNode = {'name': i + startNumber -1,\n                                 'num': -1,\n                                 'radius': 6,\n                                 'rna': self,\n                                 'nodeType': 'label',\n                                 'structName': self.structName,\n                                 'elemType': 'l',\n                                 'x': newX,\n                                 'y': newY,\n                                 'px': newX,\n                                 'py': newY,\n                                 'uid': slugid.nice() };\n                var newLink = {'source': self.nodes[i-1],\n                            'target': newNode,\n                            'value': 1,\n                            'linkType': 'label_link',\n                            'uid': slugid.nice() };\n\n                self.nodes.push(newNode);\n                self.links.push(newLink);\n            }\n        }\n\n        return self;\n    };\n\n    self.recalculateElements = function() {\n        self.removePseudoknots();\n        self.elements = self.ptToElements(self.pairtable, 0, 1, self.dotbracket.length);\n\n        if (self.circular) {\n            //check to see if the external loop is a hairpin or a multiloop\n            let externalLoop = self.elements.filter(function(d) { if (d[0] == 'e') return true; });\n\n            if (externalLoop.length > 0) {\n                eloop = externalLoop[0];\n                nucs = eloop[2].sort(numberSort);\n\n                prev = nucs[0];\n                hloop = true;\n                numGreater = 0;\n                for (let i = 1; i < nucs.length; i++) {\n                    if (nucs[i] - prev > 1) {\n                        numGreater += 1;\n                    }\n                    prev = nucs[i];\n                }\n\n                if (numGreater == 1) {\n                    eloop[0] = 'h';\n                } else if (numGreater == 2) {\n                    eloop[0] = 'i';\n                } else {\n                    eloop[0] = 'm';\n                }\n            }\n        }\n\n        return self;\n    };\n\n    self.reassignLinkUids = function() {\n        // reassign uids to the links, corresponding to the uids of the two nodes\n        // they connect\n        var i;\n\n        for (var i = 0; i < self.links.length; i++) {\n            self.links[i].uid = self.links[i].source.uid + self.links[i].target.uid;\n        }\n\n        return self;\n    }\n\n    self.removePseudoknots = function() {\n        if (self.pairtable.length > 1)\n            self.pseudoknotPairs = self.pseudoknotPairs.concat(rnaUtilities.removePseudoknotsFromPairtable(self.pairtable));\n\n        return self;\n    };\n\n    self.addPseudoknots = function() {\n        /* Add all of the pseudoknot pairs which are stored outside\n         * of the pairtable back to the pairtable\n         */\n        var pt = self.pairtable;\n        var pseudoknotPairs = self.pseudoknotPairs;\n\n        for (var i = 0; i < pseudoknotPairs.length; i++) {\n            pt[pseudoknotPairs[i][0]] = pseudoknotPairs[i][1];\n            pt[pseudoknotPairs[i][1]] = pseudoknotPairs[i][0];\n        }\n\n        self.pseudoknotPairs = [];\n        return self;\n    };\n\n    self.addName = function(name) {\n        if (typeof name == 'undefined') {\n            self.name = '';\n            return self;\n        } else {\n            self.name = name;\n            return self;\n        }\n    };\n\n\n    if (self.rnaLength > 0)\n        self.recalculateElements();\n\n    self.getNodeFromNucleotides = function(nucs) {\n        /* Get a node given a nucleotide number or an array of nucleotide\n         * numbers indicating an element node */\n        if (Object.prototype.toString.call(nucs) === '[object Array]') {\n            for (let j = 0; j < self.nodes.length; j++) {\n                if ('nucs' in self.nodes[j]) {\n                    if (self.nodes[j].nucs.equals(nucs)) {\n                        return self.nodes[j];\n                    }\n                }\n            }\n        } else {\n            for (let j = 0; j < self.nodes.length; j++) {\n                if (self.nodes[j].num == nucs) {\n                    return self.nodes[j];\n                }\n            }\n        }\n\n        console.log('ERROR: No node found for nucs:', nucs);\n        return null;\n    }\n}\n\nexport function moleculesToJson(moleculesJson) {\n    /* Convert a list of RNA and protein molecules to a list of RNAGraph\n     * ProteinGraph and extraLinks structure */\n\n    var nodes = {}; //index the nodes by uid\n    var graphs = [];\n    var extraLinks = [];\n\n\n    // Create the graphs for each molecule\n    for (var i = 0; i < moleculesJson.molecules.length; i++) {\n        var molecule = moleculesJson.molecules[i];\n        var rg;\n\n        if (molecule.type == 'rna') {\n            rg = new RNAGraph(molecule.seq, molecule.ss, molecule.header);\n            rg.circularizeExternal = true;\n            rg.elementsToJson()\n            .addPositions('nucleotide', molecule.positions)\n            .addLabels()\n            .reinforceStems()\n            .reinforceLoops();\n\n\n        } else if (molecule.type == 'protein') {\n            rg = new ProteinGraph(molecule.header, molecule.size);\n\n        }\n\n        rg.addUids(molecule.uids);\n\n        for (var j = 0; j < rg.nodes.length; j++) {\n            nodes[rg.nodes[j].uid] = rg.nodes[j];\n        }\n\n        graphs.push(rg);\n    }\n\n    //Add the extra links\n    for (var i = 0; i < moleculesJson.extraLinks.length; i++) {\n        link = moleculesJson.extraLinks[i];\n\n        link.source = nodes[link.source];\n        link.target = nodes[link.target];\n        link.uid = slugid.nice();\n\n        extraLinks.push(link);\n    }\n\n    return {'graphs': graphs, 'extraLinks': extraLinks};\n};\n","export function simpleXyCoordinates (pair_table) {\n  var INIT_ANGLE=0.;     /* initial bending angle */\n  var INIT_X = 100.;     /* coordinate of first digit */\n  var INIT_Y = 100.;     /* see above */\n  var RADIUS =  15.;\n\n  var x = [], y = [];\n\n  var i, len;\n  var  alpha;\n\n  len = pair_table[0];\n  var angle = Array.apply(null, new Array(len+5)).map(Number.prototype.valueOf,0); \n  var loop_size = Array.apply(null, new Array(16+Math.floor(len/5)))\n                    .map(Number.prototype.valueOf, 0); \n  var stack_size = Array.apply(null, new Array(16+Math.floor(len/5)))\n                    .map(Number.prototype.valueOf, 0); \n\n  var lp = 0;\n  var stk = 0;\n  var PIHALF = Math.PI / 2;\n\n\n  var loop = function(i, j, pair_table)\n  /* i, j are the positions AFTER the last pair of a stack; i.e\n     i-1 and j+1 are paired. */\n  {\n      var count = 2;   /* counts the VERTICES of a loop polygon; that's\n                          NOT necessarily the number of unpaired bases!\n                          Upon entry the loop has already 2 vertices, namely\n                          the pair i-1/j+1.  */\n\n  var    r = 0, bubble = 0; /* bubble counts the unpaired digits in loops */\n\n  var    i_old, partner, k, l, start_k, start_l, fill, ladder;\n  var    begin, v, diff;\n  var  polygon;\n\n  var remember = Array.apply(null, new Array((3+Math.floor((j-i)/5)*2))).map(Number.prototype.valueOf, 0);\n\n  i_old = i-1, j++;         /* j has now been set to the partner of the\n                               previous pair for correct while-loop\n                               termination.  */\n  while (i != j) {\n      partner = pair_table[i];\n      if ((!partner) || (i==0))\n          i++, count++, bubble++;\n      else {\n          count += 2;\n          k = i, l = partner;    /* beginning of stack */\n          remember[++r] = k;\n          remember[++r] = l;\n          i = partner+1;         /* next i for the current loop */\n\n          start_k = k, start_l = l;\n          ladder = 0;\n          do {\n              k++, l--, ladder++;        /* go along the stack region */\n          }\n          while ((pair_table[k] == l) && (pair_table[k] > k));\n\n          fill = ladder-2;\n          if (ladder >= 2) {\n              angle[start_k+1+fill] += PIHALF;   /*  Loop entries and    */\n              angle[start_l-1-fill] += PIHALF;   /*  exits get an        */\n              angle[start_k]        += PIHALF;   /*  additional PI/2.    */\n              angle[start_l]        += PIHALF;   /*  Why ? (exercise)    */\n              if (ladder > 2) {\n                  for (; fill >= 1; fill--) {\n                      angle[start_k+fill] = Math.PI;    /*  fill in the angles  */\n                      angle[start_l-fill] = Math.PI;    /*  for the backbone    */\n                  }\n              }\n          }\n          stack_size[++stk] = ladder;\n          if (k <= l)\n            loop(k, l, pair_table);\n      }\n  }\n\n  polygon = Math.PI*(count-2)/count; /* bending angle in loop polygon */\n  remember[++r] = j;\n  begin = i_old < 0 ? 0 : i_old;\n  for (v = 1; v <= r; v++) {\n      diff  = remember[v]-begin;\n      for (fill = 0; fill <= diff; fill++)\n      angle[begin+fill] += polygon;\n      if (v > r)\n          break;\n      begin = remember[++v];\n  }\n  loop_size[++lp] = bubble;\n  }\n\n  loop(0, len+1, pair_table);\n  loop_size[lp] -= 2;     /* correct for cheating with function loop */\n\n  alpha = INIT_ANGLE;\n  x[0]  = INIT_X;\n  y[0]  = INIT_Y;\n\n  var poss = [];\n\n  poss.push([x[0], y[0]]);\n  for (i = 1; i < len; i++) {\n      x[i] = x[i-1]+RADIUS*Math.cos(alpha);\n      y[i] = y[i-1]+RADIUS*Math.sin(alpha);\n\n      poss.push([x[i], y[i]]);\n      alpha += Math.PI-angle[i+1];\n  }\n\n  return poss;\n}\n","export function Radloop() {\n\tthis.radius = null;\n\tthis.loopnumber = null;\n\tthis.next = null;\n    this.prev = null;\n}\n\nRadloop.prototype.getRadius = function(){\n\treturn this.radius;\n}\n\nRadloop.prototype.setRadius = function(radius){\n\tthis.radius = radius;\n}\n\nRadloop.prototype.getLoopnumber = function(){\n\treturn this.loopnumber;\n}\n\nRadloop.prototype.setLoopnumber = function(loopnumber){\n\tthis.loopnumber = loopnumber;\n}\n\nRadloop.prototype.getNext = function(){\n\treturn this.next;\n}\n\nRadloop.prototype.setNext = function(next){\n\tthis.next = next;\n}\n\nRadloop.prototype.getPrev = function(){\n\treturn this.prev;\n}\n\nRadloop.prototype.setPrev = function(prev){\n\tthis.prev = prev;\n}\n","import {Region} from './region.js';\n\nexport function Base() {\n\tthis.mate = null;\n\tthis.x = null;\n    this.y = null;\n\tthis.extracted = null;\n\tthis.region = new Region();\n}\n\nBase.prototype.getMate = function(){\n\treturn this.mate;\n}\n\nBase.prototype.setMate = function(mate){\n\tthis.mate = mate;\n}\n\nBase.prototype.getX = function(){\n\treturn this.x;\n}\n\nBase.prototype.setX = function(x){\n\tthis.x = x;\n}\n\nBase.prototype.getY = function(){\n\treturn this.y;\n}\n\nBase.prototype.setY = function(y){\n\tthis.y = y;\n}\n\nBase.prototype.isExtracted = function(){\n\treturn this.extracted;\n}\n\nBase.prototype.setExtracted = function(extracted){\n\tthis.extracted = extracted;\n}\n\nBase.prototype.getRegion = function(){\n\treturn this.region;\n}\n\nBase.prototype.setRegion = function(region){\n\tthis.region = region;\n}\n","import {Radloop} from './radloop.js';\nimport {Connection} from './connection.js';\nimport {Region} from './region.js';\nimport {Base} from './base.js';\nimport {Loop} from './loop.js';\n\nexport function NAView(){\n    this.ANUM = 9999.0;\n\tthis.MAXITER = 500;\n\n\tthis.bases = [];\n\tthis.nbase = null;\n    this.nregion = null;\n    this.loop_count = null;\n\n\tthis.root = new Loop();\n\tthis.loops = [];\n\n\tthis.regions = [];\n\n\tthis.rlphead = new Radloop();\n\n\tthis.lencut = 0.8;\n\tthis.RADIUS_REDUCTION_FACTOR = 1.4;\n\n\t// show algorithm step by step\n\tthis.angleinc = null;\n\n\tthis._h = null;\n\n\t// private boolean noIterationFailureYet = true;\n\n\tthis.HELIX_FACTOR = 0.6;\n\tthis.BACKBONE_DISTANCE = 27;\n}\n\nNAView.prototype.naview_xy_coordinates = function(pair_table){\n    var x = [];\n\tvar y = [];\n    if (pair_table.length === 0 || pair_table[0] === 0){\n        return 0;\n    }\n    var i;\n    this.nbase = pair_table[0];\n    this.bases = [];\n    for (var index = 0; index < this.nbase + 1; index++){\n        this.bases.push(new Base());\n    }\n    this.regions = [];\n    for (var index = 0; index < this.nbase + 1; index++){\n        this.regions.push(new Region());\n    }\n    this.read_in_bases(pair_table);\n    this.rlphead = null;\n    this.find_regions();\n    this.loop_count = 0;\n    this.loops = [];\n    for (var index = 0; index < this.nbase + 1; index++){\n        this.loops.push(new Loop());\n    }\n    this.construct_loop(0);\n    this.find_central_loop();\n    this.traverse_loop(this.root, null);\n\n    for (i = 0; i < this.nbase; i++){\n        x.push(100 + this.BACKBONE_DISTANCE * this.bases[i + 1].getX());\n        y.push(100 + this.BACKBONE_DISTANCE * this.bases[i + 1].getY());\n    }\n\n    return {\n        nbase: this.nbase,\n        x: x,\n        y: y\n    }\n}\n\nNAView.prototype.read_in_bases = function read_in_bases(pair_table){\n    var i = null;\n    var npairs = null;\n\n    // Set up an origin.\n    this.bases.push(new Base());\n    this.bases[0].setMate(0);\n    this.bases[0].setExtracted(false);\n    this.bases[0].setX(this.ANUM);\n    this.bases[0].setY(this.ANUM);\n\n    for (npairs = 0, i = 1; i <= this.nbase; i++){\n        this.bases.push(new Base());\n        this.bases[i].setExtracted(false);\n        this.bases[i].setX(this.ANUM);\n        this.bases[i].setY(this.ANUM);\n        this.bases[i].setMate(pair_table[i]);\n        if (pair_table[i] > i)\n            npairs++;\n    }\n    // must have at least 1 pair to avoid segfault\n    if (npairs == 0){\n        this.bases[1].setMate(this.nbase);\n        this.bases[this.nbase].setMate(1);\n    }\n}\n\nNAView.prototype.find_regions = function find_regions(){\n    var i = null;\n    var mate = null;\n    var nb1 = null;\n\n    nb1 = this.nbase + 1;\n    var mark = [];\n    for (i = 0; i < nb1; i++){\n        mark.push(false);\n    }\n    this.nregion = 0;\n    for (i = 0; i <= this.nbase; i++) {\n        if ((mate = this.bases[i].getMate()) != 0 && !mark[i]) {\n            this.regions[this.nregion].setStart1(i);\n            this.regions[this.nregion].setEnd2(mate);\n            mark[i] = true;\n            mark[mate] = true;\n            this.bases[i].setRegion(this.regions[this.nregion]);\n            this.bases[mate].setRegion(this.regions[this.nregion]);\n            for (i++, mate--; i < mate && this.bases[i].getMate() == mate; i++, mate--) {\n                mark[mate] = true;\n                mark[i]= true;\n                this.bases[i].setRegion(this.regions[this.nregion]);\n                this.bases[mate].setRegion(this.regions[this.nregion]);\n            }\n            this.regions[this.nregion].setEnd1(--i);\n            this.regions[this.nregion].setStart2(mate + 1);\n\n            this.nregion++;\n        }\n    }\n}\n\nNAView.prototype.construct_loop = function construct_loop(ibase){\n    var i = null;\n    var mate = null;\n    var retloop = new Loop();\n    var lp = new Loop();\n    var cp = new Connection();\n    var rp = new Region();\n    var rlp = new Radloop();\n    retloop = this.loops[this.loop_count++];\n    retloop.setNconnection(0);\n    retloop.setDepth(0);\n    retloop.setNumber(this.loop_count);\n    retloop.setRadius(0.0);\n\n    for (rlp = this.rlphead; rlp != null; rlp = rlp.getNext())\n        if (rlp.getLoopnumber() == this.loop_count)\n            retloop.setRadius(rlp.getRadius());\n    i = ibase;\n    do {\n        if ((mate = this.bases[i].getMate()) != 0) {\n            rp = this.bases[i].getRegion();\n            if (!this.bases[rp.getStart1()].isExtracted()) {\n                if (i == rp.getStart1()) {\n                    this.bases[rp.getStart1()].setExtracted(true);\n                    this.bases[rp.getEnd1()].setExtracted(true);\n                    this.bases[rp.getStart2()].setExtracted(true);\n                    this.bases[rp.getEnd2()].setExtracted(true);\n                    lp = this.construct_loop(rp.getEnd1() < this.nbase ? rp.getEnd1() + 1\n                            : 0);\n                } else if (i == rp.getStart2()) {\n                    this.bases[rp.getStart2()].setExtracted(true);\n                    this.bases[rp.getEnd2()].setExtracted(true);\n                    this.bases[rp.getStart1()].setExtracted(true);\n                    this.bases[rp.getEnd1()].setExtracted(true);\n                    lp = this.construct_loop(rp.getEnd2() < this.nbase ? rp.getEnd2() + 1\n                            : 0);\n                } else {\n                    console.log(\"Something went terribly wrong ....\");\n                }\n                retloop.setNconnection(retloop.getNconnection() + 1);\n                cp = new Connection();\n                retloop.setConnection(retloop.getNconnection() - 1,\tcp);\n                retloop.setConnection(retloop.getNconnection(), null);\n                cp.setLoop(lp);\n                cp.setRegion(rp);\n                if(i == rp.getStart1()) {\n                    cp.setStart(rp.getStart1());\n                    cp.setEnd(rp.getEnd2());\n                } else {\n                    cp.setStart(rp.getStart2());\n                    cp.setEnd(rp.getEnd1());\n                }\n                cp.setExtruded(false);\n                cp.setBroken(false);\n                lp.setNconnection(lp.getNconnection() + 1);\n                cp = new Connection();\n                lp.setConnection(lp.getNconnection() - 1, cp);\n                lp.setConnection(lp.getNconnection(), null);\n                cp.setLoop(retloop);\n                cp.setRegion(rp);\n                if (i == rp.getStart1()) {\n                    cp.setStart(rp.getStart2());\n                    cp.setEnd(rp.getEnd1());\n                } else {\n                    cp.setStart(rp.getStart1());\n                    cp.setEnd(rp.getEnd2());\n                }\n                cp.setExtruded(false);\n                cp.setBroken(false);\n            }\n            i = mate;\n        }\n        if (++i > this.nbase)\n            i = 0;\n    } while (i != ibase);\n    return retloop;\n}\n\nNAView.prototype.find_central_loop = function find_central_loop(){\n    var lp = new Loop();\n    var maxconn = null;\n    var maxdepth = null;\n    var i = null;\n\n    determine_depths.bind(this)();\n    maxconn = 0;\n    maxdepth = -1;\n    for (i = 0; i < this.loop_count; i++) {\n        lp = this.loops[i];\n        if (lp.getNconnection() > maxconn) {\n            maxdepth = lp.getDepth();\n            maxconn = lp.getNconnection();\n            this.root = lp;\n        } else if (lp.getDepth() > maxdepth\n                && lp.getNconnection() == maxconn) {\n            maxdepth = lp.getDepth();\n            this.root = lp;\n        }\n    }\n}\n\nfunction determine_depths() {\n    var lp = new Loop();\n    var i = null;\n    var j = null;\n\n    for (i = 0; i < this.loop_count; i++) {\n        lp = this.loops[i];\n        for (j = 0; j < this.loop_count; j++){\n            this.loops[j].setMark(false);\n        }\n        lp.setDepth(depth(lp));\n    }\n}\n\nfunction depth(lp){\n    var count = null;\n    var ret = null;\n    var d = null;\n\n    if (lp.getNconnection() <= 1){\n        return 0;\n    }\n    if (lp.isMark()){\n        return -1;\n    }\n    lp.setMark(true);\n    count = 0;\n    ret = 0;\n    for (var i = 0; lp.getConnection(i) != null; i++) {\n        d = depth(lp.getConnection(i).getLoop());\n        if (d >= 0) {\n            if (++count == 1){\n                ret = d;\n            }\n            else if (ret > d){\n                ret = d;\n            }\n        }\n    }\n    lp.setMark(false);\n    return ret + 1;\n}\n\nNAView.prototype.traverse_loop = function traverse_loop(lp, anchor_connection){\n    var xs, ys, xe, ye, xn, yn, angleinc, r;\n    var radius, xc, yc, xo, yo, astart, aend, a;\n    var cp, cpnext, acp, cpprev;\n    var i, j, n, ic;\n    var da, maxang;\n    var count, icstart, icend, icmiddle, icroot;\n    var done, done_all_connections, rooted;\n    var sign;\n    var midx, midy, nrx, nry, mx, my, vx, vy, dotmv, nmidx, nmidy;\n    var icstart1, icup, icdown, icnext, direction;\n    var dan, dx, dy, rr;\n    var cpx, cpy, cpnextx, cpnexty, cnx, cny, rcn, rc, lnx, lny, rl, ac, acn, sx, sy, dcp;\n    var imaxloop = 0;\n\n    angleinc = 2 * Math.PI / (this.nbase + 1);\n    acp = null;\n    icroot = -1;\n    var indice = 0;\n\n    for (ic = 0; (cp = lp.getConnection(indice)) != null; indice++, ic++) {\n        xs = -Math.sin(angleinc * cp.getStart());\n        ys = Math.cos(angleinc * cp.getStart());\n        xe = -Math.sin(angleinc * cp.getEnd());\n        ye = Math.cos(angleinc * cp.getEnd());\n        xn = ye - ys;\n        yn = xs - xe;\n        r = Math.sqrt(xn * xn + yn * yn);\n        cp.setXrad(xn / r);\n        cp.setYrad(yn / r);\n        cp.setAngle(Math.atan2(yn, xn));\n        if (cp.getAngle() < 0.0){\n            cp.setAngle(cp.getAngle() + 2 * Math.PI);\n        }\n        if (anchor_connection != null\n                && anchor_connection.getRegion() == cp.getRegion()) {\n            acp = cp;\n            icroot = ic;\n        }\n    }\n    set_radius: while (true) {\n        this.determine_radius(lp, this.lencut);\n        radius = lp.getRadius()/this.RADIUS_REDUCTION_FACTOR;\n        if (anchor_connection == null){\n            xc = yc = 0.0;\n        }\n        else {\n            xo = (this.bases[acp.getStart()].getX() + this.bases\n                    [acp.getEnd()].getX()) / 2.0;\n            yo = (this.bases[acp.getStart()].getY() + this.bases\n                    [acp.getEnd()].getY()) / 2.0;\n            xc = xo - radius * acp.getXrad();\n            yc = yo - radius * acp.getYrad();\n        }\n\n        // The construction of the connectors will proceed in blocks of\n        // connected connectors, where a connected connector pairs means two\n        // connectors that are forced out of the drawn circle because they\n        // are too close together in angle.\n\n        // First, find the start of a block of connected connectors\n\n        if (icroot == -1){\n            icstart = 0;\n        }\n        else {\n            icstart = icroot;\n        }\n        cp = lp.getConnection(icstart);\n        count = 0;\n        done = false;\n        do {\n            j = icstart - 1;\n            if (j < 0){\n                j = lp.getNconnection() - 1;\n            }\n            cpprev = lp.getConnection(j);\n            if (!this.connected_connection(cpprev, cp)) {\n                done = true;\n            }\n            else {\n                icstart = j;\n                cp = cpprev;\n            }\n            if (++count > lp.getNconnection()) {\n                // Here everything is connected. Break on maximum angular\n                // separation between connections.\n                maxang = -1.0;\n                for (ic = 0; ic < lp.getNconnection(); ic++) {\n                    j = ic + 1;\n                    if (j >= lp.getNconnection()){\n                        j = 0;\n                    }\n                    cp = lp.getConnection(ic);\n                    cpnext = lp.getConnection(j);\n                    ac = cpnext.getAngle() - cp.getAngle();\n                    if (ac < 0.0){\n                        ac += 2 * Math.PI;\n                    }\n                    if (ac > maxang) {\n                        maxang = ac;\n                        imaxloop = ic;\n                    }\n                }\n                icend = imaxloop;\n                icstart = imaxloop + 1;\n                if (icstart >= lp.getNconnection()){\n                    icstart = 0;\n                }\n                cp = lp.getConnection(icend);\n                cp.setBroken(true);\n                done = true;\n            }\n        } while (!done);\n        done_all_connections = false;\n        icstart1 = icstart;\n        while (!done_all_connections) {\n            count = 0;\n            done = false;\n            icend = icstart;\n            rooted = false;\n            while (!done) {\n                cp = lp.getConnection(icend);\n                if (icend == icroot){\n                    rooted = true;\n                }\n                j = icend + 1;\n                if (j >= lp.getNconnection()) {\n                    j = 0;\n                }\n                cpnext = lp.getConnection(j);\n                if (this.connected_connection(cp, cpnext)) {\n                    if (++count >= lp.getNconnection()){\n                        break;\n                    }\n                    icend = j;\n                }\n                else {\n                    done = true;\n                }\n            }\n            icmiddle = this.find_ic_middle(icstart, icend, anchor_connection,\n                    acp, lp);\n            ic = icup = icdown = icmiddle;\n            done = false;\n            direction = 0;\n            while (!done) {\n                if (direction < 0) {\n                    ic = icup;\n                }\n                else if (direction == 0) {\n                    ic = icmiddle;\n                }\n                else {\n                    ic = icdown;\n                }\n                if (ic >= 0) {\n                    cp = lp.getConnection(ic);\n                    if (anchor_connection == null || acp != cp) {\n                        if (direction == 0) {\n                            astart = cp.getAngle()\n                                    - Math.asin(1.0 / 2.0 / radius);\n                            aend = cp.getAngle()\n                                    + Math.asin(1.0 / 2.0 / radius);\n                            this.bases[cp.getStart()].setX(\n                                    xc + radius * Math.cos(astart));\n                            this.bases[cp.getStart()].setY(\n                                    yc + radius * Math.sin(astart));\n                            this.bases[cp.getEnd()].setX(\n                                    xc + radius * Math.cos(aend));\n                            this.bases[cp.getEnd()].setY(\n                                    yc + radius * Math.sin(aend));\n                        }\n                        else if (direction < 0) {\n                            j = ic + 1;\n                            if (j >= lp.getNconnection()){\n                                j = 0;\n                            }\n                            cp = lp.getConnection(ic);\n                            cpnext = lp.getConnection(j);\n                            cpx = cp.getXrad();\n                            cpy = cp.getYrad();\n                            ac = (cp.getAngle() + cpnext.getAngle()) / 2.0;\n                            if (cp.getAngle() > cpnext.getAngle()){\n                                ac -= Math.PI;\n                            }\n                            cnx = Math.cos(ac);\n                            cny = Math.sin(ac);\n                            lnx = cny;\n                            lny = -cnx;\n                            da = cpnext.getAngle() - cp.getAngle();\n                            if (da < 0.0){\n                                da += 2 * Math.PI;\n                            }\n                            if (cp.isExtruded()) {\n                                if (da <= Math.PI / 2){\n                                    rl = 2.0;\n                                }\n                                else {\n                                    rl = 1.5;\n                                }\n                            }\n                            else {\n                                rl = 1.0;\n                            }\n                            this.bases[cp.getEnd()].setX(\n                                    this.bases[cpnext.getStart()].getX()\n                                            + rl * lnx);\n                            this.bases[cp.getEnd()].setY(\n                                    this.bases[cpnext.getStart()].getY()\n                                            + rl * lny);\n                            this.bases[cp.getStart()].setX(\n                                    this.bases[cp.getEnd()].getX() + cpy);\n                            this.bases[cp.getStart()].setY(\n                                    this.bases[cp.getEnd()].getY() - cpx);\n                        } else {\n                            j = ic - 1;\n                            if (j < 0){\n                                j = lp.getNconnection() - 1;\n                            }\n                            cp = lp.getConnection(j);\n                            cpnext = lp.getConnection(ic);\n                            cpnextx = cpnext.getXrad();\n                            cpnexty = cpnext.getYrad();\n                            ac = (cp.getAngle() + cpnext.getAngle()) / 2.0;\n                            if (cp.getAngle() > cpnext.getAngle()){\n                                ac -= Math.PI;\n                            }\n                            cnx = Math.cos(ac);\n                            cny = Math.sin(ac);\n                            lnx = -cny;\n                            lny = cnx;\n                            da = cpnext.getAngle() - cp.getAngle();\n                            if (da < 0.0){\n                                da += 2 * Math.PI;\n                            }\n                            if (cp.isExtruded()) {\n                                if (da <= Math.PI / 2){\n                                    rl = 2.0;\n                                }\n                                else {\n                                    rl = 1.5;\n                                }\n                            }\n                            else {\n                                rl = 1.0;\n                            }\n                            this.bases[cpnext.getStart()].setX(\n                                    this.bases[cp.getEnd()].getX() + rl\n                                            * lnx);\n                            this.bases[cpnext.getStart()].setY(\n                                    this.bases[cp.getEnd()].getY() + rl\n                                            * lny);\n                            this.bases[cpnext.getEnd()].setX(\n                                    this.bases[cpnext.getStart()].getX()\n                                            - cpnexty);\n                            this.bases[cpnext.getEnd()].setY(\n                                    this.bases[cpnext.getStart()].getY()\n                                            + cpnextx);\n                        }\n                    }\n                }\n                if (direction < 0) {\n                    if (icdown == icend) {\n                        icdown = -1;\n                    }\n                    else if (icdown >= 0) {\n                        if (++icdown >= lp.getNconnection()) {\n                            icdown = 0;\n                        }\n                    }\n                    direction = 1;\n                }\n                else {\n                    if (icup == icstart){\n                        icup = -1;\n                    }\n                    else if (icup >= 0) {\n                        if (--icup < 0) {\n                            icup = lp.getNconnection() - 1;\n                        }\n                    }\n                    direction = -1;\n                }\n                done = icup == -1 && icdown == -1;\n            }\n            icnext = icend + 1;\n            if (icnext >= lp.getNconnection()){\n                icnext = 0;\n            }\n            if (icend != icstart\n                    && (!(icstart == icstart1 && icnext == icstart1))) {\n\n                // Move the bases just constructed (or the radius) so that\n                // the bisector of the end points is radius distance away\n                // from the loop center.\n\n                cp = lp.getConnection(icstart);\n                cpnext = lp.getConnection(icend);\n                dx = this.bases[cpnext.getEnd()].getX()\n                        - this.bases[cp.getStart()].getX();\n                dy = this.bases[cpnext.getEnd()].getY()\n                        - this.bases[cp.getStart()].getY();\n                midx = this.bases[cp.getStart()].getX() + dx / 2.0;\n                midy = this.bases[cp.getStart()].getY() + dy / 2.0;\n                rr = Math.sqrt(dx * dx + dy * dy);\n                mx = dx / rr;\n                my = dy / rr;\n                vx = xc - midx;\n                vy = yc - midy;\n                rr = Math.sqrt(dx * dx + dy * dy);\n                vx /= rr;\n                vy /= rr;\n                dotmv = vx * mx + vy * my;\n                nrx = dotmv * mx - vx;\n                nry = dotmv * my - vy;\n                rr = Math.sqrt(nrx * nrx + nry * nry);\n                nrx /= rr;\n                nry /= rr;\n\n                // Determine which side of the bisector the center should\n                // be.\n\n                dx = this.bases[cp.getStart()].getX() - xc;\n                dy = this.bases[cp.getStart()].getY() - yc;\n                ac = Math.atan2(dy, dx);\n                if (ac < 0.0){\n                    ac += 2 * Math.PI;\n                }\n                dx = this.bases[cpnext.getEnd()].getX() - xc;\n                dy = this.bases[cpnext.getEnd()].getY() - yc;\n                acn = Math.atan2(dy, dx);\n                if (acn < 0.0){\n                    acn += 2 * Math.PI;\n                }\n                if (acn < ac){\n                    acn += 2 * Math.PI;\n                }\n                if (acn - ac > Math.PI){\n                    sign = -1;\n                }\n                else {\n                    sign = 1;\n                }\n                nmidx = xc + sign * radius * nrx;\n                nmidy = yc + sign * radius * nry;\n                if (rooted) {\n                    xc -= nmidx - midx;\n                    yc -= nmidy - midy;\n                }\n                else {\n                    for (ic = icstart;;) {\n                        cp = lp.getConnection(ic);\n                        i = cp.getStart();\n                        this.bases[i].setX(\n                                this.bases[i].getX() + nmidx - midx);\n                        this.bases[i].setY(\n                                this.bases[i].getY() + nmidy - midy);\n                        i = cp.getEnd();\n                        this.bases[i].setX(\n                                this.bases[i].getX() + nmidx - midx);\n                        this.bases[i].setY(\n                                this.bases[i].getY() + nmidy - midy);\n                        if (ic == icend){\n                            break;\n                        }\n                        if (++ic >= lp.getNconnection()){\n                            ic = 0;\n                        }\n                    }\n                }\n            }\n            icstart = icnext;\n            done_all_connections = icstart == icstart1;\n        }\n        for (ic = 0; ic < lp.getNconnection(); ic++) {\n            cp = lp.getConnection(ic);\n            j = ic + 1;\n            if (j >= lp.getNconnection()){\n                j = 0;\n            }\n            cpnext = lp.getConnection(j);\n            dx = this.bases[cp.getEnd()].getX() - xc;\n            dy = this.bases[cp.getEnd()].getY() - yc;\n            rc = Math.sqrt(dx * dx + dy * dy);\n            ac = Math.atan2(dy, dx);\n            if (ac < 0.0){\n                ac += 2 * Math.PI;\n            }\n            dx = this.bases[cpnext.getStart()].getX() - xc;\n            dy = this.bases[cpnext.getStart()].getY() - yc;\n            rcn = Math.sqrt(dx * dx + dy * dy);\n            acn = Math.atan2(dy, dx);\n            if (acn < 0.0){\n                acn += 2 * Math.PI;\n            }\n            if (acn < ac){\n                acn += 2 * Math.PI;\n            }\n            dan = acn - ac;\n            dcp = cpnext.getAngle() - cp.getAngle();\n            if (dcp <= 0.0){\n                dcp += 2 * Math.PI;\n            }\n            if (Math.abs(dan - dcp) > Math.PI) {\n                if (cp.isExtruded()) {\n                    console.log(\"Warning from traverse_loop. Loop \"\n                            + lp.getNumber() + \" has crossed regions\\n\");\n                }\n                else if ((cpnext.getStart() - cp.getEnd()) != 1) {\n                    cp.setExtruded(true);\n                    continue set_radius; // remplacement du goto\n                }\n            }\n            if (cp.isExtruded()) {\n                this.construct_extruded_segment(cp, cpnext);\n            }\n            else {\n                n = cpnext.getStart() - cp.getEnd();\n                if (n < 0){\n                    n += this.nbase + 1;\n                }\n                angleinc = dan / n;\n                for (j = 1; j < n; j++) {\n                    i = cp.getEnd() + j;\n                    if (i > this.nbase){\n                        i -= this.nbase + 1;\n                    }\n                    a = ac + j * angleinc;\n                    rr = rc + (rcn - rc) * (a - ac) / dan;\n                    this.bases[i].setX(xc + rr * Math.cos(a));\n                    this.bases[i].setY(yc + rr * Math.sin(a));\n                }\n            }\n        }\n        break;\n    }\n    for (ic = 0; ic < lp.getNconnection(); ic++) {\n        if (icroot != ic) {\n            cp = lp.getConnection(ic);\n            //IM HERE\n            this.generate_region(cp);\n            this.traverse_loop(cp.getLoop(), cp);\n        }\n    }\n    n = 0;\n    sx = 0.0;\n    sy = 0.0;\n    for (ic = 0; ic < lp.getNconnection(); ic++) {\n        j = ic + 1;\n        if (j >= lp.getNconnection()){\n            j = 0;\n        }\n        cp = lp.getConnection(ic);\n        cpnext = lp.getConnection(j);\n        n += 2;\n        sx += this.bases[cp.getStart()].getX()\n                + this.bases[cp.getEnd()].getX();\n        sy += this.bases[cp.getStart()].getY()\n                + this.bases[cp.getEnd()].getY();\n        if (!cp.isExtruded()) {\n            for (j = cp.getEnd() + 1; j != cpnext.getStart(); j++) {\n                if (j > this.nbase){\n                    j -= this.nbase + 1;\n                }\n                n++;\n                sx += this.bases[j].getX();\n                sy += this.bases[j].getY();\n            }\n        }\n    }\n    lp.setX(sx / n);\n    lp.setY(sy / n);\n}\n\nNAView.prototype.determine_radius = function determine_radius(lp, lencut){\n    var mindit, ci, dt, sumn, sumd, radius, dit;\n    var i, j, end, start, imindit = 0;\n    var cp = new Connection(), cpnext = new Connection();\n    var rt2_2 = 0.7071068;\n\n    do {\n        mindit = 1.0e10;\n        for (sumd = 0.0, sumn = 0.0, i = 0; i < lp.getNconnection(); i++) {\n            cp = lp.getConnection(i);\n            j = i + 1;\n            if (j >= lp.getNconnection()){\n                j = 0;\n            }\n            cpnext = lp.getConnection(j);\n            end = cp.getEnd();\n            start = cpnext.getStart();\n            if (start < end){\n                start += this.nbase + 1;\n            }\n            dt = cpnext.getAngle() - cp.getAngle();\n            if (dt <= 0.0){\n                dt += 2 * Math.PI;\n            }\n            if (!cp.isExtruded()){\n                ci = start - end;\n            }\n            else {\n                if (dt <= Math.PI / 2){\n                    ci = 2.0;\n                }\n                else {\n                    ci = 1.5;\n                }\n            }\n            sumn += dt * (1.0 / ci + 1.0);\n            sumd += dt * dt / ci;\n            dit = dt / ci;\n            if (dit < mindit && !cp.isExtruded() && ci > 1.0) {\n                mindit = dit;\n                imindit = i;\n            }\n        }\n        radius = sumn / sumd;\n        if (radius < rt2_2){\n            radius = rt2_2;\n        }\n        if (mindit * radius < lencut) {\n            lp.getConnection(imindit).setExtruded(true);\n        }\n    } while (mindit * radius < lencut);\n    if (lp.getRadius() > 0.0){\n        radius = lp.getRadius();\n    }\n    else {\n        lp.setRadius(radius);\n    }\n}\n\nNAView.prototype.find_ic_middle = function find_ic_middle(icstart, icend, anchor_connection, acp, lp){\n    var count, ret, ic, i;\n    var done;\n\n    count = 0;\n    ret = -1;\n    ic = icstart;\n    done = false;\n    while (!done) {\n        if (count++ > lp.getNconnection() * 2) {\n            console.log(\"Infinite loop in 'find_ic_middle'\");\n        }\n        if (anchor_connection != null && lp.getConnection(ic) == acp) {\n            ret = ic;\n        }\n        done = ic == icend;\n        if (++ic >= lp.getNconnection()) {\n            ic = 0;\n        }\n    }\n    if (ret == -1) {\n        for (i = 1, ic = icstart; i < (count + 1) / 2; i++) {\n            if (++ic >= lp.getNconnection())\n                ic = 0;\n        }\n        ret = ic;\n    }\n    return ret;\n}\n\nNAView.prototype.construct_extruded_segment = function construct_extruded_segment(cp, cpnext){\n    var astart, aend1, aend2, aave, dx, dy, a1, a2, ac, rr, da, dac;\n    var start, end, n, nstart, nend;\n    var collision;\n\n    astart = cp.getAngle();\n    aend2 = aend1 = cpnext.getAngle();\n    if (aend2 < astart){\n        aend2 += 2 * Math.PI;\n    }\n    aave = (astart + aend2) / 2.0;\n    start = cp.getEnd();\n    end = cpnext.getStart();\n    n = end - start;\n    if (n < 0){\n        n += this.nbase + 1;\n    }\n    da = cpnext.getAngle() - cp.getAngle();\n    if (da < 0.0) {\n        da += 2 * Math.PI;\n    }\n    if (n == 2) {\n        this.construct_circle_segment(start, end);\n    }\n    else {\n        dx = this.bases[end].getX() - this.bases[start].getX();\n        dy = this.bases[end].getY() - this.bases[start].getY();\n        rr = Math.sqrt(dx * dx + dy * dy);\n        dx /= rr;\n        dy /= rr;\n        if (rr >= 1.5 && da <= Math.PI / 2) {\n            nstart = start + 1;\n            if (nstart > this.nbase){\n                nstart -= this.nbase + 1;\n            }\n            nend = end - 1;\n            if (nend < 0){\n                nend += this.nbase + 1;\n            }\n            this.bases[nstart].setX(this.bases[start].getX() + 0.5 * dx);\n            this.bases[nstart].setY(this.bases[start].getY() + 0.5 * dy);\n            this.bases[nend].setX(this.bases[end].getX() - 0.5 * dx);\n            this.bases[nend].setY(this.bases[end].getY() - 0.5 * dy);\n            start = nstart;\n            end = nend;\n        }\n        do {\n            collision = false;\n            this.construct_circle_segment(start, end);\n            nstart = start + 1;\n            if (nstart > this.nbase) {\n                nstart -= this.nbase + 1;\n            }\n            dx = this.bases[nstart].getX() - this.bases[start].getX();\n            dy = this.bases[nstart].getY() - this.bases[start].getY();\n            a1 = Math.atan2(dy, dx);\n            if (a1 < 0.0){\n                a1 += 2 * Math.PI;\n            }\n            dac = a1 - astart;\n            if (dac < 0.0){\n                dac += 2 * Math.PI;\n            }\n            if (dac > Math.PI){\n                collision = true;\n            }\n            nend = end - 1;\n            if (nend < 0){\n                nend += this.nbase + 1;\n            }\n            dx = this.bases[nend].getX() - this.bases[end].getX();\n            dy = this.bases[nend].getY() - this.bases[end].getY();\n            a2 = Math.atan2(dy, dx);\n            if (a2 < 0.0){\n                a2 += 2 * Math.PI;\n            }\n            dac = aend1 - a2;\n            if (dac < 0.0){\n                dac += 2 * Math.PI;\n            }\n            if (dac > Math.PI){\n                collision = true;\n            }\n            if (collision) {\n                ac = this.minf2(aave, astart + 0.5);\n                this.bases[nstart].setX(\n                        this.bases[start].getX() + Math.cos(ac));\n                this.bases[nstart].setY(\n                        this.bases[start].getY() + Math.sin(ac));\n                start = nstart;\n                ac = this.maxf2(aave, aend2 - 0.5);\n                this.bases[nend].setX(this.bases[end].getX() + Math.cos(ac));\n                this.bases[nend].setY(this.bases[end].getY() + Math.sin(ac));\n                end = nend;\n                n -= 2;\n            }\n        } while (collision && n > 1);\n    }\n}\n\nNAView.prototype.construct_circle_segment = function construct_circle_segment(start, end){\n    var dx, dy, rr, midx, midy, xn, yn, nrx, nry, mx, my, a;\n    var l, j, i;\n\n    dx = this.bases[end].getX() - this.bases[start].getX();\n    dy = this.bases[end].getY() - this.bases[start].getY();\n    rr = Math.sqrt(dx * dx + dy * dy);\n    l = end - start;\n    if (l < 0){\n        l += this.nbase + 1;\n    }\n    if (rr >= l) {\n        dx /= rr;\n        dy /= rr;\n        for (j = 1; j < l; j++) {\n            i = start + j;\n            if (i > this.nbase){\n                i -= this.nbase + 1;\n            }\n            this.bases[i].setX(\n                    this.bases[start].getX() + dx * j / l);\n            this.bases[i].setY(\n                    this.bases[start].getY() + dy * j / l);\n        }\n    }\n    else {\n        this.find_center_for_arc((l - 1), rr);\n        dx /= rr;\n        dy /= rr;\n        midx = this.bases[start].getX() + dx * rr / 2.0;\n        midy = this.bases[start].getY() + dy * rr / 2.0;\n        xn = dy;\n        yn = -dx;\n        nrx = midx + this._h * xn;\n        nry = midy + this._h * yn;\n        mx = this.bases[start].getX() - nrx;\n        my = this.bases[start].getY() - nry;\n        rr = Math.sqrt(mx * mx + my * my);\n        a = Math.atan2(my, mx);\n        for (j = 1; j < l; j++) {\n            i = start + j;\n            if (i > this.nbase){\n                i -= this.nbase + 1;\n            }\n            this.bases[i].setX(nrx + rr * Math.cos(a + j * this.angleinc));\n            this.bases[i].setY(nry + rr * Math.sin(a + j * this.angleinc));\n        }\n    }\n}\n\nNAView.prototype.find_center_for_arc = function find_center_for_arc(n, b){\n    var h, hhi, hlow, r, disc, theta, e, phi;\n    var iter;\n\n    hhi = (n + 1.0) / Math.PI;\n    // changed to prevent div by zero if (ih)\n    hlow = -hhi - b / (n + 1.000001 - b);\n    if (b < 1){\n        // otherwise we might fail below (ih)\n        hlow = 0;\n    }\n    iter = 0;\n    do {\n        h = (hhi + hlow) / 2.0;\n        r = Math.sqrt(h * h + b * b / 4.0);\n        disc = 1.0 - 0.5 / (r * r);\n        if (Math.abs(disc) > 1.0) {\n            console.log(\"Unexpected large magnitude discriminant = \" + disc\n                            + \" \" + r);\n        }\n        theta = Math.acos(disc);\n        phi = Math.acos(h / r);\n        e = theta * (n + 1) + 2 * phi - 2 * Math.PI;\n        if (e > 0.0) {\n            hlow = h;\n        }\n        else {\n            hhi = h;\n        }\n    } while (Math.abs(e) > 0.0001 && ++iter < this.MAXITER);\n    if (iter >= this.MAXITER) {\n        if (noIterationFailureYet) {\n            console.log(\"Iteration failed in find_center_for_arc\");\n            noIterationFailureYet = false;\n        }\n        h = 0.0;\n        theta = 0.0;\n    }\n    this._h = h;\n    this.angleinc = theta;\n}\n\nNAView.prototype.generate_region = function generate_region(cp){\n    var l, start, end, i, mate;\n    var rp;\n\n    rp = cp.getRegion();\n    l = 0;\n    if (cp.getStart() == rp.getStart1()) {\n        start = rp.getStart1();\n        end = rp.getEnd1();\n    }\n    else {\n        start = rp.getStart2();\n        end = rp.getEnd2();\n    }\n    if (this.bases[cp.getStart()].getX() > this.ANUM - 100.0\n            || this.bases[cp.getEnd()].getX() > this.ANUM - 100.0) {\n        console.log(\n                \"Bad region passed to generate_region. Coordinates not defined.\");\n    }\n    for (i = start + 1; i <= end; i++) {\n        l++;\n        this.bases[i].setX(\n                this.bases[cp.getStart()].getX() + this.HELIX_FACTOR * l\n                        * cp.getXrad());\n        this.bases[i].setY(\n                this.bases[cp.getStart()].getY() + this.HELIX_FACTOR * l\n                        * cp.getYrad());\n        mate = this.bases[i].getMate();\n        this.bases[mate].setX(\n                this.bases[cp.getEnd()].getX() + this.HELIX_FACTOR * l\n                        * cp.getXrad());\n        this.bases[mate].setY(\n                this.bases[cp.getEnd()].getY() + this.HELIX_FACTOR * l\n                        * cp.getYrad());\n\n    }\n}\n\nNAView.prototype.minf2 = function minf2(x1, x2) {\n    return ((x1) < (x2)) ? (x1) : (x2);\n}\n\nNAView.prototype.maxf2 = function maxf2(x1, x2) {\n    return ((x1) > (x2)) ? (x1) : (x2);\n}\n\nNAView.prototype.connected_connection = function connected_connection(cp, cpnext) {\n    if (cp.isExtruded()) {\n        return true;\n    }\n    else if (cp.getEnd() + 1 == cpnext.getStart()) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n","/* Version: 0.2\n* Date: 2015-03-15\n*/\n\nimport fstyle from './fornac.css';\n\nimport d3 from 'd3';\nimport slugid from 'slugid';\nimport {contextMenu} from './d3-context-menu.js';\n\nimport {RNAGraph} from './rnagraph.js';\nimport {ColorScheme, rnaUtilities} from './rnautils.js';\n\nimport {simpleXyCoordinates} from './simplernaplot.js';\nimport {NAView} from './naview/naview.js';\n\nexport function FornaContainer(element, passedOptions) {\n    var self = this;\n\n    self.options = {\n        'editable': false,\n        'displayAllLinks': false,\n        'labelInterval': 10,\n        'applyForce': true,\n        'chargeDistance': 110,\n        'friction': 0.35,\n        'middleCharge': -30,\n        'otherCharge': -30,\n        'linkDistanceMultiplier': 15,\n        'initialSize': null,\n        'layout': 'standard-polygonal',\n        'allowPanningAndZooming': true,\n        'transitionDuration': 500,\n        'maxNodeRadius': 80,    // the maximum radius of a node when the view is centered\n        'resizeSvgOnResize': true   //change the size of the svg when resizing the container\n                                    //sometimes its beneficial to turn this off, especially when\n                                    //performance is an issue\n    };\n\n    if (arguments.length > 1) {\n        for (var option in passedOptions) {\n            if (self.options.hasOwnProperty(option))\n                self.options[option] = passedOptions[option];\n        }\n    }\n\n    if (self.options.initialSize !== null) {\n        self.options.svgW = self.options.initialSize[0];\n        self.options.svgH = self.options.initialSize[1];\n    } else {\n        self.options.svgW = 800;\n        self.options.svgH = 800;\n    }\n\n    if (self.options.editable == true) {\n        let backgroundMenu = [\n            {\n                title: 'Add Node',\n                action: function(elm, d, i, mousePos) {\n\n                },\n                children: [{\n                    'title': 'A',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'A', 'centerPos': canvasMousePos});\n                    }\n                },\n                {\n                    'title': 'C',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'C', 'centerPos': canvasMousePos});\n                    }\n\n                    },\n                {\n                    'title': 'G',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'G', 'centerPos': canvasMousePos});\n                    }\n\n                    },\n                {\n                    'title': 'U',\n                    action: function(elm, d, i, mousePos) {\n                        console.log('mousePos:', mousePos, self.options.svgW, self.options.svgH);\n                        let canvasMousePos = [xScale.invert(mousePos[0]),\n                                              yScale.invert(mousePos[1])];\n                        console.log('canvasMousePos', canvasMousePos);\n\n                        self.addRNA('.', {'sequence': 'U', 'centerPos': canvasMousePos});\n\n                    }\n                }\n                ],\n                disabled: false // optional, defaults to false\n            }\n        ]\n\n        let nodeMenu = [\n            {\n                title: 'Delete Node',\n                action: function(elm, d, i) {\n                    self.deleteNode(d);\n                },\n                disabled: false // optional, defaults to false\n            },\n            {\n                title: 'Change Node',\n                action: function(elm, d, i) {\n                    console.log('You have clicked the second item!');\n                    console.log('The data for this circle is: ' + d);\n                },\n                children: [\n                    {\n                        title: 'A',\n                        action: function(elm, d, i) {\n                            self.changeNode('A', d);\n                        }\n                    },\n                    {\n                        title: 'C',\n                        action: function(elm, d, i) {\n                            self.changeNode('C', d);\n\n                        }\n                    },\n                    {\n                        title: 'G',\n                        action: function(elm, d, i) {\n                            self.changeNode('G', d);\n\n                        }\n                    },\n                    {\n                        title: 'U',\n                        action: function(elm, d, i) {\n                            self.changeNode('U', d);\n                        }\n                    },\n                ]\n            },\n            {\n                title: 'Insert Before',\n                action: function(elm, d, i) {\n\n                },\n                children: [\n                    {\n                        title: 'A',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('A', d, -1);\n                        }\n                    },\n                    {\n                        title: 'C',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('C', d, -1);\n\n                        }\n                    },\n                    {\n                        title: 'G',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('G', d, -1);\n\n                        }\n                    },\n                    {\n                        title: 'U',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('U', d, -1);\n                        }\n                    },\n                ]\n            },\n            {\n                title: 'Insert After',\n                action: function(elm, d, i) {\n                    console.log('d:', d);\n\n                },\n                children: [\n                    {\n                        title: 'A',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('A', d, 0);\n\n                        }\n                    },\n                    {\n                        title: 'C',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('C', d, 0);\n                        }\n                    },\n                    {\n                        title: 'G',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('G', d, 0);\n                        }\n                    },\n                    {\n                        title: 'U',\n                        action: function(elm, d, i) {\n                            self.insertNodeBeforeOrAfter('U', d, 0);\n                        }\n                    },\n                ]\n            }\n        ]\n\n        self.nodeContextMenu = contextMenu(nodeMenu);\n        self.backgroundContextMenu = contextMenu(backgroundMenu);\n\n    }  else {\n        console.log('empty context menu');\n        self.nodeContextMenu = function() {};\n    }\n\n    var fill = d3.scale.category20();\n\n    // mouse event vars\n    var mousedownLink = null,\n        mousedownNode = null,\n        mouseupNode = null;\n    let linkContextMenuShown = false;\n\n    var xScale = d3.scale.linear()\n    .domain([0,self.options.svgW]).range([0,self.options.svgW]);\n    var yScale = d3.scale.linear()\n    .domain([0,self.options.svgH]).range([0, self.options.svgH]);\n\n    var graph = self.graph = {\n        'nodes':[],\n        'links':[]\n    };\n\n    self.linkStrengths = {\n        'pseudoknot': 0.00,\n        'proteinChain': 0.00,\n        'chainChain': 0.00,\n        'intermolecule': 10.00,\n        'external': 0.00,\n        'other': 10.00\n    };\n\n    self.displayParameters = {\n        'displayBackground': 'true',\n        'displayNumbering': 'true',\n        'displayNodeOutline': 'true',\n        'displayNodeLabel': 'true',\n        'displayLinks': 'true',\n        'displayPseudoknotLinks': 'true',\n        'displayProteinLinks': 'true'\n    };\n\n    self.colorScheme = 'structure';\n    self.customColors = {};\n    self.animation = self.options.applyForce;\n    // don't listen to events because a model window is open somewhere\n    self.deaf = false;\n    self.rnas = {};\n    self.extraLinks = []; //store links between different RNAs\n\n    Array.prototype.equals = function (array) {\n        // if the other array is a falsy value, return\n        if (!array)\n            return false;\n\n        // compare lengths - can save a lot of time\n        if (this.length != array.length)\n            return false;\n\n        for (var i = 0, l=this.length; i < l; i++) {\n            // Check if we have nested arrays\n            if (this[i] instanceof Array && array[i] instanceof Array) {\n                // recurse into the nested arrays\n                if (!this[i].equals(array[i]))\n                    return false;\n            }\n            else if (this[i] != array[i]) {\n                // Warning - two different object instances will never be equal: {x:20} != {x:20}\n                return false;\n            }\n        }\n        return true;\n    };\n\n\n    self.createInitialLayout = function(structure, passedOptions) {\n        // the default options\n        var options = {\n                        'sequence': '',\n                        'name': 'empty',\n                        'positions': [],\n                        'labelInterval': self.options.labelInterval,\n                        'avoidOthers': true,\n                        'uids': [],\n                        'circularizeExternal': true\n                      };\n\n        if (arguments.length == 2) {\n            for (var option in passedOptions) {\n                if (options.hasOwnProperty(option))\n                    options[option] = passedOptions[option];\n            }\n        }\n\n        console.log('options.uids:', options.uids);\n        var rg = new RNAGraph(options.sequence, structure, options.name);\n        rg.circularizeExternal = options.circularizeExternal;\n\n        var rnaJson = rg.recalculateElements();\n\n        if (options.positions.length === 0) {\n            // no provided positions means we need to calculate an initial layout\n\n            if (self.options.layout == 'naview') {\n                var naview = new NAView();\n\n                let naViewPositions = naview.naview_xy_coordinates(rg.pairtable);\n                options.positions = []\n                for (let i = 0; i < naViewPositions.nbase; i++)\n                    options.positions.push([naViewPositions.x[i], naViewPositions.y[i]]);\n            } else {\n                options.positions = simpleXyCoordinates(rnaJson.pairtable);\n            }\n        }\n\n        rnaJson = rnaJson.elementsToJson()\n        .addUids(options.uids)\n        .addPositions('nucleotide', options.positions)\n        .addLabels(1, options.labelInterval)\n        .reinforceStems()\n        .reinforceLoops()\n        .connectFakeNodes()\n        .reassignLinkUids()\n        .breakNodesToFakeNodes();\n\n        return rnaJson;\n    };\n\n    self.addRNA = function(structure, passedOptions) {\n        var rnaJson = self.createInitialLayout(structure, passedOptions);\n        let centerView = false;\n\n        /*\n         * Code to display the JSONs representing the structure\n         *\n        rnaJson.nodes[0].rna = null;\n        rnaJson.nodes[0].nextNode = null;\n\n        rnaJson.links[0].source = null;\n        rnaJson.links[0].target = null;\n\n        console.log(rnaJson.nodes[0]);\n        console.log(rnaJson.links[0]);\n        console.log(JSON.stringify(rnaJson.nodes[0],null,2));\n        console.log(JSON.stringify(rnaJson.links[0],null,2));\n        */\n\n        if (arguments.length === 1)\n            passedOptions = {};\n\n        if ('extraLinks' in passedOptions) {\n            // presumably the passed in links are within the passed molecule\n            var newLinks = self.addExternalLinks(rnaJson, passedOptions.extraLinks);\n\n            self.extraLinks = self.extraLinks.concat(newLinks);\n        }\n\n        if ('centerPos' in passedOptions)\n            self.addRNAJSON(rnaJson, {centerPos: passedOptions.centerPos,\n                                      centerView: false})\n        else if ('avoidOthers' in passedOptions)\n            self.addRNAJSON(rnaJson, {avoidOthers: passedOptions.avoidOthers});\n        else\n            self.addRNAJSON(rnaJson, {centerView: passedOptions.centerView});\n\n        return rnaJson;\n    };\n\n    self.changeNode = function(nodeName, referenceNode) {\n        //insert a new node before or after another one\n        //positionOffset specifies who far from the original to insert the new node\n        let rna = referenceNode.rna;\n\n        let dotbracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let positions = rna.getPositions('nucleotide');\n        let sequence = rna.seq\n        let uids = rna.getUids();\n\n        let newNodeNum = referenceNode.num;\n\n        let newDotbracket = dotbracket;\n        let newSequence = sequence.slice(0,newNodeNum-1) +  nodeName + sequence.slice(newNodeNum);\n\n        console.log('newSequence:', newSequence);\n\n        console.log('uids:', uids);\n        uids.splice(newNodeNum-1, 1, slugid.nice());\n        let newPositions = positions;\n\n\n        delete self.rnas[rna.uid];\n        let newRNA = self.addRNA(newDotbracket, {'sequence': newSequence,\n                                 'positions': newPositions,\n                                 'uids': uids,\n                                 'centerView': false});\n\n    }\n\n    self.insertNodeBeforeOrAfter = function(nodeName, referenceNode, positionOffset) {\n        //insert a new node before or after another one\n        //positionOffset specifies who far from the original to insert the new node\n        let rna = referenceNode.rna;\n\n        let dotbracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let positions = rna.getPositions('nucleotide');\n        let sequence = rna.seq\n        let uids = rna.getUids();\n\n        let newNodeNum = referenceNode.num + positionOffset;\n\n        let newDotbracket = dotbracket.slice(0,newNodeNum) + '.' + dotbracket.slice(newNodeNum);\n        let newSequence = sequence.slice(0,newNodeNum) +  nodeName + sequence.slice(newNodeNum);\n\n        console.log('newSequence:', newSequence);\n\n        uids.splice(newNodeNum, 0, slugid.nice());\n        positions.splice(newNodeNum, 0, positions[newNodeNum - positionOffset-1]);\n\n        let newUids = uids;\n        let newPositions = positions;\n\n        console.log('positions:', positions);\n        console.log('new node positions:', newPositions);\n\n        delete self.rnas[rna.uid];\n        let newRNA = self.addRNA(newDotbracket, {'sequence': newSequence,\n                                 'positions': newPositions,\n                                 'uids': newUids,\n                                 'centerView': false});\n\n    }\n\n    self.deleteNode = function(node) {\n        console.log('deleting...', node);\n        // get the dotbracket string for this rna\n        let rna = node.rna;\n        let pair = rna.pairtable[node.num];\n\n        // remove basepairs for this node\n        if (pair != 0) {\n            rna.pairtable[node.num] = 0;\n            rna.pairtable[pair] = 0;\n        }\n\n        let dotbracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let positions = rna.getPositions('nucleotide');\n        let sequence = rna.seq\n        let uids = rna.getUids();\n\n        let newDotbracket = dotbracket.slice(0, node.num-1) + dotbracket.slice(node.num)\n        let newPositions = positions.slice(0, node.num-1)\n                .concat(positions.slice(node.num));\n        let newSequence = sequence.slice(0, node.num-1) + sequence.slice(node.num)\n        let newUids = uids.slice(0, node.num-1)\n                .concat(uids.slice(node.num));\n\n        delete self.rnas[rna.uid];\n        let newRNA = self.addRNA(newDotbracket, {'sequence': newSequence,\n                                 'positions': newPositions,\n                                 'uids': newUids,\n                                  'centerView': false});\n\n        console.log('new dotbracket:', newDotbracket);\n        //self.recalculateGraph();\n\n        //remove backbone links associated with this node\n\n        //remove this node\n\n    }\n\n    self.addExternalLinks = function(rnaJson, externalLinks) {\n        var newLinks = [];\n\n        for (var i = 0; i < externalLinks.length; i++) {\n            var newLink = {linkType: 'external', value: 1, uid: slugid.nice(),\n                source: null, target: null};\n            // check if the source node is an array\n            if (Object.prototype.toString.call(externalLinks[i][0]) === '[object Array]') {\n                for (var j = 0; j < rnaJson.nodes.length; j++) {\n                    if ('nucs' in rnaJson.nodes[j]) {\n                        if (rnaJson.nodes[j].nucs.equals(externalLinks[i][0])) {\n                            newLink.source = rnaJson.nodes[j];\n                            break;\n                        }\n                    }\n                }\n            } else {\n                for (var j = 0; j < rnaJson.nodes.length; j++) {\n                    if (rnaJson.nodes[j].num == externalLinks[i][0]) {\n                        newLink.source = rnaJson.nodes[j];\n                    }\n                }\n            }\n\n            // check if the target node is an array\n            if (Object.prototype.toString.call(externalLinks[i][1]) === '[object Array]') {\n                for (var j = 0; j < rnaJson.nodes.length; j++) {\n                    if ('nucs' in rnaJson.nodes[j]) {\n                        if (rnaJson.nodes[j].nucs.equals(externalLinks[i][1])) {\n                            newLink.target = rnaJson.nodes[j];\n                        }\n                    }\n                }\n            } else {\n                for (var j = 0; j < rnaJson.nodes.length; j++) {\n                    if (rnaJson.nodes[j].num == externalLinks[i][1]) {\n                        newLink.target = rnaJson.nodes[j];\n                    }\n                }\n            }\n\n            if (newLink.source == null || newLink.target == null) {\n                console.log('ERROR: source or target of new link not found:', newLink, externalLinks[i]);\n                continue;\n            }\n\n            newLinks.push(newLink);\n        }\n\n        return newLinks;\n    };\n\n    self.addRNAJSON = function(rnaGraph,\n                               { avoidOthers = false,\n                                centerPos = null,\n                                centerView = true} ) {\n        // Add an RNAGraph, which contains nodes and links as part of the\n        // structure\n        // Each RNA will have uid to identify it\n        // when it is modified, it is replaced in the global list of RNAs\n        //\n        var maxX, minX;\n        console.log('centerView:', centerView);\n\n        if (centerPos != null) {\n            // center the newly created RNA at a given position\n            let totalX = 0;\n            let totalY = 0;\n            let nodeCount = 0;\n\n            rnaGraph.nodes.forEach(function(node) {\n                totalX += node.x;\n                totalY += node.y;\n                nodeCount += 1;\n            });\n\n            if (nodeCount > 0) {\n                // center the nodes at centerPos\n\n                rnaGraph.nodes.forEach(function(node) {\n                    node.x = node.x + centerPos[0] - totalX / nodeCount;\n                    node.y = node.y + centerPos[1] - totalY / nodeCount;\n\n                    node.px = node.x;\n                    node.py = node.y;\n                });\n            }\n        }\n\n        if (avoidOthers) {\n            if (self.graph.nodes.length > 0)\n                maxX = d3.max(self.graph.nodes.map(function(d) { return d.x; }));\n            else\n                maxX = 0;\n\n            minX = d3.min(rnaGraph.nodes.map(function(d) { return d.x; }));\n\n            rnaGraph.nodes.forEach(function(node) {\n                node.x += (maxX - minX) + 20;\n                node.px += (maxX - minX);\n            });\n        }\n\n        rnaGraph.nodes.forEach(function(node) {\n            node.rna = rnaGraph;\n        });\n\n        self.rnas[rnaGraph.uid] = rnaGraph;\n        self.recalculateGraph();\n\n        self.update();\n\n        if (centerView)\n            self.centerView();\n\n        return rnaGraph;\n    };\n\n    function magnitude(x) {\n        return Math.sqrt(x[0] * x[0] + x[1] * x[1]);\n    }\n\n    function positionAnyNode(d) {\n        var endPoint = d;\n        var startPoint = d.prevNode;\n        var lengthMult = 6;\n\n        if (startPoint === null)\n            return;\n\n        // does this node have a link pointing to it?\n        if (!d.linked)\n            return;\n\n        // point back toward the previous node\n        var u = [-(endPoint.x - startPoint.x), -(endPoint.y - startPoint.y)];\n\n        if (u[0] == 0 && u[1] == 0)\n            return;     // will lead to a NaN error\n\n        u = [u[0] / magnitude(u), u[1] / magnitude(u)];\n        var v = [-u[1], u[0]];\n\n        var arrowTip = [d.radius * u[0], d.radius * u[1]];\n\n        var path = 'M' +\n                    (arrowTip[0] + lengthMult * (u[0] + v[0]) / 2) + ',' + (arrowTip[1] + lengthMult * (u[1] + v[1]) / 2) + 'L' +\n                    (arrowTip[0]) + ',' + (arrowTip[1]) + 'L' +\n                    (arrowTip[0] + lengthMult * (u[0] - v[0]) / 2) + ',' + (arrowTip[1] + lengthMult * (u[1] - v[1]) / 2);\n\n        d3.select(this).attr('d', path);\n    }\n\n    function realLinkFilter(d) {\n        return d.linkType == 'basepair' ||\n               d.linkType == 'backbone' ||\n               d.linkType == 'intermolecule' ||\n               d.linkType == 'pseudoknot' ||\n               d.linkType == 'label_link' ||\n               d.linkType == 'external' ||\n               d.linkType == 'chain_chain';\n    }\n\n    self.transitionRNA = function(newStructure, nextFunction) {\n        //transition from an RNA which is already displayed to a new structure\n        var duration = self.options.transitionDuration;\n\n        var uids = self.graph.nodes\n        .filter(function(d) { return d.nodeType == 'nucleotide'; })\n        .map(function(d) { return d.uid; });\n\n        var options = {'uids': uids};\n        var newRNAJson = self.createInitialLayout(newStructure, options);\n\n        var gnodes = visNodes.selectAll('g.gnode').data(newRNAJson.nodes, nodeKey);\n\n        if (duration === 0)\n            gnodes.attr('transform', function(d) {\n                return 'translate(' + [d.x, d.y] + ')';\n            });\n        else {\n            gnodes.transition().attr('transform', function(d) {\n                return 'translate(' + [d.x, d.y] + ')'; }).duration(duration);\n        }\n\n        var links = visLinks.selectAll('line.link')\n        .data(newRNAJson.links.filter(realLinkFilter), linkKey);\n        var newNodes = self.createNewNodes(gnodes.enter())\n        .attr('transform', function(d) {\n            if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                return 'translate(' + [0, 0] + ')';\n            else\n                return '';\n        });\n\n\n        if (duration === 0)\n            gnodes.exit().remove();\n        else\n            gnodes.exit().transition()\n            .attr('transform', function(d) {\n                if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                    return 'translate(' + [0, 0] + ')';\n                else\n                    return '';\n            });\n\n        gnodes.select('path')\n        .each(positionAnyNode);\n\n        self.graph.nodes = gnodes.data();\n        self.updateStyle();\n        self.centerView(duration);\n\n        function endall(transition, callback) {\n            if (transition.size() === 0) { setTimeout(callback, duration); }\n            var n = 0;\n            transition\n            .each(function() { ++n; })\n            .each('end', function() { if (!--n) callback.apply(this, arguments); });\n        }\n\n        function addNewLinks() {\n            var newLinks = self.createNewLinks(links.enter());\n            self.graph.links = links.data();\n\n            self.updateStyle();\n\n            if (typeof nextFunction != 'undefined')\n                nextFunction();\n\n        }\n\n        links.exit().remove();\n\n        if (duration === 0) {\n            links\n            .attr('x1', function(d) { return d.source.x; })\n            .attr('y1', function(d) { return d.source.y; })\n            .attr('x2', function(d) { return d.target.x; })\n            .attr('y2', function(d) { return d.target.y; });\n\n            var newLinks = self.createNewLinks(links.enter());\n            self.graph.links = links.data();\n\n            self.updateStyle();\n        } else {\n            links.transition()\n            .attr('x1', function(d) { return d.source.x; })\n            .attr('y1', function(d) { return d.source.y; })\n            .attr('x2', function(d) { return d.target.x; })\n            .attr('y2', function(d) { return d.target.y; })\n            .duration(duration)\n            .call(endall, addNewLinks);\n        }\n\n        if (duration === 0) {\n            newNodes\n            .attr('transform', function(d) {\n                if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                    return 'translate(' + [d.x, d.y] + ')';\n                else\n                    return '';\n            });\n        } else {\n            newNodes.transition()\n            .attr('transform', function(d) {\n                if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                    return 'translate(' + [d.x, d.y] + ')';\n                else\n                    return '';\n            });\n        }\n\n    };\n\n    self.recalculateGraph = function() {\n        // Condense all of the individual RNAs into one\n        // collection of nodes and links\n        self.graph.nodes = [];\n        self.graph.links = [];\n        for (var uid in self.rnas) {\n            self.graph.nodes = self.graph.nodes.concat(self.rnas[uid].nodes);\n            self.graph.links = self.graph.links.concat(self.rnas[uid].links);\n        }\n\n        // Create a lookup table so that we can access each node\n        // based on its uid. This will be used to create the links\n        // between different RNAs\n        var uidsToNodes = {};\n\n        for (var i = 0; i < self.graph.nodes.length; i++)\n            uidsToNodes[self.graph.nodes[i].uid] = self.graph.nodes[i];\n\n        self.graph.links.forEach(function(link) {\n            link.source = uidsToNodes[link.source.uid];\n            link.target = uidsToNodes[link.target.uid];\n        });\n\n        for (i = 0; i < self.extraLinks.length; i++) {\n            // the actual node objects may have changed, so we hae to recreate\n            // the extra links based on the uids\n            if (!(self.extraLinks[i].target.uid in uidsToNodes)) {\n                console.log('not there:', self.extraLinks[i]);\n                continue;\n            }\n\n            self.extraLinks[i].source = uidsToNodes[self.extraLinks[i].source.uid];\n            self.extraLinks[i].target = uidsToNodes[self.extraLinks[i].target.uid];\n\n            if (self.extraLinks[i].linkType == 'intermolecule') {\n                //remove links to middle nodes\n                let fakeLinks = self.graph.links.filter(function(d) {\n                    return ((d.source == self.extraLinks[i].source || d.source == self.extraLinks[i].target ||\n                            d.target == self.extraLinks[i].source || d.target == self.extraLinks[i].source) &&\n                            d.linkType == 'fake');\n                });\n\n                for (var j = 0; j < fakeLinks.length; j++) {\n                    var linkIndex = self.graph.links.indexOf(fakeLinks[j]);\n                    self.graph.links.splice(linkIndex, 1);\n                }\n            }\n\n            graph.links.push(self.extraLinks[i]);\n        }\n    };\n\n    self.addNodes = function addNodes(json) {\n        // add a new set of nodes from a json file\n\n        // Resolve the sources and targets of the links so that they\n        // are not just indeces into an array\n        json.links.forEach(function(entry) {\n            if (typeof entry.source == 'number') entry.source = json.nodes[entry.source];\n            if (typeof entry.target == 'number') entry.target = json.nodes[entry.target];\n        });\n\n        // Get the maximum x and y values of the current graph\n        // so that we don't place a new structure on top of the\n        // old one\n        if (self.graph.nodes.length > 0) {\n            maxX = d3.max(self.graph.nodes.map(function(d) {return d.x;}));\n            maxY = d3.max(self.graph.nodes.map(function(d) {return d.y;}));\n        } else {\n            maxX = 0;\n            maxY = 0;\n        }\n\n        json.nodes.forEach(function(entry) {\n            if (!(entry.rna.uid in self.rnas)) {\n                self.rnas[entry.rna.uid] = entry.rna;\n            }\n\n            entry.x += maxX;\n            //entry.y += maxY;\n\n            entry.px += maxX;\n            //entry.py += maxY;\n        });\n\n        r = new RNAGraph('','');\n        r.nodes = json.nodes;\n        r.links = json.links;\n\n        //self.addRNA(r);\n        self.recalculateGraph();\n\n        self.update();\n        self.centerView();\n    };\n\n    self.addCustomColors = function addCustomColors(json) {\n        // Add a json file containing the custom colors\n        self.customColors = json;\n    };\n\n    self.addCustomColorsText = function(customColorsText) {\n        let cs = new ColorScheme(customColorsText);\n        self.customColors = cs.colorsJson;\n        self.changeColorScheme('custom');\n    };\n\n    self.clearNodes = function clearNodes() {\n        self.graph.nodes = [];\n        self.graph.links = [];\n\n        self.rnas = {};\n        self.extraLinks = [];\n\n        self.update();\n    };\n\n    self.toJSON = function toJSON() {\n       var data = {'rnas': self.rnas, 'extraLinks': self.extraLinks};\n            var dataString = JSON.stringify(data, function(key, value) {\n            //remove circular references\n            if (key == 'rna') {\n                return;\n            } else {\n                return value;\n            }\n       }, '\\t');\n       return dataString;\n    };\n\n    self.fromJSON = function(jsonString) {\n        var rnas, extraLinks;\n\n        try{\n            var data = JSON.parse(jsonString);\n            rnas = data.rnas;\n            extraLinks = data.extraLinks;\n        } catch(err) {\n            throw err;\n        }\n\n        for (var uid in rnas) {\n            if (rnas[uid].type == 'rna') {\n                r = new RNAGraph();\n\n                r.seq = rnas[uid].seq;\n                r.dotbracket = rnas[uid].dotbracket;\n                r.circular = rnas[uid].circular;\n                r.pairtable = rnas[uid].pairtable;\n                r.uid = rnas[uid].uid;\n                r.structName = rnas[uid].structName;\n                r.nodes = rnas[uid].nodes;\n                r.links = rnas[uid].links;\n                r.rnaLength = rnas[uid].rnaLength;\n                r.elements = rnas[uid].elements;\n                r.nucsToNodes = rnas[uid].nucsToNodes;\n                r.pseudoknotPairs = rnas[uid].pseudoknotPairs;\n            } else {\n                r = new ProteinGraph();\n                r.size = rnas[uid].size;\n                r.nodes = rnas[uid].nodes;\n                r.uid = rnas[uid].uid;\n            }\n\n            self.addRNAJSON(r, false);\n        }\n\n        extraLinks.forEach(function(link) {\n            self.extraLinks.push(link);\n        });\n\n        self.recalculateGraph();\n        self.update();\n    };\n\n    self.setSize = function() {\n        if (self.options.initialSize != null)\n            return;\n\n        var svgH = d3.select(element).node().offsetHeight;\n        var svgW = d3.select(element).node().offsetWidth;\n\n        self.options.svgW = svgW;\n        self.options.svgH = svgH;\n\n        //Set the output range of the scales\n        xScale.range([0, svgW]).domain([0, svgW]);\n        yScale.range([0, svgH]).domain([0, svgH]);\n\n        //re-attach the scales to the zoom behaviour\n        self.zoomer.x(xScale)\n        .y(yScale);\n\n        self.brusher.x(xScale)\n        .y(yScale);\n\n        self.centerView();\n\n        if (!self.options.resizeSvgOnResize) {\n            return;\n        }\n\n        //resize the background\n        /*\n        rect.attr('width', svgW)\n        .attr('height', svgH);\n        */\n\n        svg.attr('width', svgW)\n        .attr('height', svgH);\n    }\n\n    function changeColors(moleculeColors, d, scale) {\n        if (moleculeColors.hasOwnProperty(d.num)) {\n            let val = parseFloat(moleculeColors[d.num]);\n\n            if (isNaN(val)) {\n                // passed in color is not a scalar, so\n                // treat it as a color\n                return moleculeColors[d.num];\n            } else {\n                // the user passed in a float, let's use a colormap\n                // to convert it to a color\n                return scale(val);\n            }\n        } else {\n            return 'white';\n        }\n    }\n\n    self.setOutlineColor = function(color) {\n        var nodes = visNodes.selectAll('g.gnode').select('[node_type=nucleotide]');\n        nodes.style('fill', color);\n    }\n\n    self.changeColorScheme = function(newColorScheme) {\n        var proteinNodes = visNodes.selectAll('[node_type=protein]');\n\n        proteinNodes.classed(fstyle.protein, true)\n                    .attr('r', function(d) { return d.radius; });\n\n        var gnodes = visNodes.selectAll('g.gnode');\n        var circles = visNodes.selectAll('g.gnode').selectAll('circle');\n        var nodes = visNodes.selectAll('g.gnode').select('[node_type=nucleotide]');\n        self.colorScheme = newColorScheme;\n\n\n        if (newColorScheme == 'sequence') {\n            var scale = d3.scale.ordinal()\n            .range(['#dbdb8d', '#98df8a', '#ff9896', '#aec7e8', '#aec7e8'])\n            .domain(['A','C','G','U','T']);\n            nodes.style('fill', function(d) {\n                return scale(d.name);\n            });\n\n        } else if (newColorScheme == 'structure') {\n            var scale = d3.scale.category10()\n            .domain(['s','m','i','e','t','h','x'])\n            .range(['lightgreen', '#ff9896', '#dbdb8d', 'lightsalmon',\n                   'lightcyan', 'lightblue', 'transparent']);\n\n                   nodes.style('fill', function(d) {\n                       return scale(d.elemType);\n                   });\n\n        } else if (newColorScheme == 'positions') {\n            nodes.style('fill', function(d) {\n                var scale = d3.scale.linear()\n                .range(['#98df8a', '#dbdb8d', '#ff9896'])\n                .interpolate(d3.interpolateLab)\n                .domain([1, 1 + (d.rna.rnaLength - 1) / 2, d.rna.rnaLength]);\n\n                return scale(d.num);\n            });\n        } else if (newColorScheme == 'custom') {\n            // scale to be used in case the user passes scalar\n            // values rather than color names\n            if (typeof self.customColors != 'undefined' &&\n                'domain' in self.customColors &&\n               'range' in self.customColors) {\n                var scale = d3.scale.linear()\n                .interpolate(d3.interpolateLab)\n                .domain(self.customColors.domain)\n                .range(self.customColors.range);\n            }\n\n            nodes.style('fill', function(d) {\n                if (typeof self.customColors == 'undefined' ||\n                   !self.customColors.hasOwnProperty('colorValues')) {\n                    return 'white';\n                }\n\n                if (self.customColors.colorValues.hasOwnProperty(d.structName) &&\n                    self.customColors.colorValues[d.structName].hasOwnProperty(d.num)) {\n                    // if a molecule name is specified, it supercedes the default colors\n                    // (for which no molecule name has been specified)\n                    let moleculeColors = self.customColors.colorValues[d.structName];\n                    return changeColors(moleculeColors, d, scale);\n                } else if (self.customColors.colorValues.hasOwnProperty('')) {\n                    let moleculeColors = self.customColors.colorValues[''];\n                    return changeColors(moleculeColors, d, scale);\n                }\n\n                return 'white';\n            });\n        }\n    };\n\n    function mousedown() {\n\n    }\n\n    function mousemove() {\n        if (!mousedownNode) return;\n\n        let mpos = d3.mouse(vis.node());\n        // update drag line\n        dragLine\n        .attr('x1', mousedownNode.x)\n        .attr('y1', mousedownNode.y)\n        .attr('x2', mpos[0])\n        .attr('y2', mpos[1]);\n\n    }\n\n    function mouseup() {\n        if (mousedownNode) {\n\n            if (!linkContextMenuShown)\n                dragLine\n                .attr('class', fstyle.dragLineHidden);\n        }\n\n        // clear mouse event vars\n        resetMouseVars();\n        //update()\n    }\n    //adapt size to window changes:\n    window.addEventListener('resize', self.setSize, false);\n\n    self.zoomer = d3.behavior.zoom()\n        .scaleExtent([0.1,10])\n        .x(xScale)\n        .y(yScale)\n        .on('zoomstart', zoomstart)\n        .on('zoom', redraw);\n\n    d3.select(element).select('svg').remove();\n\n    var svg = d3.select(element)\n    .attr('tabindex', 1)\n    .on('keydown.brush', keydown)\n    .on('keyup.brush', keyup)\n    .each(function() { this.focus(); })\n    .append('svg:svg')\n    .attr('width', self.options.svgW)\n    .attr('height', self.options.svgH)\n    .attr('class', 'fornacPlot');\n\n    self.options.svg = svg;\n\n    var svgGraph = svg.append('svg:g')\n    .on('mousemove', mousemove)\n    .on('mousedown', mousedown)\n    .on('mouseup', mouseup);\n\n    if (self.options.allowPanningAndZooming)\n        svgGraph.call(self.zoomer);\n\n    if (self.options.editable)\n        svgGraph.on('contextmenu', self.backgroundContextMenu);\n\n    /*\n    var rect = svgGraph.append('svg:rect')\n    .attr('width', self.options.svgW)\n    .attr('height', self.options.svgH)\n    .attr('fill', 'white')\n    //.attr('stroke', 'grey')\n    //.attr('stroke-width', 1)\n    //.attr('pointer-events', 'all')\n    .attr('id', 'zrect');\n    */\n\n    var brush = svgGraph.append('g')\n    .datum(function() { return {selected: false, previouslySelected: false}; })\n    .attr('class', fstyle.brush);\n\n    var vis = svgGraph.append('svg:g');\n    var visLinks = vis.append('svg:g');\n    var visNodes = vis.append('svg:g');\n\n    self.brusher = d3.svg.brush()\n                .x(xScale)\n                .y(yScale)\n               .on('brushstart', function(d) {\n                   var gnodes = visNodes.selectAll('g.gnode').selectAll('.outlineNode');\n                   gnodes.each(function(d) { d.previouslySelected = ctrlKeydown && d.selected; });\n               })\n               .on('brush', function() {\n                   var gnodes = visNodes.selectAll('g.gnode').selectAll('.outlineNode');\n                   var extent = d3.event.target.extent();\n\n                   gnodes.classed(fstyle.selected, function(d) {\n                       return d.selected = self.options.applyForce && d.previouslySelected ^\n                       (extent[0][0] <= d.x && d.x < extent[1][0]\n                        && extent[0][1] <= d.y && d.y < extent[1][1]);\n                   });\n               })\n               .on('brushend', function() {\n                   d3.event.target.clear();\n                   d3.select(this).call(d3.event.target);\n               });\n\n      brush.call(self.brusher)\n          .on('mousedown.brush', null)\n          .on('touchstart.brush', null)\n          .on('touchmove.brush', null)\n          .on('touchend.brush', null);\n      brush.select('.background').style('cursor', 'auto');\n\n    function zoomstart() {\n        var node = visNodes.selectAll('g.gnode').selectAll('.outlineNode');\n        node.each(function(d) {\n                d.selected = false;\n                d.previouslySelected = false;\n                });\n        node.classed(fstyle.selected, false);\n    }\n\n    function redraw() {\n        vis.attr('transform',\n                 'translate(' + d3.event.translate + ')' + ' scale(' + d3.event.scale + ')');\n    }\n\n    self.getBoundingBoxTransform = function() {\n        // Center the view on the molecule(s) and scale it so that everything\n        // fits in the window\n\n        //no molecules, nothing to do\n        if (self.graph.nodes.length === 0)\n            return {'translate': [0,0], 'scale': 1};\n\n        // Get the bounding box\n        var minX = d3.min(self.graph.nodes.map(function(d) {return d.x;}));\n        var minY = d3.min(self.graph.nodes.map(function(d) {return d.y;}));\n\n        var maxX = d3.max(self.graph.nodes.map(function(d) {return d.x;}));\n        var maxY = d3.max(self.graph.nodes.map(function(d) {return d.y;}));\n\n        var maxRadius = d3.max(self.graph.nodes.map(function(d) { return d.radius; }));\n\n        // The width and the height of the molecule\n        var molWidth = maxX - minX;\n        var molHeight = maxY - minY;\n\n        // how much larger the drawing area is than the width and the height\n        var widthRatio = self.options.svgW / (molWidth + 1);\n        var heightRatio = self.options.svgH / (molHeight + 1);\n\n        // we need to fit it in both directions, so we scale according to\n        // the direction in which we need to shrink the most\n        var minRatio = Math.min(widthRatio, heightRatio,\n                                self.options.maxNodeRadius / maxRadius) * 0.8;\n\n        // the new dimensions of the molecule\n        var newMolWidth = molWidth * minRatio;\n        var newMolHeight = molHeight * minRatio;\n\n        // translate so that it's in the center of the window\n        var xTrans = -(minX) * minRatio + (self.options.svgW - newMolWidth) / 2;\n        var yTrans = -(minY) * minRatio + (self.options.svgH - newMolHeight) / 2;\n\n        return {'translate': [xTrans, yTrans], 'scale': minRatio};\n    };\n\n    self.centerView = function(duration) {\n        if (arguments.length === 0)\n            duration = 0;\n\n        var bbTransform = self.getBoundingBoxTransform();\n\n        if (bbTransform === null)\n            return;\n\n        // do the actual moving\n        vis.transition().attr('transform',\n                 'translate(' + bbTransform.translate + ')' + ' scale(' + bbTransform.scale + ')').duration(duration);\n\n        // tell the zoomer what we did so that next we zoom, it uses the\n        // transformation we entered here\n        self.zoomer.translate(bbTransform.translate);\n        self.zoomer.scale(bbTransform.scale);\n    };\n\n    self.force = d3.layout.force()\n    .charge(function(d) { if (d.nodeType == 'middle')  {\n            return self.options.middleCharge;\n    }\n        else\n            return self.options.otherCharge;})\n    .friction(self.options.friction)\n    .linkDistance(function(d) { return self.options.linkDistanceMultiplier * d.value; })\n    .linkStrength(function(d) { if (d.linkType in self.linkStrengths) {\n                                  return self.linkStrengths[d.linkType];\n                                } else {\n                                  return self.linkStrengths.other; }\n    })\n    .gravity(0.000)\n    .nodes(self.graph.nodes)\n    .links(self.graph.links)\n    .chargeDistance(self.options.chargeDistance)\n    .size([self.options.svgW, self.options.svgH]);\n\n    // line displayed when dragging new nodes\n    var dragLine = vis.append('line')\n    .attr('class', fstyle.dragLine)\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', 0)\n    .attr('y2', 0);\n\n    function resetMouseVars() {\n        mousedownNode = null;\n        mouseupNode = null;\n        mousedownLink = null;\n    }\n\n    var shiftKeydown = false;\n    var ctrlKeydown = false;\n\n    function selectedNodes(mouseDownNode) {\n        var gnodes = visNodes.selectAll('g.gnode');\n\n        if (ctrlKeydown) {\n            return gnodes.filter(function(d) { return d.selected; });\n\n            //return d3.selectAll('[struct_name=' + mouseDownNode.struct_name + ']');\n        } else {\n            return gnodes.filter(function(d) { return d.selected ; });\n            //return d3.select(this);\n        }\n    }\n\n    function dragstarted(d) {\n        d3.event.sourceEvent.stopPropagation();\n\n      if (!d.selected && !ctrlKeydown) {\n          // if this node isn't selected, then we have to unselect every other node\n            var node = visNodes.selectAll('g.gnode').selectAll('.outlineNode');\n            node.classed(fstyle.selected, function(p) { return p.selected =  self.options.applyForce && (p.previouslySelected = false); });\n          }\n\n        d3.select(this).select('.outlineNode').classed(fstyle.selected, function(p) { d.previouslySelected = d.selected; return d.selected = self.options.applyForce && true; });\n\n        var toDrag = selectedNodes(d);\n        toDrag.each(function(d1) {\n            d1.fixed |= 2;\n        });\n\n        //d3.event.sourceEvent.stopPropagation();\n        //d3.select(self).classed('dragging', true);\n        //\n    }\n\n    function dragged(d) {\n\n        var toDrag = selectedNodes(d);\n\n        toDrag.each(function(d1) {\n            d1.x += d3.event.dx;\n            d1.y += d3.event.dy;\n\n            d1.px += d3.event.dx;\n            d1.py += d3.event.dy;\n        });\n\n        self.resumeForce();\n        d3.event.sourceEvent.preventDefault();\n    }\n\n    self.resumeForce = function() {\n        if (self.animation)\n            self.force.resume();\n    };\n\n    function dragended(d) {\n        var toDrag = selectedNodes(d);\n\n        toDrag.each(function(d1) {\n            d1.fixed &= ~6;\n        });\n    }\n\n    function collide(node) {\n        var r = node.radius + 16,\n        nx1 = node.x - r,\n        nx2 = node.x + r,\n        ny1 = node.y - r,\n        ny2 = node.y + r;\n        return function(quad, x1, y1, x2, y2) {\n            if (quad.point && (quad.point !== node)) {\n                var x = node.x - quad.point.x,\n                y = node.y - quad.point.y,\n                l = Math.sqrt(x * x + y * y),\n                r = node.radius + quad.point.radius;\n                if (l < r) {\n                    l = (l - r) / l * 0.1;\n                    node.x -= x *= l;\n                    node.y -= y *= l;\n                    quad.point.x += x;\n                    quad.point.y += y;\n                }\n            }\n            return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;\n        };\n    }\n\n\n    var drag = d3.behavior.drag()\n    //.origin(function(d) { return d; })\n    .on('dragstart', dragstarted)\n    .on('drag', dragged)\n    .on('dragend', dragended);\n\n    function keydown() {\n        if (self.deaf)\n            // lalalalal, not listening\n            return;\n\n        if (shiftKeydown) return;\n\n        switch (d3.event.keyCode) {\n            case 68:    //'d' key\n                console.log('dotbracket:', self.getStructuresDotBracket());\n                break;\n            case 16:\n                shiftKeydown = true;\n                break;\n            case 17:\n                ctrlKeydown = true;\n                break;\n            case 67: //c\n                self.centerView();\n                break;\n        }\n\n        if (shiftKeydown || ctrlKeydown) {\n            svgGraph.call(self.zoomer)\n            .on('mousedown.zoom', null)\n            .on('touchstart.zoom', null)\n            .on('touchmove.zoom', null)\n            .on('touchend.zoom', null);\n\n            //svgGraph.on('zoom', null);\n            vis.selectAll('g.gnode')\n            .on('mousedown.drag', null);\n        }\n\n        if (ctrlKeydown) {\n          brush.select('.background').style('cursor', 'crosshair');\n          brush.call(self.brusher);\n        }\n    }\n\n    function keyup() {\n        shiftKeydown = false;\n        ctrlKeydown = false;\n\n        brush.call(self.brusher)\n        .on('mousedown.brush', null)\n        .on('touchstart.brush', null)\n        .on('touchmove.brush', null)\n        .on('touchend.brush', null);\n\n        brush.select('.background').style('cursor', 'auto');\n        svgGraph.call(self.zoomer);\n\n        vis.selectAll('g.gnode')\n        .call(drag);\n    }\n\n    d3.select(element)\n    .on('keydown', keydown)\n    .on('keyup', keyup)\n    .on('contextmenu', function() {\n            d3.event.preventDefault();\n    });\n\n    var linkKey = function(d) {\n        return d.uid;\n    };\n\n    var nodeKey = function(d) {\n        var key = d.uid;\n        return key;\n    };\n\n\n    var updateRnaGraph = function(r) {\n        var nucleotidePositions = r.getPositions('nucleotide');\n        var labelPositions = r.getPositions('label');\n\n        var uids = r.getUids();\n\n        r.recalculateElements()\n        .elementsToJson()\n        .addPseudoknots()\n        .addPositions('nucleotide', nucleotidePositions)\n        .addUids(uids)\n        .addLabels(1, self.options.labelInterval)\n        .addPositions('label', labelPositions)\n        .reinforceStems()\n        .reinforceLoops()\n        .updateLinkUids();\n    };\n\n    var removeBackBoneLink = function(d) {\n        if (d.target.num - d.source.num != 1) {\n            console.log('ERROR: non adjacent nodes. Target:', d.target,\n                        'Source:', d.source, 'Link:', d);\n            return;\n        }\n\n        let rna = d.target.rna;\n        let toRemove = [];\n\n        for (let i = 0; i < rna.links.length; i++) {\n            let link = rna.links[i];\n\n            if (link.linkType != 'basepair')\n                continue;\n\n            if (link.source.num <= d.source.num && link.target.num >= d.target.num) {\n                console.log('crossing basepair', link);\n                toRemove.push(link);\n            }\n        }\n\n\n        // Remove all base pairs that are between these two nodes and add them as extra\n        // links\n        console.log('toRemove:', toRemove);\n\n        for (let i = 0; i < toRemove.length; i++) {\n            rna.pairtable[toRemove[i].source.num] = 0;\n            rna.pairtable[toRemove[i].target.num] = 0;\n\n            toRemove[i].from = toRemove[i].source.num;\n            toRemove[i].to = toRemove[i].target.num - d.source.num;\n        }\n\n        // extract the dotbracket string of the rna\n        // cut it at the position of this backbone bond\n        let sequence = rna.seq;\n        let sequence1 = rna.seq.slice(0, d.source.num);\n        let sequence2 = rna.seq.slice(d.source.num);\n\n        let rnaDotBracket = rnaUtilities.pairtableToDotbracket(rna.pairtable);\n        let dotBracket1 = rnaDotBracket.slice(0, d.source.num);\n        let dotBracket2 = rnaDotBracket.slice(d.source.num)\n\n        // get the nucleotide positions\n        // cut them at the positions of the backbone bond\n        let positions = rna.getPositions('nucleotide')\n        let uids = rna.getUids();\n\n        let positions1 = positions.slice(0, d.source.num);\n        let positions2 = positions.slice(d.source.num);\n\n        let uids1 = uids.slice(0, d.source.num);\n        let uids2 = uids.slice(d.source.num);\n\n        console.log('positions1:', positions1);\n        console.log('positions2:', positions2);\n\n        delete self.rnas[rna.uid];\n        let rna1 = self.addRNA(dotBracket1, { 'sequence': sequence1,\n                                   'positions': positions1,\n                                   'uids': uids1 });\n        let rna2 = self.addRNA(dotBracket2, { 'sequence': sequence2,\n                                   'positions': positions2,\n                                   'uids': uids2 });\n        for (let i = 0; i < toRemove.length; i++) {\n            console.log('rna1:', rna1);\n            console.log('rna2:', rna2);\n            console.log('toRemove[i]', toRemove[i]);\n            self.extraLinks.push(\n                {'source': rna1.nodes[toRemove[i].from-1],\n                 'target': rna2.nodes[toRemove[i].to-1],\n                 'value': 1,\n                 'uid': slugid.nice(),\n                 'linkType': 'intermolecule'});\n                self.recalculateGraph();\n                self.update();\n\n        }\n        console.log('self.extraLinks:', self.extraLinks);\n        //self.extraLinks.push({'source': rna1.nodes[\n\n        // create two new rnas\n        // add their positions\n        // add them back to the plot\n    }\n\n    var removeLink = function(d) {\n        // remove a link between two nodes\n        let index = self.graph.links.indexOf(d);\n        console.log('removing link:', index);\n\n        if (index > -1) {\n            //remove a link\n            //graph.links.splice(index, 1);\n\n            // there should be two cases\n            // 1. The link is within a single molecule\n\n            if (d.source.rna == d.target.rna) {\n                if (d.linkType == 'backbone') {\n                    console.log('trying to remove a backbone link', d.source.num, d.target.num);\n\n                    removeBackBoneLink(d);\n\n                    return;\n\n\n                } else {\n                    var r = d.source.rna;\n\n                    r.addPseudoknots();\n                    r.pairtable[d.source.num] = 0;\n                    r.pairtable[d.target.num] = 0;\n\n                    updateRnaGraph(r);\n                }\n\n\n            } else {\n                // 2. The link is between two different molecules\n                let extraLinkIndex = self.extraLinks.indexOf(d);\n\n                self.extraLinks.splice(extraLinkIndex, 1);\n            }\n\n            self.recalculateGraph();\n        }\n\n        self.update();\n    };\n\n    var linkClick = function(d) {\n        if (!shiftKeydown) {\n            return;\n        }\n\n        var invalidLinks = { //'backbone': true,\n                             'fake': true,\n                             'fake_fake': true,\n                             'label_link': true};\n\n        console.log('d.linkType:', d.linkType);\n        if (d.linkType in invalidLinks )\n            return;\n\n        removeLink(d);\n    };\n\n    self.getStructuresDotBracket = function() {\n        console.log('self.rnas:', self.rnas);\n        let sequence = [];\n        let currIdx = 1;\n        let nodeIdxs = {};\n        let breaks = [];\n        let pairtable = [];\n\n        // add the nodes\n        for (let uid in self.rnas) {\n            let rna = self.rnas[uid];\n\n            for (let j = 0; j < rna.nodes.length; j++) {\n                let node = rna.nodes[j];\n\n                if (node.nodeType != 'nucleotide')\n                    continue;\n\n                console.log('node:', node);\n                nodeIdxs[node.uid] = currIdx;\n                currIdx += 1;\n\n                sequence.push(node.name);\n            }\n\n            breaks.push(currIdx);\n        }\n\n        pairtable = [currIdx-1]\n        for (let i = 0; i < currIdx; i++)\n            pairtable.push(0)\n\n        // add the links\n        for (let uid in self.rnas) {\n            let rna = self.rnas[uid];\n\n            for (let j = 0; j < rna.links.length; j++) {\n                let link = rna.links[j];\n\n                if (link.linkType != 'basepair')\n                    continue;\n\n                let idx1 = nodeIdxs[link.source.uid];\n                let idx2 = nodeIdxs[link.target.uid];\n                pairtable[idx1] = idx2;\n                pairtable[idx2] = idx1;\n            }\n        }\n\n        for (let i = 0; i < self.extraLinks.length; i++) {\n            let link = self.extraLinks[i];\n\n            let idx1 = nodeIdxs[link.source.uid];\n            let idx2 = nodeIdxs[link.target.uid];\n\n            pairtable[idx1] = idx2;\n            pairtable[idx2] = idx1;\n        }\n\n        let structure = rnaUtilities.pairtableToDotbracket(pairtable).split('');\n\n        for (let i = 0; i < breaks.length - 1; i++) {\n            console.log('breaks[i]:', breaks[i]);\n            sequence.splice(breaks[i] + i - 1, 0, '&');\n            structure.splice(breaks[i] + i - 1, 0, '&');\n        }\n\n        console.log('sequence:', sequence, sequence.join(''));\n        console.log('structure:', structure, structure.join(''));\n        return [sequence.join(''), structure.join('')];\n    };\n\n    self.addBackBoneLink = function(newLink) {\n        // opposite of deleting a link\n        // get the two dotbracket strings\n        let rna1 = newLink.source.rna;\n        let rna2 = newLink.target.rna;\n\n        let dotbracket1 = rnaUtilities.pairtableToDotbracket(rna1.pairtable);\n        let dotbracket2 = rnaUtilities.pairtableToDotbracket(rna2.pairtable);\n\n        let seq1 = newLink.source.rna.seq;\n        let seq2 = newLink.target.rna.seq;\n\n        let positions1 = rna1.getPositions('nucleotide');\n        let positions2 = rna2.getPositions('nucleotide');\n\n        // concatenate them\n        let newDotbracket = dotbracket1 + dotbracket2;\n        let newSeq = seq1 + seq2;\n        let newPositions = positions1.concat(positions2);\n\n        let toAddInternal = [];\n        let toAddExternal = [];\n        let toDelete = {};\n\n        for (let i = 0; i < self.extraLinks.length; i++) {\n            console.log('self.extraLinks[i]', self.extraLinks[i]);\n            console.log('rna1:', rna1);\n            console.log('rna2:', rna2);\n            if (self.extraLinks[i].source.rna == rna1) {\n                if ( self.extraLinks[i].target.rna == rna2) {\n                    // both ends of the extra link are within what will become the new molecule\n                    // need to be added as base pairs afterwards\n                    //self.extraLinks[i].from = self.extraLinks[i].source.num;\n                    //self.extraLinks[i].to = dotbracket1.length + self.extraLinks[i].target.num;\n                    //toAddInternal.push(self.extraLinks[i]);\n                } else {\n                    // only one end of the extra link is within what will become the newly\n                    // created molecule, needs to remain an extra link\n                    // source will always be the unchanged molecule, whereas target will be\n                    // the newly created one\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].target,\n                        'target': self.extraLinks[i].source.num\n                    });\n\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            } else if (self.extraLinks[i].source.rna == rna2) {\n                if ( self.extraLinks[i].target.rna == rna1) {\n                    // add internal link\n                    // both ends of the extra link are within what will become the new molecule\n                    // need to be added as base pairs afterwards\n                    //self.extraLinks[i].from = self.extraLinks[i].target.num;\n                    //self.extraLinks[i].to = dotbracket1.length + self.extraLinks[i].source.num;\n\n                    //toAddInternal.push(self.extraLinks[i]);\n                } else {\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].target,\n                        'target': self.extraLinks[i].source.num + dotbracket1.length\n                    });\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            }\n\n            if (self.extraLinks[i].target.rna == rna1) {\n                if (self.extraLinks[i].source.rna == rna2) {\n                    // covered in previous if statement\n                } else {\n                    // only one end of the extra link is within what will become the newly\n                    // created molecule, needs to remain an extra link\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].source,\n                        'target': self.extraLinks[i].target.num\n                    });\n\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            } else if (self.extraLinks[i].target.rna == rna2) {\n                if (self.extraLinks[i].source.rna == rna1) {\n                    toAddExternal.push({\n                        'source': self.extraLinks[i].source,\n                        'target': self.extraLinks[i].target.num + dotbracket1.length\n                    });\n\n                    toDelete[self.extraLinks[i].uid] = true;\n                }\n            }\n        }\n\n\n        self.extraLinks = self.extraLinks.filter((e) => { return !(e.uid in toDelete) });\n\n        delete self.rnas[rna1.uid];\n        delete self.rnas[rna2.uid];\n\n        let newRna = null;\n        // create a new RNA\n        if (self.options.applyForce)\n            newRna = self.addRNA(newDotbracket, { 'sequence': newSeq,\n                                'positions': newPositions,\n                                'centerView': false});\n        else\n            newRna = self.addRNA(newDotbracket, { 'sequence': newSeq,\n                        'centerView': false });\n\n\n\n        // add new external links\n        for (let i = 0; i < toAddExternal.length; i++) {\n            self.extraLinks.push({\n                'source': toAddExternal[i].source,\n                'target': newRna.nodes[toAddExternal[i].target-1],\n                'value': 1,\n                'uid': slugid.nice(),\n                'linkType': 'intermolecule'\n            });\n        }\n\n        self.recalculateGraph();\n        self.update();\n        console.log('self.extraLinks:', self.extraLinks);\n    };\n\n    self.addLink =  function(newLink) {\n        // this means we have a new json, which means we have\n        // to recalculate the structure and change the colors\n        // appropriately\n        //\n        console.log('adding new link');\n        if (newLink.source.rna == newLink.target.rna) {\n            // must be a basepair\n            let r = newLink.source.rna;\n\n            r.pairtable[newLink.source.num] = newLink.target.num;\n            r.pairtable[newLink.target.num] = newLink.source.num;\n\n            updateRnaGraph(r);\n\n        } else {\n            //Add an extra link\n            console.log('intermolecule');\n            newLink.linkType = 'intermolecule';\n            self.extraLinks.push(newLink);\n        }\n        self.recalculateGraph();\n        self.update();\n    };\n\n    var nodeMouseclick = function(d) {\n        if (d3.event.defaultPrevented) return;\n\n        if (!ctrlKeydown) {\n            //if the shift key isn't down, unselect everything\n            var node = visNodes.selectAll('g.gnode').selectAll('.outlineNode');\n            node.classed(fstyle.selected, function(p) { return p.selected =  self.options.applyForce && (p.previouslySelected = false); });\n        }\n\n        // always select this node\n        d3.select(this).select('circle').classed(fstyle.selected, d.selected = self.options.applyForce && !d.previouslySelected);\n        d3.event.stopPropagation();\n    };\n\n    var nodeMouseup = function(d,i) {\n        let backbonePossible = true, basepairPossible = true;\n\n        if (mousedownNode) {\n            mouseupNode = d;\n\n            // if the node isn't a nucleotide, we can't create a link\n            if (mouseupNode.nodeType == 'middle' || mousedownNode.nodeType == 'middle' || mouseupNode.nodeType == 'label' || mousedownNode.nodeType == 'label')\n                return;\n\n            if (mouseupNode == mousedownNode) { resetMouseVars(); return; }\n            var newLink = {source: mousedownNode, target: mouseupNode, linkType: 'basepair', value: 1, uid: slugid.nice()};\n\n            for (let i = 0; i < self.graph.links.length; i++) {\n                if ((self.graph.links[i].source == mousedownNode)  ||\n                    (self.graph.links[i].target == mousedownNode) ||\n                    (self.graph.links[i].source == mouseupNode) ||\n                    (self.graph.links[i].target == mouseupNode)) {\n                    // either one of the nodes is already in a link\n\n                    // if any of the nodes are already involved in a basepair or a pseudoknot\n                    // then we can't make a basepair link\n                    if (self.graph.links[i].linkType == 'basepair' ||\n                        self.graph.links[i].linkType == 'pseudoknot' ||\n                        self.graph.links[i].linkType == 'intermolecule') {\n                        // although should be able to make a backbone link\n                        console.log('no basepair possible');\n                        basepairPossible = false;\n                    }\n                }\n\n                if (((self.graph.links[i].source == mouseupNode)  &&\n                     (self.graph.links[i].target == mousedownNode)) ||\n                         ((self.graph.links[i].source == mousedownNode)  &&\n                          (self.graph.links[i].target == mouseupNode))) {\n\n                    // if we're trying to make a link between two nodes which already have\n                    // a backbone between them, then we can't make a link\n                    if (self.graph.links[i].linkType == 'backbone') {\n                        return;\n                    }\n                }\n            }\n\n\n            if (newLink.source.rna != newLink.target.rna) {\n                    // could be either a backbone link or an intermolecule link\n\n                if ((newLink.source.num == 1 &&\n                     newLink.target.num == newLink.target.rna.rnaLength) ||\n                     (newLink.target.num == 1 &&\n                      newLink.source.num == newLink.source.rna.rnaLength)) {\n                          //\n                          let linkMenu = [\n                              {\n                                  title: 'Backbone Link',\n                                  action: function(elm, d, i) {\n                                      linkContextMenuShown = false;\n                                      console.log('Item #1 clicked!');\n                                      console.log('The data for this circle is: ' + d);\n                                      dragLine.attr('class', fstyle.dragLineHidden);\n                                      self.addBackBoneLink(newLink);\n                                  },\n                                  disabled: false // optional, defaults to false\n                              },\n                              {\n                                  title: 'Basepair Link',\n                                  action: function(elm, d, i) {\n                                      linkContextMenuShown = false;\n                                      console.log('You have clicked the second item!');\n                                      console.log('The data for this circle is: ' + d);\n                                      dragLine.attr('class', fstyle.dragLineHidden);\n                                      self.addLink(newLink);\n                                  }\n                              }\n                          ]\n                          linkContextMenuShown = true;\n                          let linkContextMenu = contextMenu(linkMenu);\n                          console.log('newLinkMenu');\n                          linkContextMenu.apply(this, [d,i,true,\n                                                function() { dragLine.attr('class', fstyle.dragLineHidden) }]);\n                      } else {\n                          // between end points but can't make a backbone\n                          if (basepairPossible)\n                            self.addLink(newLink);\n                      }\n            } else {\n                if (basepairPossible)\n                    self.addLink(newLink);\n            }\n\n        }\n    };\n\n    var nodeMousedown = function(d) {\n      if (!d.selected && !ctrlKeydown) {\n          // if this node isn't selected, then we have to unselect every other node\n            var node = visNodes.selectAll('g.gnode').selectAll('.outlineNode');\n            node.classed(fstyle.selected, function(p) { return p.selected = p.previouslySelected = false; })\n          }\n\n\n          d3.select(this).classed(fstyle.selected, function(p) { d.previouslySelected = d.selected; return d.selected = self.options.applyForce && true; });\n\n        if (!shiftKeydown) {\n            return;\n        }\n\n        mousedownNode = d;\n\n        dragLine\n        .attr('class', fstyle.dragLine)\n        .attr('x1', mousedownNode.x)\n        .attr('y1', mousedownNode.y)\n        .attr('x2', mousedownNode.x)\n        .attr('y2', mousedownNode.y);\n\n        //gnodes.attr('pointer-events',  'none');\n\n    };\n\n    self.startAnimation = function() {\n      self.animation = true;\n      vis.selectAll('g.gnode')\n        .call(drag);\n      self.force.start();\n    };\n\n    self.stopAnimation = function() {\n      self.animation = false;\n      vis.selectAll('g.gnode')\n           .on('mousedown.drag', null);\n      self.force.stop();\n    };\n\n    self.setFriction = function(value) {\n      self.force.friction(value);\n      self.resumeForce();\n    };\n\n    self.setCharge = function(value) {\n      self.force.charge(value);\n      self.resumeForce();\n    };\n\n    self.setGravity = function(value) {\n      self.force.gravity(value);\n      self.resumeForce();\n    };\n\n    self.setPseudoknotStrength = function(value) {\n      self.linkStrengths.pseudoknot = value;\n      self.update();\n    };\n\n    self.displayBackground = function(value) {\n      self.displayParameters.displayBackground = value;\n      self.updateStyle();\n    };\n\n    self.displayNumbering = function(value) {\n      self.displayParameters.displayNumbering = value;\n      self.updateStyle();\n    };\n\n    self.displayNodeOutline = function(value) {\n      self.displayParameters.displayNodeOutline = value;\n      self.updateStyle();\n    };\n\n    self.displayNodeLabel = function(value) {\n      self.displayParameters.displayNodeLabel = value;\n      self.updateStyle();\n    };\n\n    self.displayLinks = function(value) {\n      self.displayParameters.displayLinks = value;\n      self.updateStyle();\n    };\n\n    self.displayPseudoknotLinks = function(value) {\n      self.displayParameters.displayPseudoknotLinks = value;\n      self.updateStyle();\n    };\n\n    self.displayProteinLinks = function(value) {\n      self.displayParameters.displayProteinLinks = value;\n      self.updateStyle();\n    };\n\n    self.updateStyle = function() {\n        // Background\n        //rect.classed('transparent', !self.displayParameters.displayBackground);\n        // Numbering\n        visNodes.selectAll('[node_type=label]').classed(fstyle.transparent, !self.displayParameters.displayNumbering);\n        visNodes.selectAll('[label_type=label]').classed(fstyle.transparent, !self.displayParameters.displayNumbering);\n        visLinks.selectAll('[linkType=label_link]').classed(fstyle.transparent, !self.displayParameters.displayNumbering);\n        // Node Outline\n        svg.selectAll('circle').classed(fstyle.hiddenOutline, !self.displayParameters.displayNodeOutline);\n        // Node Labels\n        visNodes.selectAll('[label_type=nucleotide]').classed(fstyle.transparent, !self.displayParameters.displayNodeLabel);\n        // Links\n        svg.selectAll('[link_type=real],[link_type=basepair],[link_type=backbone],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=external]').classed(fstyle.transparent, !self.displayParameters.displayLinks);\n        // Pseudoknot Links\n        svg.selectAll('[link_type=pseudoknot]').classed(fstyle.transparent, !self.displayParameters.displayPseudoknotLinks);\n        // Protein Links\n        svg.selectAll('[link_type=protein_chain]').classed(fstyle.transparent, !self.displayParameters.displayProteinLinks);\n        // Fake Links\n        visLinks.selectAll('[link_type=fake]').classed(fstyle.transparent, !self.options.displayAllLinks);\n        visLinks.selectAll('[link_type=fake_fake]').classed(fstyle.transparent, !self.options.displayAllLinks);\n    };\n\n    function nudge(dx, dy) {\n        node.filter(function(d) { return d.selected; })\n        .attr('cx', function(d) { return d.x += dx; })\n        .attr('cy', function(d) { return d.y += dy; });\n\n        link.filter(function(d) { return d.source.selected; })\n        .attr('x1', function(d) { return d.source.x; })\n        .attr('y1', function(d) { return d.source.y; });\n\n        link.filter(function(d) { return d.target.selected; })\n        .attr('x2', function(d) { return d.target.x; })\n        .attr('y2', function(d) { return d.target.y; });\n\n        d3.event.preventDefault();\n    }\n\n    self.createNewLinks = function(linksEnter) {\n        var linkLines = linksEnter.append('svg:line');\n\n        linkLines.append('svg:title')\n        .text(linkKey);\n\n        linkLines\n        .classed('link', true)\n        .classed(fstyle.link, true)\n        .attr('x1', function(d) { return d.source.x; })\n        .attr('y1', function(d) { return d.source.y; })\n        .attr('x2', function(d) { return d.target.x; })\n        .attr('y2', function(d) { return d.target.y; })\n        .attr('link_type', function(d) { return d.linkType; } )\n        .attr('pointer-events', function(d) { if (d.linkType == 'fake') return 'none'; else return 'all';});\n\n        /* We don't need to update the positions of the stabilizing links */\n        /*\n        basepairLinks = visLinks.selectAll('[link_type=basepair]');\n        basepairLinks.classed('basepair', true);\n\n        fakeLinks = visLinks.selectAll('[link_type=fake]')\n        fakeLinks.classed('fake', true);\n\n        intermolecule_links = vis_links.selectAll('[link_type=intermolecule]');\n        intermolecule_links.classed('intermolecule', true);\n\n        plink = vis_links.selectAll('[link_type=protein_chain],[link_type=chain_chain]');\n        plink.classed('chain_chain', true);\n        */\n\n       return linkLines;\n    };\n\n    self.createNewNodes = function(gnodesEnter) {\n        gnodesEnter = gnodesEnter.append('g')\n        .classed(fstyle.noselect, true)\n        .classed('gnode', true)\n        .attr('struct_name', function(d) { return d.structName; })\n        .attr('transform', function(d) {\n            if (typeof d.x != 'undefined' && typeof d.y != 'undefined')\n                return 'translate(' + [d.x, d.y] + ')';\n            else\n                return '';\n        })\n        .each( function(d) { d.selected = d.previouslySelected = false; });\n\n        gnodesEnter\n        .call(drag)\n        .on('mousedown', nodeMousedown)\n        .on('mousedrag', function(d) {})\n        .on('mouseup', nodeMouseup)\n        .attr('num', function(d) { return 'n' + d.num; })\n        .attr('rnum', function(d) {\n            return 'n' + (d.rna.rnaLength - d.num + 1); })\n        .on('click', nodeMouseclick)\n        .on('contextmenu', self.nodeContextMenu)\n        .transition()\n        .duration(750)\n        .ease('elastic');\n\n        // create nodes behind the circles which will serve to highlight them\n        var labelAndProteinNodes = gnodesEnter.filter(function(d) {\n            return d.nodeType == 'label' || d.nodeType == 'protein';\n        });\n\n        var nucleotideNodes = gnodesEnter.filter(function(d) {\n            return d.nodeType == 'nucleotide';\n        });\n\n        labelAndProteinNodes.append('svg:circle')\n        .attr('class', 'outlineNode')\n        .classed(fstyle.outlineNode, true)\n        .attr('r', function(d) { return d.radius+1; });\n\n        nucleotideNodes.append('svg:circle')\n        .attr('class', 'outlineNode')\n        .classed(fstyle.outlineNode, true)\n        .attr('r', function(d) { return d.radius+1; });\n\n        labelAndProteinNodes.append('svg:circle')\n        .attr('class', fstyle.node)\n        .classed(fstyle.label, function(d) { return d.nodeType == 'label'; })\n        .attr('r', function(d) {\n            if (d.nodeType == 'middle') return 0;\n            else {\n                return d.radius;\n            }\n        })\n        .attr('node_type', function(d) { return d.nodeType; })\n        .attr('node_num', function(d) { return d.num; });\n\n        nucleotideNodes.append('svg:circle')\n        .attr('class', fstyle.node)\n        .attr('node_type', function(d) { return d.nodeType; })\n        .attr('node_num', function(d) { return d.num; })\n        .attr('r', function(d) { return d.radius; })\n        .append('svg:title')\n        .text(function(d) {\n            if (d.nodeType == 'nucleotide') {\n                return d.structName + ':' + d.num;\n            } else {\n                return '';\n            }\n        });\n\n        nucleotideNodes.append('svg:path')\n        .attr('class', fstyle.node)\n        .attr('node_type', function(d) { return d.nodeType; })\n        .attr('node_num', function(d) { return d.num; })\n        .append('svg:title')\n        .text(function(d) {\n            if (d.nodeType == 'nucleotide') {\n                return d.structName + ':' + d.num;\n            } else {\n                return '';\n            }\n        });\n\n\n        var labelsEnter = gnodesEnter.append('text')\n        .text(function(d) { return d.name; })\n        .attr('class', fstyle.nodeLabel)\n        .attr('label_type', function(d) { return d.nodeType; })\n\n        /*\n        labelsEnter.text(function(d) {\n            return d.num;\n        });\n        */\n\n        labelsEnter.append('svg:title')\n        .text(function(d) {\n            if (d.nodeType == 'nucleotide') {\n                return d.structName + ':' + d.num;\n            } else {\n                return '';\n            }\n        });\n\n\n        return gnodesEnter;\n    };\n\n    var nodeTooltip = function(d) {\n        nodeTooltips = {};\n\n        nodeTooltips.nucleotide = d.num;\n        nodeTooltips.label = '';\n        nodeTooltips.pseudo = '';\n        nodeTooltips.middle = '';\n        nodeTooltips.protein = d.structName;\n\n        return nodeTooltips[d.nodeType];\n    };\n\n    self.update = function () {\n        self.force.nodes(self.graph.nodes)\n        .links(self.graph.links);\n\n        if (self.animation) {\n          self.force.start();\n        }\n\n        var allLinks = visLinks.selectAll('line.link')\n        .data(self.graph.links.filter(realLinkFilter), linkKey);\n\n        allLinks.attr('class', '')\n        .classed('link', true)\n        .classed(fstyle.link, true)\n        .attr('link_type', function(d) { return d.linkType; } )\n\n        var linksEnter = allLinks.enter();\n        self.createNewLinks(linksEnter);\n\n        allLinks.exit().remove();\n\n\n        var domain = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n        var colors = d3.scale.category10().domain(domain);\n\n            var gnodes = visNodes.selectAll('g.gnode')\n            .data(self.graph.nodes, nodeKey);\n            //.attr('pointer-events', 'all');\n\n            var gnodesEnter = gnodes.enter();\n\n            self.createNewNodes(gnodesEnter);\n            gnodes.exit().remove();\n\n\n            //fake_nodes = self.graph.nodes.filter(function(d) { return d.nodeType == 'middle'; });\n            //fakeNodes = self.graph.nodes.filter(function(d) { return true; });\n            var realNodes = self.graph.nodes.filter(function(d) { return d.nodeType == 'nucleotide' || d.nodeType == 'label';});\n\n            var xlink;\n            if (self.displayFakeLinks)\n                xlink = allLinks;\n            else\n                xlink = visLinks.selectAll('[link_type=real],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=label_link],[link_type=backbone],[link_type=basepair],[link_type=intermolecule],[link_type=external]');\n\n            var position;\n\n            gnodes.selectAll('path')\n            .each(positionAnyNode);\n\n            xlink.on('click', linkClick);\n\n            self.force.on('tick', function() {\n                var q = d3.geom.quadtree(realNodes);\n                var i = 0;\n                var n = realNodes.length;\n\n                while (++i < n) q.visit(collide(realNodes[i]));\n\n                xlink.attr('x1', function(d) { return d.source.x; })\n                .attr('y1', function(d) {  return d.source.y; })\n                .attr('x2', function(d) { return d.target.x; })\n                .attr('y2', function(d) { return d.target.y; });\n\n                // Translate the groups\n                gnodes.attr('transform', function(d) {\n                    return 'translate(' + [d.x, d.y] + ')';\n                });\n\n                gnodes.select('path')\n                .each(positionAnyNode);\n\n            });\n\n            self.force.on('end', () => {\n                gnodes.selectAll('[node_type=nucleotide]')\n                .filter((d,i) => { if (i == 0) return true; else return false; })\n                .each((d,i) => {\n                    //console.log(\"pos\", d.num, d.x, d.y);\n                });\n\n                for (let uid in self.rnas) {\n                    for (let i = 1; i < self.rnas[uid].pairtable[0]; i++) {\n                        //console.log('pt', i, self.rnas[uid].pairtable[i]);\n                    }\n                }\n\n            });\n\n        self.changeColorScheme(self.colorScheme);\n\n        if (self.animation) {\n          self.force.start();\n        }\n\n        self.updateStyle();\n    };\n\n    self.setSize();\n}\n\n/************************* END FORNAF **********************************/\n","import {RNAGraph} from './rnagraph.js';\n\nimport {simpleXyCoordinates} from './simplernaplot.js';\nimport {NAView} from './naview/naview.js'\n\nimport fstyle from './fornac.css';\n\nexport function rnaPlot(passedOptions = {}) {\n    var options = {\n        'width': 300,\n        'height': 300,\n        'nucleotideRadius': 5,\n        'rnaEdgePadding': 1,     // how far the leftmost, rightmost, topmost and bottomost\n                                // nucleotides are from the edge of the plot\n        'labelInterval': 10,\n        'showNucleotideLabels': true,\n        'startNucleotideNumber': 1,\n        'bundleExternalLinks': false,\n        \n        'rnaLayout': 'simple', // simple or naview\n        'namePosition': '0 0' // for x and y either 0, 0.5 or 1\n    };\n    var options = Object.assign(options, passedOptions);\n\n    var xScale, yScale;\n    \n    function createTransformToFillViewport(xValues, yValues) {\n        // create transform that will scale the x and y values so that\n        // they fill the available viewport\n        let xExtent = d3.extent(xValues);\n        let yExtent = d3.extent(yValues);\n\n        // add the radius of the nucleotides\n        xExtent[0] -= options.nucleotideRadius + options.rnaEdgePadding;\n        yExtent[0] -= options.nucleotideRadius + options.rnaEdgePadding;\n\n        xExtent[1] += options.nucleotideRadius + options.rnaEdgePadding;\n        yExtent[1] += options.nucleotideRadius + options.rnaEdgePadding;\n\n        // find out how wide and height the molecule\n        var xRange = xExtent[1] - xExtent[0];\n        var yRange = yExtent[1] - yExtent[0];\n\n        // how much wider / taller is it than the available viewport\n        var xExtra = xRange - options.width;\n        var yExtra = yRange - options.height;\n\n        // once we have a scale for one dimension, we can create the scale for the other\n        // keeping the same expansion / shrinking ratio\n        function createOtherScale(firstScale, newDomain, newRange) {\n            var scaleFactor = (firstScale.range()[1] - firstScale.range()[0]) /\n                              (firstScale.domain()[1] - firstScale.domain()[0]);\n            var newWidth = (newDomain[1] - newDomain[0]) * scaleFactor\n            var newMargin = ((newRange[1] - newRange[0]) - newWidth) / 2;\n\n            return {'scaleFactor': scaleFactor,\n                    'scale': d3.scale.linear()\n                                     .domain(newDomain)\n                                     .range([newRange[0] + newMargin, newRange[1] - newMargin])};\n        }\n\n        var ret;\n\n        if (xExtra > yExtra) {\n            // we have to shrink more in the x-dimension than the y\n            xScale = d3.scale.linear()\n            .domain(xExtent)\n            .range([0, options.width])\n\n            ret = createOtherScale(xScale, yExtent, [0, options.height]);\n            yScale = ret.scale;\n        } else {\n            // we have to shrink more in the x-dimension than the y\n            yScale = d3.scale.linear()\n            .domain(yExtent)\n            .range([0, options.height])\n\n            ret = createOtherScale(yScale, xExtent, [0, options.width]);\n            xScale = ret.scale;\n        }\n\n        var xOffset = xScale.range()[0] - xScale.domain()[0];\n        var yOffset = yScale.range()[0] - yScale.domain()[0];\n\n        return 'translate(' + -(xScale.domain()[0] * ret.scaleFactor - xScale.range()[0]) +\n                  ',' + -(yScale.domain()[0] * ret.scaleFactor - yScale.range()[0]) + ')' +\n            'scale(' + ret.scaleFactor + ')';\n    }\n\n    function createNucleotides(selection, nucleotideNodes) {\n        // create groupings for each nucleotide and label\n        var gs = selection\n        .selectAll('.node')\n        .data(nucleotideNodes)\n        .enter()\n        .append('svg:g')\n        .attr('transform', function(d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n        });\n\n        var circles = gs.append('svg:circle')\n        .attr('nucleotide', (d) => { if (d.name) { return d.name.toLowerCase(); }})\n        .attr('r', options.nucleotideRadius)\n        .classed('node', true)\n        .classed(fstyle.node, true)\n        \n\n        if (options.showNucleotideLabels) {\n            var nucleotideLabels = gs.append('svg:text')\n            .text(function(d) { return d.name; })\n            .classed(fstyle.nodeLabel, true)\n            .append('svg:title')\n            .text(function(d) { return d.struct_name + ':' + d.num; });\n        }\n    }\n\n    function createLabels(selection, labelNodes) {\n        // create groupings for each nucleotide and label\n\n        var gs = selection\n        .selectAll('.rnaLabel')\n        .data(labelNodes)\n        .enter()\n        .append('svg:g')\n        .attr('transform', function(d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n        });\n        \n        var circles = gs.append('svg:circle')\n        .attr('r', options.nucleotideRadius)\n        .classed('node', true)\n        .classed(fstyle.node, true)\n        .classed(fstyle.nodeLabel, true)\n\n        var numberLabels = gs.append('svg:text')\n        .text(function(d) { return d.name; })\n        .attr('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('dominant-baseline', 'central')\n        .classed(fstyle.nodeLabel, true);\n    }\n\n    function createName(selection, name) {\n        let nameLabel = selection.append('svg:text')\n        //.attr('dy', -10)\n        .classed(fstyle.rnaName, true)\n        .text(name);\n    \n        let xyPos = options.namePosition.split(\" \", 2) // 0 0.5 1\n        let xy = []\n        let textBBox = nameLabel.node().getBBox()\n        let textSize = [textBBox.width, textBBox.height]\n        let plotSize = [options.width, options.height]\n        \n        for (let p in [0, 1]) {\n            switch (xyPos[p]) {\n                case '0':\n                    xy[p] = textSize[p] / 2\n                    break;\n                case '1':\n                    xy[p] = plotSize[p] - textSize[p] / 2\n                    break;\n                case '0.5':\n                    xy[p] = plotSize[p] / 2\n                    break;\n            }\n        }\n        nameLabel.attr('x', xy[0]).attr('y', xy[1])\n    }\n\n    function makeExternalLinksBundle(selection, links) {\n        var nodesDict = {};\n        var linksList = [];\n        links = links.filter(function(d) { return d.linkType == 'correct' || d.linkType == 'incorrect' || d.linkType == 'extra'; });\n        \n        selection.selectAll('[link-type=extra]')\n        .remove();\n\n\n        for (var i = 0; i < links.length; i++) {\n            if (links[i].source === null || links[i].target === null)\n                continue;\n\n            nodesDict[links[i].source.uid] = links[i].source;\n            nodesDict[links[i].target.uid] = links[i].target;\n\n            linksList.push({'source': links[i].source.uid, 'target': links[i].target.uid, 'linkType': links[i].linkType, 'extraLinkType': links[i].extraLinkType}) ;\n        }\n\n        var fbundling = d3.ForceEdgeBundling().nodes(nodesDict).edges(linksList)\n        .compatibility_threshold(0.8).step_size(0.2);\n        var results   = fbundling();\n\n        var d3line = d3.svg.line()\n            .x(function(d){return d.x;})\n            .y(function(d){return d.y;})\n            .interpolate('linear');\n\n        for (var i = 0; i < results.length; i++) {\n            var edge_subpoint_data = results[i];\n            // for each of the arrays in the results\n            // draw a line between the subdivions points for that edge\n\n            selection.append('path').attr('d', d3line(edge_subpoint_data))\n            .style('fill', 'none')\n            .attr('link-type', function(d) { return linksList[i].linkType; })\n            .attr('extra-link-type', function(d) { return linksList[i].extraLinkType; })\n            .style('stroke-opacity',0.4); //use opacity as blending\n        }\n\n    }\n\n    function createLinks(selection, links) {\n        links = links.filter(function(d) { return d.source !== null && d.target !== null; });\n        var gs = selection.selectAll('.link')\n        .data(links)\n        .enter()\n        .append('svg:line')\n        .attr('x1', function(d) { return d.source.x; })\n        .attr('x2', function(d) { return d.target.x; })\n        .attr('y1', function(d) { return d.source.y; })\n        .attr('y2', function(d) { return d.target.y; })\n        .attr('link-type', function(d) { return d.linkType; })\n        .attr('extra-link-type', function(d) { return d.extraLinkType; })\n        .classed('link', true)\n        .classed(fstyle.link, true)\n    }\n\n    function chart(selection) {\n        selection.each(function(data) {            \n            let plot = d3.select(this).append('g')\n            .classed('rnaplot', true)\n            \n            // data should be a dictionary containing at least a structure\n            // and possibly a sequence\n            let rg = new RNAGraph(data.sequence, data.structure, data.name, options.startNucleotideNumber)\n                    .recalculateElements()\n                    .elementsToJson()\n                    .addName(data.name);\n\n            data.rnaGraph = rg;\n            // calculate the position of each nucleotide\n            // the positions of the labels will be calculated in\n            // the addLabels function\n            let positions = [];\n            \n            if (options.rnaLayout === 'naview') {\n                var naview = new NAView();\n                var naViewPositions = naview.naview_xy_coordinates(rg.pairtable);\n                \n                for (var i = 0; i < naViewPositions.nbase; i++) {\n                    positions.push([naViewPositions.x[i], naViewPositions.y[i]]);\n                }\n            } else {\n                positions = simpleXyCoordinates(rg.pairtable);\n            }\n            \n            rg.addPositions('nucleotide', positions)\n            //.reinforceStems()\n            //.reinforceLoops()\n            //.addExtraLinks(data.extraLinks)\n            .addLabels(options.startNucleotideNumber, options.labelInterval);\n\n            // create a transform that will fit the molecule to the\n            // size of the viewport (canvas, svg, whatever)            \n            let fillViewportTransform = createTransformToFillViewport(\n                rg.nodes.map(function(d) { return d.x; }),\n                rg.nodes.map(function(d) { return d.y; })\n            );\n            plot.attr('transform', fillViewportTransform);\n            \n            let nucleotideNodes = rg.nodes.filter(function(d) {\n                return d.nodeType == 'nucleotide';\n            });\n\n            let labelNodes = rg.nodes.filter(function(d) {\n                return d.nodeType == 'label';\n            });\n            \n            let links = rg.links;\n\n            createLinks(plot, links);\n            createNucleotides(plot, nucleotideNodes);\n            createLabels(plot, labelNodes);\n            createName(d3.select(this), data.name);\n\n            if (options.bundleExternalLinks) {\n                makeExternalLinksBundle(plot, links);\n            }\n\n        });\n    }\n\n    chart.width = function(_) {\n        if (!arguments.length) return options.width;\n        options.width = _;\n        return chart;\n    };\n\n    chart.height = function(_) {\n        if (!arguments.length) return options.height;\n        options.height = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.rnaEdgePadding = function(_) {\n        if (!arguments.length) return options.rnaEdgePadding;\n        options.rnaEdgePadding = _;\n        return chart;\n    };\n\n    chart.nucleotideRadius = function(_) {\n        if (!arguments.length) return options.nucleotideRadius;\n        options.nucleotideRadius = _;\n        return chart;\n    };\n\n    chart.labelInterval = function(_) {\n        if (!arguments.length) return options.labelInterval;\n        options.labelInterval = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.startNucleotideNumber = function(_) {\n        if (!arguments.length) return options.startNucleotideNumber;\n        options.startNucleotideNumber = _;\n        return chart;\n    };\n\n    chart.bundleExternalLinks = function(_) {\n        if (!arguments.length) return options.bundleExternalLinks;\n        options.bundleExternalLinks = _;\n        return chart;\n    };\n    \n    chart.rnaLayout = function(_) {\n        if (!arguments.length) return options.rnaLayout;\n        options.rnaLayout = _;\n        return chart;\n    };\n    \n    chart.namePosition = function(_) {\n        if (!arguments.length) return options.namePosition;\n        options.namePosition = _;\n        return chart;\n    };\n    \n    return chart;\n}","import {rnaPlot} from './rnaplot.js';\n\nexport function rnaTreemap(passedOptions) {\n    var options = {\n        'width': 300,\n        'height': 300,\n        'nucleotideRadius': 5,\n        'rnaEdgePadding': 1,     // how far the leftmost, rightmost, topmost and bottomost\n                                // nucleotides are from the edge of the plot\n        'labelInterval': 10,\n        'showNucleotideLabels': true,\n        'startNucleotideNumber': 1,\n        'bundleExternalLinks': false,\n        \n        'rnaLayout': 'simple', // simple or naview\n        'namePosition': '0 0', // for x and y either 0, 0.5 or 1\n    };\n    \n    var options = Object.assign(options, passedOptions);\n\n    function rnaTreemapNode(selection) {\n        // create a background rectangle for each RNA structure\n        selection.each(function(d) {\n            d3.select(this)\n            .attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')' })\n            .append('rect')\n            .attr('width', function(d) { return Math.max(0, d.dx); })\n            .attr('height', function(d) { return Math.max(0, d.dy); })\n\n            // draw the actual RNA structure\n            var chart = rnaPlot(options)\n            .width( Math.max(0, d.dx))\n            .height( Math.max(0, d.dy))\n\n            if ('structure' in d) d3.select(this).call(chart)\n        });\n    }\n\n    var chart = function(selection) {\n        selection.each(function(data) {\n            console.log('data:', data)\n            // initialize the treemap structure\n            // sample input\n            // { 'name': 'blah',\n            // 'children: [{'structure': '..((..))',\n            //               'sequence': 'ACCGGCC',\n            //               'size': 50}]\n            // }\n            var treemap = d3.layout.treemap()\n            .size([options.width, options.height])\n            .sticky(false)\n            .value(function(d) { return d.size; });\n\n            // create a new <g> for each node in the treemap\n            // this may be a little redundant, since we expect the calling\n            // selection to contain their own g elements\n            var gEnter = d3.select(this)\n                .append('g')\n                .classed('rnatreemap', true)\n            var treemapGnodes = gEnter.datum(data).selectAll('.treemapnode')\n                .data(treemap.nodes)\n                .enter()\n                .append('g')\n                .classed('treemapnode', true)\n                .call(rnaTreemapNode);\n        });\n    };\n\n    chart.width = function(_) {\n        if (!arguments.length) return options.width;\n        options.width = _;\n        return chart;\n    };\n\n    chart.height = function(_) {\n        if (!arguments.length) return options.height;\n        options.height = _;\n        return chart;\n    };\n    \n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.rnaEdgePadding = function(_) {\n        if (!arguments.length) return options.rnaEdgePadding;\n        options.rnaEdgePadding = _;\n        return chart;\n    };\n\n    chart.nucleotideRadius = function(_) {\n        if (!arguments.length) return options.nucleotideRadius;\n        options.nucleotideRadius = _;\n        return chart;\n    };\n\n    chart.labelInterval = function(_) {\n        if (!arguments.length) return options.labelInterval;\n        options.labelInterval = _;\n        return chart;\n    };\n\n    chart.showNucleotideLabels = function(_) {\n        if (!arguments.length) return options.showNucleotideLabels;\n        options.showNucleotideLabels = _;\n        return chart;\n    };\n\n    chart.startNucleotideNumber = function(_) {\n        if (!arguments.length) return options.startNucleotideNumber;\n        options.startNucleotideNumber = _;\n        return chart;\n    };\n\n    chart.bundleExternalLinks = function(_) {\n        if (!arguments.length) return options.bundleExternalLinks;\n        options.bundleExternalLinks = _;\n        return chart;\n    };\n    \n    chart.rnaLayout = function(_) {\n        if (!arguments.length) return options.rnaLayout;\n        options.rnaLayout = _;\n        return chart;\n    };\n    \n    chart.namePosition = function(_) {\n        if (!arguments.length) return options.namePosition;\n        options.namePosition = _;\n        return chart;\n    };\n    \n    chart.zoom = function(_) {\n        if (!arguments.length) return options.zoom;\n        options.zoom = _;\n        return chart;\n    };\n\n    return chart;\n}\n","export {FornaContainer} from './fornac.js';\nexport {rnaPlot} from './rnaplot.js';\nexport {rnaTreemap} from './rnatreemap.js';\n\n//export {RNAUtilities, ColorScheme} from './rnautils.js';\n//export {ProteinGraph, RNAGraph, moleculesToJson} from './rnagraph.js';\n//export {simpleXyCoordinates} from './simplernaplot.js';"],"sourceRoot":""}